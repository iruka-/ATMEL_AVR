<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">

<head>
 <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
 <title>2010-04 - PukiWiki</title>

<!---
 <link rel="stylesheet" media="screen and (max-width:768px)" href="../skin/180wiki-sp.css" />

 --->

 <link rel="stylesheet" media="screen and (max-width:768px)" href="../skin/monobook/mobile.css" />
 <link rel="stylesheet" media="screen and (min-width:769px)" href="../skin/monobook/monobook.css" />

 <link rel="stylesheet" type="text/css" media="print" href="../skin/monobook/monobook.print.css" />
 <link rel="alternate" type="application/rss+xml" title="RSS" href="./?cmd=rss" />

 <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>
<div id="globalWrapper">
 <div id="menubar">
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/html/" title="FrontPage" class="link_page_passage">Ｔｏｐ</a></li></ul>
<hr class="full_hr" />
<p><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-EF-BD-98-.html" class="link_page_passage">ＨＩＤａｓｐｘ</a></p>
<ul class="list1 list-indent1"><li><a href="EF-BC-A4-EF-BD-8F-EF-BD-97-EF-BD-8E-EF-BC-AC-EF-BD-8F-EF-BD-81-EF-BD-84-.html" class="link_page_passage">ＤｏｗｎＬｏａｄ</a></li>
<li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E9-AB-98-E9-80-9F-E5-8C-96-.html" class="link_page_passage">ＨＩＤａｓｐ高速化</a></li>
<li><strong><a href="Newest.html" title="Newest" class="link_page_passage">開発日記</a></strong> <a href="SiteMap.html" title="SiteMap" class="link_page_passage">ログ</a></li></ul>
<p><a href="E5-88-B6-E4-BD-9C-.html" class="link_page_passage">制作</a></p>
<p><a href="AVRetc.html" title="AVRetc" class="link_page_passage">ＡＶＲ関係</a></p>
<ul class="list1 list-indent1"><li><a href="AVR_Monit.html" class="link_page_passage">AVR_Monit</a></li>
<li><a href="AVR_term.html" class="link_page_passage">AVR_term</a></li>
<li><a href="W32_term.html" class="link_page_passage">W32_term</a></li>
<li><a href="HIDmon88.html" class="link_page_passage">HIDmon88</a></li>
<li><a href="HIDtester.html" class="link_page_passage">HIDtester</a></li>
<li><a href="usbRS232.html" class="link_page_passage">usbRS232</a></li>
<li><a href="Arduino2313.html" class="link_page_passage">Arduino2313</a></li>
<li><a href="E3-83-87-E3-82-B8-E3-82-BF-E3-83-AB-E3-83-86-E3-82-B9-E3-82-BF-E3-83-BC-.html" class="link_page_passage">デジタルテスター</a></li>
<li><a href="ATmega88E7-94-9F-E6-B4-BB-.html" class="link_page_passage">ATmega88生活</a></li>
<li><a href="KeyBoardE3-83-9E-E3-83-8B-E3-82-A2-.html" class="link_page_passage">KeyBoardマニア</a></li>
<li><a href="KeyBoardE3-83-9E-E3-83-8B-E3-82-A2-II.html" class="link_page_passage">KeyBoardマニアII</a></li>
<li><a href="Arduino400.html" class="link_page_passage">Arduino400</a></li>
<li><a href="PICspx.html" title="PICspx" class="link_page_passage">PICライター</a></li>
<li><a href="hid_blaster.html" title="hid_blaster" class="link_page_passage">ARMライター</a></li>
<li><a href="E8-B5-A4-E5-A4-96-E7-B7-9A-E3-83-AA-E3-83-A2-E3-82-B3-E3-83-B3-.html" class="link_page_passage">赤外線リモコン</a></li></ul>
<p><a href="ARM.html" class="link_page_passage">ARM</a></p>
<ul class="list1 list-indent1"><li><a href="armon.html" title="armon" class="link_page_passage">STM32ブートローダー</a></li>
<li><a href="stm32f103.html" title="stm32f103" class="link_page_passage">STM8S-Discovery改造</a></li>
<li><a href="stm8s_blaster.html" title="stm8s_blaster" class="link_page_passage">STM8S-OpenOCDライター</a></li>
<li><a href="LPCXpresso.html" class="link_page_passage">LPCXpresso</a></li>
<li><a href="lpc2D-armon.html" title="lpc-armon" class="link_page_passage">LPC用ブートローダー</a></li>
<li><a href="LPCUSB.html" title="LPCUSB" class="link_page_passage">NXP用LPCUSB</a></li>
<li><a href="ARM7mon.html" title="ARM7mon" class="link_page_passage">NXP用ブートローダー</a></li>
<li><a href="LPC1114.html" title="LPC1114" class="link_page_passage">MARY基板</a></li>
<li><a href="LPC1114FN28.html" class="link_page_passage">LPC1114FN28</a></li>
<li><a href="arm_blaster.html" title="arm_blaster" class="link_page_passage">OpenOCD　JTAGアダプター</a></li>
<li><a href="openocd2D-build.html" title="openocd-build" class="link_page_passage">OpenOCDビルド方法</a></li>
<li><a href="arm2D-gcc.html" title="arm-gcc" class="link_page_passage">arm-gccビルド方法</a></li>
<li><a href="mapleIDE.html" title="mapleIDE" class="link_page_passage">mapleIDEの改造</a></li>
<li><a href="libmapleE3-81-A7-E4-BB-AE-E6-83-B3-COM.html" class="link_page_passage">libmapleで仮想COM</a></li></ul>
<p>PIC32</p>
<ul class="list1 list-indent1"><li><a href="PIC32MX.html" class="link_page_passage">PIC32MX</a></li>
<li><a href="Pinguino.html" title="Pinguino" class="link_page_passage">Pinguinoで遊ぼう</a></li>
<li><a href="HIDBootX.html" title="HIDBootX" class="link_page_passage">ブートローダーを作る</a></li>
<li><a href="uartflash32.html" title="uartflash32" class="link_page_passage">シリアルブートローダー</a></li>
<li><a href="PIC32MX_USBCDC.html" title="PIC32MX_USBCDC" class="link_page_passage">USB仮想シリアル</a></li>
<li><a href="USB_CUSTOM.html" title="USB_CUSTOM" class="link_page_passage">USBカスタムデバイス</a></li>
<li><a href="PIC32mon.html" title="PIC32mon" class="link_page_passage">USB簡易モニター</a></li>
<li><a href="USBE3-82-AA-E3-82-B7-E3-83-AD-E3-82-B9-E3-82-B3-E3-83-BC-E3-83-97-.html" class="link_page_passage">USBオシロスコープ</a></li>
<li><a href="USB_HOST.html" title="USB_HOST" class="link_page_passage">USBホスト</a>　</li>
<li><a href="Bluetooth.html" title="Bluetooth" class="link_page_passage">PIC32でBluetooth</a>　</li>
<li><a href="USBAudio.html" class="link_page_passage">USBAudio</a>　</li>
<li><a href="USBStudy.html" class="link_page_passage">USBStudy</a>　</li>
<li><a href="pic32vga.html" title="pic32vga" class="link_page_passage">VGA出力に挑戦</a></li>
<li><a href="tinyBasic2.html" title="tinyBasic2" class="link_page_passage">BASICを動かす</a></li>
<li><a href="WinUSB.html" class="link_page_passage">WinUSB</a>　</li>
<li><a href="PIC32MXcust.html" title="PIC32MXcust" class="link_page_passage">勝手に改蔵*PIC32</a></li></ul>
<p>PIC18F</p>
<ul class="list1 list-indent1"><li><a href="pic18boot.html" title="pic18boot" class="link_page_passage">HIDブートローダー</a></li>
<li><a href="pic18spx.html" title="pic18spx" class="link_page_passage">AVR/PIC両用ライター</a></li>
<li><a href="pic18blaster.html" title="pic18blaster" class="link_page_passage">ARMライター</a></li>
<li><a href="pic18monit.html" title="pic18monit" class="link_page_passage">usb汎用クラス</a></li>
<li><a href="usbserial.html" title="usbserial" class="link_page_passage">usbシリアル変換</a></li>
<li><a href="pic18hidkey.html" title="pic18hidkey" class="link_page_passage">usbキーボード変換</a></li>
<li><a href="sdcc.html" title="sdcc" class="link_page_passage">sdccを使いこなす</a></li>
<li><a href="mcc18.html" title="mcc18" class="link_page_passage">mcc18を使いこなす</a></li>
<li><a href="HIDmon2D-2550.html" class="link_page_passage">HIDmon-2550</a></li>
<li><a href="HIDmon2D-14K50.html" class="link_page_passage">HIDmon-14K50</a></li>
<li><a href="PICmonitor.html" class="link_page_passage">PICmonitor</a></li></ul>
<p>試行錯誤の記録</p>
<ul class="list1 list-indent1"><li><a href="UBW.html" title="UBW" class="link_page_passage">UBWを試す</a></li>
<li><a href="HIDboot.html" title="HIDboot" class="link_page_passage">旧HIDboot</a></li>
<li><a href="PIC18F2550.html" title="PIC18F2550" class="link_page_passage">PIC18F2550試用記</a></li>
<li><a href="PIC18F4550.html" title="PIC18F4550" class="link_page_passage">PIC18F4550試用記</a></li></ul>
<p>その他マイコン</p>
<ul class="list1 list-indent1"><li><a href="NEC78K.html" class="link_page_passage">NEC78K</a></li>
<li><a href="RX62N.html" class="link_page_passage">RX62N</a></li>
<li><a href="SH2A.html" class="link_page_passage">SH2A</a></li>
<li><a href="EF-BC-A8-EF-BC-98-.html" class="link_page_passage">Ｈ８</a></li>
<li><a href="FM3.html" class="link_page_passage">FM3</a></li>
<li><a href="ubuntuXP.html" title="ubuntuXP" class="link_page_passage">XPからubuntuに乗り換え</a></li>
<li><a href="Android.html" class="link_page_passage">Android</a></li>
<li><a href="Xen2D-hypervisor.html" class="link_page_passage">Xen-hypervisor</a></li>
<li><a href="Windows8E3-82-AB-E3-82-B9-E3-82-BF-E3-83-9E-E3-82-A4-E3-82-BA-.html" class="link_page_passage">Windows8カスタマイズ</a></li></ul>
<p>開発日記</p>
<ul class="list1 list-indent1"><li><a href="20152D-04.html" class="link_page_passage">2015-04</a></li></ul>
<hr class="full_hr" />
<p>ノウハウ</p>
<ul class="list1 list-indent1"><li><a href="AVRUSB_Tips.html" class="link_page_passage">AVRUSB_Tips</a></li>
<li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E6-83-85-E5-A0-B1-.html" class="link_page_passage">ＨＩＤａｓｐ情報</a></li>
<li><a href="E6-B1-8E-E7-94-A8-EF-BC-B5-EF-BC-B3-EF-BC-A2-2D-EF-BC-A9-EF-BC-AF-.html" class="link_page_passage">汎用ＵＳＢ-ＩＯ</a></li></ul>
<hr class="full_hr" />
<p>・<a href="AVRlink.html" title="AVRlink" class="link_page_passage">リンク</a></p>
<p>フリースペース</p>
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/cgi-bin/note/index.cgi" rel="nofollow">ゲストブック</a></li></ul>
<hr class="full_hr" />
<p><a href="EF-BC-B7-EF-BD-89-EF-BD-84-EF-BD-85-EF-BC-B4-EF-BD-85-EF-BD-98-EF-BD-94-.html" title="ＷｉｄｅＴｅｘｔ" class="link_page_passage">旧コンテンツ</a><br />
<a href="EF-BC-B7-EF-BD-89-EF-BD-8E-EF-BC-B6-EF-BD-89-EF-BD-93-EF-BD-94-EF-BD-81-.html" class="link_page_passage">ＷｉｎＶｉｓｔａ</a><br />
<a href="E3-82-A4-E3-83-B3-E3-82-BF-E3-83-BC-E3-83-95-E3-82-A7-E3-83-BC-E3-82-B9-E8-80-83-.html" class="link_page_passage">インターフェース考</a></p>
<hr class="full_hr" />
<h5>最新の20件</h5>
<div><strong>2024-06-20</strong>
<ul class="recent_list">
 <li><a href="Newest.html" class="link_page_passage">Newest</a></li>
 <li><a href="20222D-08.html" class="link_page_passage">2022-08</a></li>
 <li><a href="MenuBar.html" class="link_page_passage">MenuBar</a></li>
</ul>
<strong>2022-12-06</strong>
<ul class="recent_list">
 <li><a href="MSE3-82-A2-E3-82-AB-E3-82-A6-E3-83-B3-E3-83-88-E3-81-AE-WindowsE3-81-AE-CE3-83-89-E3-83-A9-E3-82-A4-E3-83-96-E3-82-92-E4-BF-AE-E5-BE-A9-E3-81-99-E3-82-8B-.html" class="link_page_passage">MSアカウントのWindowsのCドライブを修復する</a></li>
</ul>
<strong>2022-09-29</strong>
<ul class="recent_list">
 <li><a href="AndroidE3-81-AB-SSLE8-87-AA-E5-B7-B1-E7-BD-B2-E5-90-8D-E8-A8-BC-E6-98-8E-E6-9B-B8-E3-82-92-E5-85-A5-E3-82-8C-E3-82-8B-.html" class="link_page_passage">AndroidにSSL自己署名証明書を入れる</a></li>
</ul>
<strong>2022-09-01</strong>
<ul class="recent_list">
 <li><a href="UEFI_Basic.html" class="link_page_passage">UEFI_Basic</a></li>
</ul>
<strong>2022-08-31</strong>
<ul class="recent_list">
 <li><a href="SMRE3-81-AA-HDDE3-83-99-E3-83-B3-E3-83-81-E3-83-9E-E3-83-BC-E3-82-AF-.html" class="link_page_passage">SMRなHDDベンチマーク</a></li>
 <li><a href="E7-B0-A1-E6-98-93-E9-80-9F-E5-BA-A6-E6-B8-AC-E5-AE-9A-E3-82-B5-E3-82-A4-E3-83-88-.html" class="link_page_passage">簡易速度測定サイト</a></li>
 <li><a href="E3-83-8D-E3-83-83-E3-83-88-E3-83-AF-E3-83-BC-E3-82-AF-BOOT.html" class="link_page_passage">ネットワークBOOT</a></li>
</ul>
<strong>2022-08-26</strong>
<ul class="recent_list">
 <li><a href="E7-B0-A1-E6-98-93-E3-82-B3-E3-83-B3-E3-83-91-E3-82-A4-E3-83-AB-E3-83-99-E3-83-B3-E3-83-81-.html" class="link_page_passage">簡易コンパイルベンチ</a></li>
</ul>
<strong>2022-08-01</strong>
<ul class="recent_list">
 <li><a href="/ATMEL_AVR/html/" class="link_page_passage">FrontPage</a></li>
 <li><a href="20152D-04.html" class="link_page_passage">2015-04</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-EF-BD-98-.html" class="link_page_passage">ＨＩＤａｓｐｘ</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E6-83-85-E5-A0-B1-.html" class="link_page_passage">ＨＩＤａｓｐ情報</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-.html" class="link_page_passage">ＨＩＤａｓｐ</a></li>
 <li><a href="NEC78K.html" class="link_page_passage">NEC78K</a></li>
 <li><a href="AVRetc.html" class="link_page_passage">AVRetc</a></li>
 <li><a href="AVR_Monit.html" class="link_page_passage">AVR_Monit</a></li>
 <li><a href="20082D-08.html" class="link_page_passage">2008-08</a></li>
</ul>
<strong>2022-07-31</strong>
<ul class="recent_list">
 <li><a href="EF-BC-B7-EF-BD-89-EF-BD-84-EF-BD-85-EF-BC-B4-EF-BD-85-EF-BD-98-EF-BD-94-.html" class="link_page_passage">ＷｉｄｅＴｅｘｔ</a></li>
</ul>
</div>
</div>
 <div id="mainColumnWrapper">
  <div id="main-column">
   <div id="navigator"><ul><li class="selected" id="separate"><a href="">本文</a></li><li><a href="./?cmd=edit&amp;page=2010-04">編集</a></li><li><a href="./?cmd=diff&amp;page=2010-04">差分</a></li></ul></div>
   <div id="content">
    <h1 class="firstHeading">2010-04</h1><div id="contentSub"></div>
    <p><a href="20102D-03.html" class="link_page_passage">2010-03</a>←　→ <a href="pic18spx.html" title="pic18spx" class="link_page_passage">ＡＶＲ／ＰＩＣ両用ライター</a>　<a href="usbserial.html" title="usbserial" class="link_page_passage">usbシリアル変換 </a>　<a href="pic18hidkey.html" title="pic18hidkey" class="link_page_passage">usbキーボード </a>　<a href="pic18spx.html" title="pic18spx" class="link_page_passage">簡易ロジアナ、赤外線リモコン信号観測</a></p>
<h3 id="content_1_0">４月：ついにＬＨＣ再開3.5TeV　何が見える？<a class="anchor_super" id="t148d833" href="#t148d833" title="t148d833" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>暗黒物質？Ｈｉｇｇｓ粒子？次元の扉？はたまた地球の破滅？</li></ul>
<hr class="full_hr" />
<p>ＡＴＬＡＳ実験オフィシャルBlog</p>
<ul class="list1 list-indent1"><li><a href="http://d.hatena.ne.jp/lhcatlasjapan/" rel="nofollow">http://d.hatena.ne.jp/lhcatlasjapan/</a></li></ul>
<p>ＫＥＫ</p>
<ul class="list1 list-indent1"><li><a href="http://atlas.kek.jp/" rel="nofollow">http://atlas.kek.jp/</a></li></ul>
<p><br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_1">先月のまとめ<a class="anchor_super" id="r452ccbc" href="#r452ccbc" title="r452ccbc" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>PIC24Fライター--完成</li>
<li>ＦＰＧＡ基板（LatticeXP2）でＬチカ。--完了</li>
<li>ＮＸＰ基板でOpenOCD --玉砕</li>
<li>hidmon-2550/hidmon-14kのソース整理。--済み</li>
<li>hidmon-2550/hidmon-14kのHID転送モードをインタラプト転送に戻す。--ミカン、じゃなくて未完。</li></ul>
<p><strong>今月の<del>たわごと</del>目標</strong></p>
<ul class="list1 list-indent1"><li><del>hidmon-2550/hidmon-14kのHID転送モードをインタラプト転送に戻す。</del> --- 済み</li>
<li>（もれなく雑誌が付いてくる）SH2A基板を（万が一）買ったら使い道を考える。</li>
<li>FT2232LでOpenOCD(JTAGkey互換品)を試す（作ってみる）。
<ul class="list2 list-indent1"><li>---&gt;多分やらないかも。レベルコンバータ入手が面倒なのと、ＣＱ付録基板でJTAGが必要になるシチュエーションはあまりなさそう。</li>
<li>必要になったときに考える。</li></ul></li></ul>
<ul class="list1 list-indent1"><li>STM32のDFUビルド環境を整える。</li></ul>
<p>まあ、素人にはどうせこの程度しか出来んのですわ。</p>
<hr class="full_hr" />
<p><br />
<br />
<br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_2">hidmon-2550/14kのHID転送モードをインタラプト転送に戻す。<a class="anchor_super" id="u0475796" href="#u0475796" title="u0475796" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>うまくいった。</li>
<li>コントロール転送系よりコードサイズは大きくなる。</li>
<li>poll系は未実装。</li>
<li><del>bootloaderとしてのテストはこれから。</del></li></ul>
<p>ファーム書き込みテストはパスした。</p>
<p>bootloaderとして使ってみた。一応使えるようになった。</p>
<ul class="list1 list-indent1"><li>poll系は未実装を返すようにして、ホストＰＣ側で代替処理に切り替えた。</li></ul>
<p>毒味版の<strong>ダウンロード</strong>（仮）</p>
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/upload/PIC/pic18boot-2010-0406.zip" rel="nofollow">pic18boot-2010-0406.zip</a></li></ul>
<p><br />
picmon.exeは統合化済み。</p>
<ul class="list1 list-indent1"><li>使用例１ --- ブートローダーから800番地のアプリ（例えばpic18spxファーム）を起動する。
<pre>C:&gt;picmon.exe
PIC&gt; boot 800 
PIC&gt; q</pre></li>
<li>使用例２ --- pic18spxファームから、ブートローダーに制御を移す。
<pre>C:&gt;picmon.exe
PIC&gt; boot 0c
PIC&gt; q</pre></li></ul>
<ul class="list1 list-indent1"><li>これで、ブートジャンパーを切り替えてUSBケーブルを挿しなおす手間は不要になった。</li></ul>
<p><br />
<br />
<br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_3">PIC関係ツールが（とても）分かりにくい件<a class="anchor_super" id="d25390b6" href="#d25390b6" title="d25390b6" style="user-select:none;">&dagger;</a></h2>
<p>まず、<strong>反省</strong></p>
<ul class="list1 list-indent1"><li>テキトーに作って、作り散らかしていた。（<strong>実験</strong>している、とも言う）</li></ul>
<div class="ie5"><table class="style_table" cellspacing="1" border="0"><tbody><tr><td class="style_td">アーカイブ名</td><td class="style_td">機能</td><td class="style_td">実行ファイル</td><td class="style_td">コメント</td></tr>
<tr><td class="style_td">hidmon-2550</td><td class="style_td">ブートローダとPICモニタ</td><td class="style_td">picboot.exe / picmon.exe</td><td class="style_td">diolanローダーを改造しただけのもの。18F2550/4550対応品</td></tr>
<tr><td class="style_td">hidmon-14k50</td><td class="style_td">ブートローダとPICモニタ</td><td class="style_td">picboot.exe / picmon.exe</td><td class="style_td">diolanローダーを改造しただけのもの。18F14K50専用品</td></tr>
<tr><td class="style_td">pic18spx</td><td class="style_td">PICモニタとAVR/PICライタを実現するパッケージ</td><td class="style_td">picmonit.exe / picspx-gcc.exe / picwriter.exe / writer24.exe</td><td class="style_td">hidmon-2550/14k50ファームウェアをＣ言語でリライトして機能強化した（AVR/PICライター部分を追加した）もの。ファームのサイズが大きいので、ブートローダーとしては使えない。</td></tr>
<tr><td class="style_td">picspx-classic</td><td class="style_td">ATtiny2313(HIDaspx)ハードウェアを使用してPIC18Fに書き込むWindows上のツール</td><td class="style_td">picspx.exe</td><td class="style_td">読み書きは非常に遅い。最初にPICにブートローダーを書き込むための限定ツール。</td></tr>
</tbody></table></div>
<ul class="list1 list-indent1"><li>さらにもう一個追加される。</li></ul>
<div class="ie5"><table class="style_table" cellspacing="1" border="0"><tbody><tr><td class="style_td">アーカイブ名</td><td class="style_td">機能</td><td class="style_td">実行ファイル</td><td class="style_td">コメント</td></tr>
<tr><td class="style_td">pic18boot</td><td class="style_td">ブートローダとPICモニタ</td><td class="style_td">picboot.exe / picmon.exe</td><td class="style_td">ソースはアセンブラのままで、hidmon-2550/14k50とデバイスごとに別ソースになっていたものを統合し高速化したもの</td></tr>
</tbody></table></div>
<ul class="list1 list-indent1"><li>なにがダメかというと、実行ファイルの名称がダブっているところ。</li>
<li>18F2550/18F14K50で別々になっていなければならない実行コマンドを同一名称のexeにしていた。</li>
<li>picmon.exe / picmonit.exeのように良く似ている実装なのに実行ファイル名称が微妙に違っていること
<ul class="list2 list-indent1"><li>picmon.exeはアセンブラ実装側ファームをサポートし、picmonit.exeはＣ言語実装側ファームをサポートしている。</li></ul></li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_4">結局のところ、何をやりたいかというと・・・<a class="anchor_super" id="ee3192a6" href="#ee3192a6" title="ee3192a6" style="user-select:none;">&dagger;</a></h4>
<ul class="list1 list-indent1"><li>3.3〜5V動作で、廉価で、DIP品が売られていて、USB内蔵の<strong>PIC18Fxxxx</strong>にプログラムを書き込みたかっただけ、とも言える。</li></ul>
<ul class="list1 list-indent1"><li>じゃあ、PICKit2を買えと言われると、まったく反論できないわけで・・・</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_5">図説<a class="anchor_super" id="pd6f607f" href="#pd6f607f" title="pd6f607f" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>PIC関係ツールを図式化して説明していただきました。</li></ul>
<p>senshuさんのサイトに飛びます。</p>
<ul class="list1 list-indent1"><li><a href="http://www-ice.yamagata-cit.ac.jp/ken/senshu/sitedev/index.php?AVR%2Fnews53#n062e049" rel="nofollow">http://www-ice.yamagata-cit.ac.jp/ken/senshu/sitedev/index.php?AVR%2Fnews53#n062e049</a></li></ul>
<p><br />
<br />
<br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_6">携帯：SIMロックフリー論争<a class="anchor_super" id="y3b9f541" href="#y3b9f541" title="y3b9f541" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li><a href="http://pc.watch.impress.co.jp/docs/column/mobile/20100405_359208.html" rel="nofollow">http://pc.watch.impress.co.jp/docs/column/mobile/20100405_359208.html</a></li>
<li><a href="http://www.itmedia.co.jp/promobile/articles/1003/31/news070.html" rel="nofollow">http://www.itmedia.co.jp/promobile/articles/1003/31/news070.html</a></li></ul>
<ul class="list1 list-indent1"><li>そもそも無茶な話。</li>
<li>なぜこのタイミングで出てきたかというと、iPad発売タイミングだから。</li>
<li>おそらくガイアツ（外圧）。</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_7">LTEというのは3Gの次の規格なのか？（3.9Gらしい）<a class="anchor_super" id="v0786671" href="#v0786671" title="v0786671" style="user-select:none;">&dagger;</a></h4>
<p><a href="http://www.rbbtoday.com/article/2008/10/01/54649.html" rel="nofollow">http://www.rbbtoday.com/article/2008/10/01/54649.html</a></p>
<p><br /></p>
<ul class="list1 list-indent1"><li>そうすると何が起きるか？</li></ul>
<p>携帯電話（ハードウェア）はコモディティ化する。</p>
<ul class="list1 list-indent1"><li>iPhone/iPad,Android,Kindleなどに収束してしまう。</li>
<li><strong>ガラパゴス消滅の危機！</strong></li></ul>
<p><br />
Apple、第4世代iPhoneではCDMA版の提供も計画か - WSJ報道</p>
<ul class="list1 list-indent1"><li><a href="http://journal.mycom.co.jp/news/2010/03/30/065/index.html" rel="nofollow">http://journal.mycom.co.jp/news/2010/03/30/065/index.html</a></li></ul>
<ul class="list1 list-indent1"><li>つまり、SIMロックフリーになってもAUと他2社間ではそもそも通信方式が違うので端末を融通できないってこと？</li></ul>
<p>まあ、それは置いといて、</p>
<ul class="list1 list-indent1"><li>iPhone/iPadがどのキャリアでも使えるようになってしまうと携帯キャリアは単なる無線ＷＡＮプロバイダーに成り下がってしまう。（昔のような、端末製造電機メーカーを牽引する強い指導力は無くなる）</li>
<li>そうすると、台湾中国韓国などメーカーもAndroid格安端末を製造するようになり端末のコモディティ化が起こってしまう。</li>
<li>日本国内メーカーもAndroid端末を調達するようになってしまうだろう。（使いやすいのかどうかは別として）</li></ul>
<p>孫さんが言うように、</p>
<ul class="list1 list-indent1"><li>DoCoMoとSoftbankは端末融通が可能なので、インセンティブを利用した端末安売りが出来なくなり、競争原理がSoftbank不利に働いてしまう。</li></ul>
<p>あとの問題は、</p>
<ul class="list1 list-indent1"><li>音声通話が廃れてしまうかも。（もう廃れているのかな）</li>
<li>Twitter,メッセンジャー、その他文字ベースのコミュニケーションとか(iPadなどでの/Web)アプリなどが携帯端末の主要用途になってしまう。</li>
<li>音楽や書籍などのダウンロードマーケットは携帯キャリアではなくAppleとAmazonらによる寡占がひどくなってしまうかもしれない。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_8">Appleの驕り<a class="anchor_super" id="iec24356" href="#iec24356" title="iec24356" style="user-select:none;">&dagger;</a></h2>
<p>Apple、「iPhone OS 4 SDK」規約変更 - Flash CS5/MonoTouch排除へ</p>
<ul class="list1 list-indent1"><li><a href="http://journal.mycom.co.jp/articles/2010/04/09/ip4sdk/index.html" rel="nofollow">http://journal.mycom.co.jp/articles/2010/04/09/ip4sdk/index.html</a></li></ul>
<pre>新規約によれば、iPhoneアプリはiPhone OSやWebKitで実行可能なObjective-C/C/C++あるいは
JavaScriptで必ず記述されなければならないという。また、これら言語で記述されたコードのみ
がコンパイルによって規定のAPI群へのアクセスを許可されるという。
中間言語の使用や中間レイヤーを用いるツールの利用も禁止されるということだ。</pre>
<ul class="list1 list-indent1"><li>自分で自分の首を絞めやがれ。
<pre>Objective-C/C/C++あるいは JavaScript</pre></li>
<li>C以外は全部ダメ言語じゃないか。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_9">ARMの難易度はPIC以上？<a class="anchor_super" id="n5674741" href="#n5674741" title="n5674741" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>やっとビルドが通るようになった。</li>
<li>焼いてみると、案の定デバイス認識出来ない。</li>
<li>やっとスタートラインか。</li></ul>
<p><br />
read 　more 　:　<a href="ARMCortexM3.html" class="link_page_passage">ARMCortexM3</a></p>
<p><br /></p>
<ul class="list1 list-indent1"><li>おそらくＬチカから始めるしかないのだろう。</li>
<li>デバッグするのにOpenOCDがあったほうが良いのだろうけどドングル持ってない。</li>
<li>そもそもARMを始めようとしたきっかけはARMを使ったOpenOCDドングルが欲しかった（作りたかった）からだ。</li></ul>
<p>あれ？ここも<strong>鶏卵問題</strong>の発祥地？</p>
<p><br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_10">そうやって、再帰問題ばかり作ってる。<a class="anchor_super" id="ebc91fd3" href="#ebc91fd3" title="ebc91fd3" style="user-select:none;">&dagger;</a></h2>
<p><br />
つまり、</p>
<ul class="list1 list-indent1"><li>ICEやICEに近いデバッグ環境とか、純正コンパイラ＋すぐ動くUSBサンプルソースとかをすでに持っているのであれば、</li>
<li>わざわざ大昔のマイコンモニターもどきを作ったり、JTAGKeyもどきを作ったり、GDBスタブを移植したりする必要は全くないわけ。</li>
<li>そのような恵まれた環境でＬチカをやったとしても何の達成感も得られない。</li></ul>
<p><br />
禅問答</p>
<ul class="list1 list-indent1"><li>無いから作る（作ろうとしている）</li>
<li>すでにあるなら、何もしない。（何もする必要がない）</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_11">ＣＱ：STARM基板<a class="anchor_super" id="g079bc5d" href="#g079bc5d" title="g079bc5d" style="user-select:none;">&dagger;</a></h2>
<p>久々にクソなシステムを見てしまった。（ＤＦＵのこと）</p>
<ul class="list1 list-indent1"><li>ビルドはMake一発で出来るようになった。</li>
<li>main()関数をＬチカのものに差し替え(#ifdefで)ビルド。</li>
<li>実行？しようとしたら、<strong>何これ珍システム</strong>（ＤＦＵのこと）</li></ul>
<ul class="list1 list-indent1"><li>HEXをDFUに変換するためにわざわざＧＵＩを起動。</li>
<li>HEXファイル選択ウィンドウうざい。</li>
<li>dfuファイル選択ウィンドウうざい。</li>
<li>上書き出来ない。一回dfuを消さないと生成出来ないクソシステム。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>そして、DFuSeという変なダウンロードＧＵＩを起動。</li>
<li>dfuファイルを選ぶ。</li>
<li>書き込む。</li>
<li>J6ジャンパーをOPENにする。</li>
<li>USBを一回抜いて挿す。</li></ul>
<ul class="list1 list-indent1"><li>Ｌチカ成功。</li></ul>
<p>ＧＵＩが生産性を上げるなんて誰が言ったんだっけ？</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_12">STARM基板について、今のところ分かっていること。<a class="anchor_super" id="teb42e46" href="#teb42e46" title="teb42e46" style="user-select:none;">&dagger;</a></h4>
<ul class="list1 list-indent1"><li>キホンノキホン、Ｌチカソフトでさえ、有償コンパイラとgccで全くビルドが通らないくらい書き方が違うこと。</li>
<li>もちろん、ヘッダーファイルもファイル名が違う。</li>
<li>Ｌチカは動くが、USBデバイスをビルドしても不明なデバイスになる。（USBとして全く機能していない）</li></ul>
<ul class="list1 list-indent1"><li>ビルドのターンアラウンドに要する手間がかかりすぎて<strong>駄目。</strong></li></ul>
<p>hexがそのまま書き込めるなら、DFuSeのようなものを起動したままで書き込みボタンを押すだけなのに・・・</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h4 id="content_1_13">この開発環境はDFUが全てを台無しにしている。<a class="anchor_super" id="d9a1387f" href="#d9a1387f" title="d9a1387f" style="user-select:none;">&dagger;</a></h4>
<ul class="list1 list-indent1"><li>Ｌチカをprintf代わりに使って試したところ、<del>Set_System()</del>USB_Init()呼出し前までは生きていて、呼出し後に全滅していることが判明した。<del>たとえばEVAボードとCQ基板でXtalの周波数が違いすぎていてＧＨｚオーダーで動いてしまうとかそんなオチ。</del> PLL関係は8MHz水晶の９逓倍で同じ設定だった。</li></ul>
<ul class="list1 list-indent1"><li><del>今のところ何が悪いのか分からない。</del></li></ul>
<ul class="list1 list-indent1"><li>USB_Interrupts_Config()にて、
<pre>NVIC_SetVectorTable(NVIC_VectTab_FLASH, 0x3000);</pre></li>
<li>が必要らしい。</li></ul>
<ul class="list1 list-indent1"><li>主な問題はそれだけだった。</li>
<li>vcomとhidは一応ＰＣからデバイス認識するようになった。</li></ul>
<ul class="list1 list-indent1"><li>機種判別的には、
<pre>#ifdef USE_STM3210C_EVAL</pre></li>
<li>になっているところは使わないのが正解のようだった。</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_14">hidが動かない件<a class="anchor_super" id="k7f8c6e7" href="#k7f8c6e7" title="k7f8c6e7" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>HIDデバイス認識まではこぎつけたが、PICmonから触ろうとすると、ProductID取得で失敗するようだ。</li></ul>
<ul class="list1 list-indent1"><li>VendorID,ProductID,Serialをオリジナル版に戻すと取得できる<span style="font-size:32px">何故</span></li></ul>
<ul class="list1 list-indent1"><li>実はSerialバッファが書き換え（上書き）バッファになっていて、サイズを大きめに確保しないとハングする仕組みが導入されていた。</li></ul>
<ul class="list1 list-indent1"><li>定数バッファを上書きするなよと言いたい。酷いつくりだ。
<ul class="list2 list-indent1"><li>せめてコメント書いとけよ。＞玩具屋</li></ul></li></ul>
<p><br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_15">相変わらずhidが動かない件<a class="anchor_super" id="bd5e5e0d" href="#bd5e5e0d" title="bd5e5e0d" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>Custom_HIDのサンプルはEP1バッファのサイズが異常に小さい(2byte)</li>
<li>こいつを64byteにして、echobackを返すようなコードを書いている（つもり）なのだが・・・</li>
<li>エコーバックは返ってこない。</li>
<li>というか、EP1エンドポイントへの書き込みコールバックさえ呼ばれていないような感じ。</li>
<li><strong>なんで？</strong></li></ul>
<p>理由はusb_prop.cにあった。</p>
<ul class="list1 list-indent1"><li>ENDPOINTの初期化はusb_prop.cで行っていた。</li>
<li>ここで、EP1BUFのアドレスやサイズの設定が行われていた。</li>
<li>何故か、EP1BUFのアドレスだけはusb_conf.hに定義していて、サイズに関してはcソース内で決め打ちだったのだ。</li>
<li>てっきりディスクリプタに書いた値を採用するのかと思っていた。(あるいはEPのサイズはヘッダーで定義して、双方がそれを参照するとか。)</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_16">一応、ここまで出来た。<a class="anchor_super" id="y154a921" href="#y154a921" title="y154a921" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>Custom HIDクラスに64byteのEP_INとEP_OUTを用意。</li>
<li>ECHOBACKとPEEK,POKE(両方ダミー)が動作。</li></ul>
<p><br />
read 　more 　:　<a href="ARMCortexM3.html" class="link_page_passage">ARMCortexM3</a></p>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_17">PICKit3が安い<a class="anchor_super" id="hd3fd3ba" href="#hd3fd3ba" title="hd3fd3ba" style="user-select:none;">&dagger;</a></h2>
<p><strong>４５００円</strong></p>
<ul class="list1 list-indent1"><li><a href="http://akizukidenshi.com/catalog/g/gM-03608/" rel="nofollow">http://akizukidenshi.com/catalog/g/gM-03608/</a></li>
<li>今まではDebugExpress込みで７０００円でしか買えなかった。</li>
<li>PICKit2なら３５００円</li>
<li><a href="http://akizukidenshi.com/catalog/g/gM-02508/" rel="nofollow">http://akizukidenshi.com/catalog/g/gM-02508/</a></li></ul>
<p>もうライターを自作する時代は終わったな。</p>
<p><br />
その前に、PICKit2互換ライターは（価格的に）終了。</p>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_18">エイヤフィヤトラヨークトル氷河の火山<a class="anchor_super" id="b3c1b684" href="#b3c1b684" title="b3c1b684" style="user-select:none;">&dagger;</a></h2>
<p>アイスランド火山灰：飛行機への影響と「飢饉」の可能性</p>
<ul class="list1 list-indent1"><li><a href="http://wiredvision.jp/news/201004/2010041923.html" rel="nofollow">http://wiredvision.jp/news/201004/2010041923.html</a></li></ul>
<p>アイスランド南部　エイヤフィヤトラヨークトル（Eyjafjallajokull）氷河</p>
<ul class="list1 list-indent1"><li>この氷河の名前、覚えられないんだよな。</li>
<li>どこで区切るのかな？</li>
<li>飛行機が飛べないなんて、これから起こるであろう気象への影響に比べれば小さい小さい。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_19">ARMの難易度はPIC以上！<a class="anchor_super" id="l56f74ec" href="#l56f74ec" title="l56f74ec" style="user-select:none;">&dagger;</a></h3>
<p>例えば、USBフレームワークを入手したいとすると、</p>
<ul class="list1 list-indent1"><li><a href="http://ics.nxp.com/support/documents/microcontrollers/?search=USB&amp;Search.x=9&amp;Search.y=11" rel="nofollow">http://ics.nxp.com/support/documents/microcontrollers/?search=USB&amp;Search.x=9&amp;Search.y=11</a></li>
<li>どれを落とせばいいのか分からない。</li>
<li>品種依存ソースしか存在しない。
<ul class="list2 list-indent1"><li>品種依存ソースを落としてみると、中身(Copyright)はKeilだったりする。</li>
<li>つまり、NXPはフレームワークを提供するつもりがないようだ。</li>
<li>USBスタックが何種類か存在するが、どれも製品のようだった。</li></ul></li>
<li>MicroChipですら、共通のUSBフレームワークをちゃんと無償提供している。</li></ul>
<p><br />
ある意味、ＡＲＭはＰＩＣ以下。</p>
<ul class="list1 list-indent1"><li>ＮＸＰの製品ラインナップですら、まともなフレームワークが提供されていなくて、</li>
<li>サードパーティのＵＳＢスタックを買えという有様だ。</li></ul>
<ul class="list1 list-indent1"><li>フリーソフトでLPCUSBというものがあるんだけど、LPC23xxビルドが見当たらない。</li>
<li>メモリーマップ(*.ld)だけLPC23xx対応してみたんだけど、全然動かない。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_20">ARMクロスコンパイラ構築<a class="anchor_super" id="b817f226" href="#b817f226" title="b817f226" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>Windowsでやるとビルドがえらい遅いので、Linuxに乗り換え。
<ul class="list2 list-indent1"><li>実はローカルHDD上でやればそんなに遅さは気にならない。</li>
<li>sambaマウントしたドライブでやると死ぬほど遅い。</li></ul></li></ul>
<p><strong>ビルドのコツ</strong></p>
<ul class="list1 list-indent1"><li>最初にＣだけ作って、あとでＣ＋＋を作るよろし。</li></ul>
<p>まず、アーカイブを適当なところに展開</p>
<pre>$ mkdir build
$ cd build/
$ tar xvfz binutils-2.19.tar.bz2
$ tar xvfz newlib-1.17.0.tar.gz
$ tar xvfz gcc-4.3.0.tar.bz2</pre>
<p>ビルド用ディレクトリを作成</p>
<pre>$ mkdir _binutils
$ mkdir _gccbuild
$ mkdir _newlib</pre>
<p>まず、binutilsから。</p>
<pre>$ cd _binutils
$ ../binutils-2.19/configure --target=arm-eabi --prefix=/usr/local/arm
$ make 
$ sudo make install
$ cd ..</pre>
<p>次、gccのＣ言語のみ。config内容はWindowsのWinARMコマンドラインのhelpから取得</p>
<pre>$ cd _gccbuild
$ ../gcc-4.3.0/configure --prefix=/usr/local/arm \
--target=arm-eabi  --disable-nls --disable-shared --disable-threads \
--with-gcc --with-gnu-ld --with-gnu-as --enable-languages=c,c++ \
--enable-interwork --enable-multilib --disable-libssp --disable-libstdcxx-pch \
--with-dwarf2 --program-prefix=arm-eabi- --with-newlib \
--disable-newlib-supplied-syscalls --disable-libunwind-exceptions \
--disable-newlib-atexit-dynamic-alloc

$ make LANGUAGES=c all-gcc 
$ sudo make LANGUAGES=c install-gcc 
$ cd ..</pre>
<p>次はNewlib</p>
<pre>$ cd _newlib
$ ../newlib-1.17.0/configure \
--prefix=/usr/local/arm --target=arm-eabi
$ make
$ sudo make install
$ cd ..</pre>
<p>最後に、残りのＣ＋＋も含める。</p>
<pre>$ cd _gccbuild
$ make
$ sudo make install
$ cd ..</pre>
<p>だいたいこんな感じ。</p>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_21">LPC2388:USBが動かない理由<a class="anchor_super" id="l2ad707d" href="#l2ad707d" title="l2ad707d" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>どうやら、割り込み関係でLPC214xと互換性がないようだ。</li>
<li>どちらもarm7tdmiなので同じだと思っていたが・・・。</li>
<li>IRQハンドラーの処理が、LPC214xだと、</li></ul>
<p>example/crt.s</p>
<pre>ldr     PC, [PC,#-0xFF0]	/* see page 71 of &quot;Insiders Guide to the Philips ARM7-Based Microcontrollers&quot; by Trevor Martin  */
ldr     PC, FIQ_Addr</pre>
<ul class="list1 list-indent1"><li>になっているが、</li>
<li>LPC23xxだと、
<pre>	LDR	PC, [PC, #20]	@ IRQ entry, jump to IRQ handler
	LDR     PC, [PC, #20]	@ FIQ entry, trap
	.word	Reset_Handler	@ Reset handler
	.word	Trap		@ Undefined Instruction handler
	.word	SWI_Handler	@ Software Interrupt handler
	.word	Trap		@ Prefetch Abort handler
	.word	Trap		@ Data Abort handler
	.word	IRQ_Handler	@ IRQ handler
	.word	Trap		@ FIQ handler</pre></li></ul>
<ul class="list1 list-indent1"><li>になっていて、</li></ul>
<pre>IRQ_Handler:
	SUB	LR, LR, #4		@ Adjust LR_irq and push it
	STMFD	SP!, {LR}</pre>
<pre>	MRS	LR, SPSR		@ Save SPSR need to be saved for nested interrupt
	STMFD	SP!, {R0-R3,IP,LR}	@ Push scratch/used registers and SPSR
	LDR	R0, =LPC_BASE_VIC	@ Get the ISR address pointed by VIC_VectAddr
	LDR	R0, [R0, #VIC_VectAddr]
	MSR	CPSR_c, #M_SVC		@ Enter SVC mode and enable Irq and Fiq</pre>
<pre>	STMFD	SP!, {LR}		@ Call the ISR
	MOV	LR, PC
	BX	R0
	LDMIA	SP!, {LR}</pre>
<pre>	MSR	CPSR_c, #M_IRQ | B_Irq	@ Enter IRQ mode and disable Irq
	LDMIA	SP!, {R0-R3,IP,LR}	@ Restore scratch/used registers and SPSR
	MSR	SPSR_cxsf, LR		@ Restore SPSR_irq</pre>
<pre>	LDR	LR, =LPC_BASE_VIC	@ Issue EOI command to the VIC
	STR	LR, [LR, #VIC_VectAddr]</pre>
<pre>	LDMIA	SP!, {PC}^		@ Reruen from the IRQ handler</pre>
<ul class="list1 list-indent1"><li>と、なっている。</li>
<li>つまり、lpc214xのあっさりジャンプと上記コードは違いすぎる。
<pre>ldr     PC, [PC,#-0xFF0]	/* see page 71 of &quot;Insiders Guide to the Philips ARM7-Based Microcontrollers&quot; by </pre></li>
<li>さらに、</li></ul>
<pre>.equ LPC_BASE_VIC,	0xFFFFF000
.equ VIC_VectAddr,	0xF00</pre>
<ul class="list1 list-indent1"><li>なのも意味不明。</li></ul>
<p>そもそも</p>
<pre>ldr     PC, [PC,#-0xFF0]	/* see page 71 of &quot;Insiders Guide to the Philips ARM7-Based Microcontrollers&quot; by </pre>
<ul class="list1 list-indent1"><li>って、どこに飛ぶつもり？
<pre>-0000_0ff0だから、ffff_f010か？ </pre></li>
<li>この命令が置かれている場所は0000_0018だから、ffff_f010を足すと ffff_f028(f024??)になる（？？？）</li>
<li>おそらくそこに原因ベクター（飛び先）が現れるようなハードになっているのだろうが、</li>
<li>その番地もLPC23xxだとFFFF_F000+0000_0F00=FFFF_FF00だから、どのみち<strong>辻褄は合っていない。</strong></li></ul>
<ul class="list1 list-indent1"><li>しかし、マニュアルを見ると、どちらの石もVICがFFFF_Fxxxあたりに出ていて、それほど違いがないようにも取れる。</li>
<li>なんかこういう根っこの部分はメーカー側がしっかりしたフレームワークを提供しないと困るなぁ。</li></ul>
<p><br />
<br />
<br />
で、結局・・・</p>
<ul class="list1 list-indent1"><li>LPC214xとLPC23xxで、VICのつくりは似ているように見えるが、アドレスが違うので、ソースを流用できない。</li>
<li>LPCUSBは、残念ながらＣソース内にVICなどのアドレスをじか書きしているのでポータビリティがない。</li>
<li>そもそもARMの多品種を製造しているNXPは周辺定義ヘッダーなどを正しく管理して提供すべきなのに（意図してかどうか不明だが）そうしていない。モスバーガー屋だけじゃなくって<strong>Renesasだって、ちゃんと、やってるんだぞう！</strong></li></ul>
<p><br />
続・・・</p>
<ul class="list1 list-indent1"><li>VIC周りは直したつもり。</li>
<li>TIMER割り込みはちゃんと来ている。</li>
<li>USB割り込み許可したあたりでのハングも直したつもり</li></ul>
<p>だけどUSBデバイスとしてちっとも認識しやしない。</p>
<ul class="list1 list-indent1"><li>なんかI/OピンをUSBコントロールに使っていて、またチップ間の非互換があるっぽいな。</li></ul>
<p><br />
いやいや、そんな生易しいもんじゃなかった。</p>
<ul class="list1 list-indent1"><li>LPCUSBのusbhw_lpc.c に書かれてるUSB関係のポートアドレスはLPC23xxと全く互換性がないし、全部絶対アドレスで書いてあるじゃん。</li>
<li>さらに、LPC23xx.hにそれ相当のポートアドレスが載っているなら許すけれど、そっちはそっちでUSBOTGポートと混ざっていて分かりにくい。</li></ul>
<p>これ全部ＮＸＰが悪い。<strong>でたらめにも程がある</strong></p>
<p><br />
続き。</p>
<ul class="list1 list-indent1"><li>とりあえずUSB周りのポートアドレスをFIXしてみた。</li>
<li>やっと、<strong>「不明なデバイス」</strong>というメッセージが出るようになった。（今まではそれさえ出なかった）</li>
<li>メインループのハングはしていない。</li>
<li>「不明なデバイス」になる原因は不明。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_22">LPCXpresso微妙に値下がり<a class="anchor_super" id="bac64431" href="#bac64431" title="bac64431" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li><a href="http://akizukidenshi.com/catalog/c/clpc/" rel="nofollow">http://akizukidenshi.com/catalog/c/clpc/</a></li>
<li>２８００円。</li>
<li>ここであえてCortex-M0を選択する理由ってあるのだろうか・・・。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_23">Apple死ねばいいのに。<a class="anchor_super" id="s3cfe17e" href="#s3cfe17e" title="s3cfe17e" style="user-select:none;">&dagger;</a></h2>
<p>きまぐれ日記より</p>
<ul class="list1 list-indent1"><li><a href="http://chasen.org/~taku/blog/archives/2010/04/mecabiphoneosx.html" rel="nofollow">http://chasen.org/~taku/blog/archives/2010/04/mecabiphoneosx.html</a></li>
<li>そもそもMacOS-Xって、<strong>最初からFreeBSD</strong>じゃないのか？</li>
<li>iPhoneやiPadだって、カーネルはFreeBSDベースなんだろ？</li>
<li>だったらソース公開しろよって感じ。</li>
<li>いっそFreeBSDカーネルをＧＰＬにしちゃったら？</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_24">思いつきで<a class="anchor_super" id="xa1cfdba" href="#xa1cfdba" title="xa1cfdba" style="user-select:none;">&dagger;</a></h2>
<p>Mega644のピン配置
<a href="/ATMEL_AVR/jpg/mega644pin.png" rel="nofollow"><img src="/ATMEL_AVR/jpg/mega644pin.png" alt="/ATMEL_AVR/jpg/mega644pin.png" /></a></p>
<ul class="list1 list-indent1"><li>8bit Port x 4というほぼ理想的なPIN Out.</li></ul>
<ul class="list1 list-indent1"><li>アドレスバス16bit , データバス(双方向)8bit , /RD , /WR , /CE （64k全部埋めるならCE要らない？）あと5bit余り。 外部ラッチ無しだとちょっと厳しいかな。</li></ul>
<ul class="list1 list-indent1"><li>SRAMはHM-628128LPとかなら腐るほど（といっても４０個くらいしかないけど）余っている（もちろん5V DIP品。要る人いるなら差し上げますけど）</li></ul>
<ul class="list1 list-indent1"><li>コードエリア64Kあるので、マルチアーキテクチャエミュレータ(8080/6800/6809/SCMP/...)になれる。たぶん。</li>
<li>うまく作れば、内蔵SRAM 4Kのうち1KくらいをSRAMからキャッシュするように出来るかも。</li>
<li>起動時に内蔵FlashからSRAMにブートコードを書きこむようにすれば自力ブート出来る。</li></ul>
<ul class="list1 list-indent1"><li>ＣＰ/Ｍエミュレータというよりむしろ、ＭＺ−８０Ｋエミュレータが欲しい。</li></ul>
<ul class="list1 list-indent1"><li>ビデオ回路は外付けのPIC24Fか別のAVRかな。５ビットではつらいけれど。</li></ul>
<ul class="list1 list-indent1"><li>あ、そうか、/CE のかわりに /IOREQのようなピンを１つだけ設ければ、外部バス信号を他のモジュールとの通信に24bit全開で使用できるんだっけ。</li></ul>
<ul class="list1 list-indent1"><li>当然20MHz動作。場合によってはOverClockingもありで。</li></ul>
<ul class="list1 list-indent1"><li>問題は・・・ＢＩＯＳ　ＲＯＭ（ＳＰ−１００２）と、ＳＰ−５０３０とかをもう紛失済みであることだ。（カセットテープなら残っているかもしれないのでサウンドブラスターで吸い出すことも考えられるが・・・）</li></ul>
<p><br />
単なる思い付きだけんね。実行するとは限らないし。誰かかわりにやって欲しいくらいだ。</p>
<ul class="list1 list-indent1"><li>はたしてAVRの20MHzに、レトロＣＰＵを何ＭＨｚ換算でエミュレート出来るのか？</li>
<li>ただそれだけが関心があるのであって・・・。</li>
<li>FPGAだと出来て当たり前なんで全くやる気がしない。AVRでやるところに意味があると思う。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_25">今日の、Apple死ねばいいのに。<a class="anchor_super" id="r2b78190" href="#r2b78190" title="r2b78190" style="user-select:none;">&dagger;</a></h3>
<p>アップル、ARM買収を検討か--英報道</p>
<ul class="list1 list-indent1"><li><a href="http://japan.cnet.com/clip/global/story/0,3800097347,20412583,00.htm" rel="nofollow">http://japan.cnet.com/clip/global/story/0,3800097347,20412583,00.htm</a></li>
<li>あくまでも金融街の噂だが、</li></ul>
<ul class="list1 list-indent1"><li>アップル、ARMを一人占め。</li>
<li>ARmチップのライセンス料金吊り上げ開始。</li>
<li>性能上限を設けて、他社には高性能チップを生産させない。(Adobeへの仕打ちと同様に)</li></ul>
<ul class="list1 list-indent1"><li>これで、<strong>他社（Android,Microsoft製うんちゃら携帯)を全部殲滅だ！</strong></li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>そうなると、Renesasチャンスだ！
<ul class="list2 list-indent1"><li>RXマイコンのＩＰライセンス商売開始だ。</li></ul></li></ul>
<p>・・・って、ならないよな。</p>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_26">石油は採掘する時代から生産する時代へと変る。<a class="anchor_super" id="t2fe0d83" href="#t2fe0d83" title="t2fe0d83" style="user-select:none;">&dagger;</a></h3>
<p>藻類から作られる石油はジェット燃料となり、日本から石油が世界に輸出されるようになる。</p>
<ul class="list1 list-indent1"><li><a href="http://blog.goo.ne.jp/2005tora/e/f9d52904c89abac55615365d1275f82b" rel="nofollow">http://blog.goo.ne.jp/2005tora/e/f9d52904c89abac55615365d1275f82b</a></li>
<li>凄い。</li>
<li>日本も捨てたもんじゃないね。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_27">苺：STM32F103VET6基板が３１５０円<a class="anchor_super" id="v43a0697" href="#v43a0697" title="v43a0697" style="user-select:none;">&dagger;</a></h3>
<p>ＤＷＭ誌付録のSTM32F103のFlash増量（４倍）版。RAMも64kB</p>
<ul class="list1 list-indent1"><li><a href="http://strawberry-linux.com/catalog/items?code=32103" rel="nofollow">http://strawberry-linux.com/catalog/items?code=32103</a></li>
<li>ピンヘッダーとかUSB Bコネとかのパーツも付いているのでＤＷＭ誌を買うより断然お買い得感がある。</li>
<li>なんといってもＳＲＡＭが多い（64K）</li>
<li>しかもＤＦＵが焼かれているので、JTAGケーブルを持っていなくても即使用できる気軽さ。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_28">天安門事件を役立てる方法<a class="anchor_super" id="d74647eb" href="#d74647eb" title="d74647eb" style="user-select:none;">&dagger;</a></h3>
<p>● 簡単で完璧な阻止率100%のスパム対策の実装について</p>
<ul class="list1 list-indent1"><li><a href="http://wota.jp/ac/?date=20100401" rel="nofollow">http://wota.jp/ac/?date=20100401</a></li></ul>
<ul class="list1 list-indent1"><li>最近 .cnサイトからのアクセスが多いので(w</li>
<li>やってみた。</li>
<li>ここはdump2html.inc.phpで生成しているので、./skin/pukiwiki.skin.phpとかそれの代替のphpソース
１個に埋めて、あとは再生成するだけだ。</li></ul>
<ul class="list1 list-indent1"><li>はたして効果あるのかな？</li>
<li>理論上、.cn以外の全サイトにこれを埋めることで、.cnの中からは世界が消滅したように見えるはずだ。</li></ul>
<ul class="list1 list-indent1"><li>Webサイトアクセスは遮断できるようだが、.cnからのこうげきをふせぐのはむりそうだ。</li></ul>
<p>Google、パスワード管理システムのコードを盗まれていた - スラッシュドット・ジャパン</p>
<ul class="list1 list-indent1"><li><a href="http://slashdot.jp/security/10/04/22/0228212.shtml" rel="nofollow">http://slashdot.jp/security/10/04/22/0228212.shtml</a></li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_29">今日も、Apple死ねばいいのに。<a class="anchor_super" id="oaac40ad" href="#oaac40ad" title="oaac40ad" style="user-select:none;">&dagger;</a></h3>
<pre>オンラインでApple純正製品が購入できるのはApple StoreとAmazonのみになる模様。
AmazonはアメリカのApple Catalog ＆ Internet Resellersで登録されているが、
日本ではこの登録プログラムが無い為、日本の小売り店にはオンライン販売が許可されないとのこと。</pre>
<ul class="list1 list-indent1"><li><a href="http://temple-knights.com/archives/2010/04/apple-yodobashi-stop.html" rel="nofollow">http://temple-knights.com/archives/2010/04/apple-yodobashi-stop.html</a></li>
<li>いっそ、日本での<strong>Apple製品の販売を全部禁止しろ！</strong> ---いや、禁止しない代わりに独禁法違反で<strong>制裁金</strong>だな。トヨタの仕返しだ！</li>
<li>ついでに所持も。（児ポルノかよ？）</li></ul>
<p>ってゆーかあの会社の方針、なんとかならんのか？</p>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_30">WinARM(arm-eabi-gcc)でfloatが使えない件<a class="anchor_super" id="s525a971" href="#s525a971" title="s525a971" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>Linuxでビルドしなおしたarmgccでは、ちゃんと使えている。</li>
<li><a href="WinARM.html" class="link_page_passage">WinARM</a>のほうは浮動小数点を使った瞬間にリンクエラーでこける。</li>
<li>なんかlibgcc.aに
<pre>__aeabi_dmul</pre>
とかもろもろのsoftfloat関数が無い。</li></ul>
<ul class="list1 list-indent1"><li>なんでだろ？</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>よく分からないけれど、<a href="#b817f226" title="2010-04" class="link_page_passage">ARMクロスコンパイラ構築Linux</a>で作ったlibgcc.aをコピーすればリンクは大丈夫のようだ。</li>
<li>まだ動作テストまでやってないけれど、ちゃんと動くことがわかったらlibgcc.aをuploadしておこう。</li>
<li>普通にLinuxを使っている人なら簡単に(10分くらいで)arm-gccをビルドできるので、出来たlibgcc.aをWinARMの該当ディレクトリにコピーすれば浮動小数点も使えるようになる（はず）</li></ul>
<p>参考文献。</p>
<ul class="list1 list-indent1"><li><a href="http://mpu.seesaa.net/article/1166157.html" rel="nofollow">http://mpu.seesaa.net/article/1166157.html</a></li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_31">LPC2388:USBが動かない理由<a class="anchor_super" id="w907e4b2" href="#w907e4b2" title="w907e4b2" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>いろいろいじくり回しすぎたので、何が原因だったのかさっぱり覚えていない。</li>
<li>print文を埋めてデバッグする要領で、Ｌチカを埋めて試行錯誤を繰り返すしかなかった。</li>
<li>JTAGがあれば簡単に原因が分かるかと言われるとそれも違うような気がする。無限ループになる箇所くらいなら分かるのだろうけれど、無限ループにはならずにUSB認識しないというだけなので、デバッガで追えない。</li>
<li>そりゃ、どっかでASSERTするのであれば、シリアルコンソールを見れば何が起きたかは分かるけれど。普通にスルーしてメインループは回っているので、デバッガを使っても何が悪いのかなんて分からない。</li>
<li>PICのときはUSBプロトコルアナライザが大いに役に立った。それはディスクリプタストリングを返すルーチンが元から腐っていた（ページアドレス決め打ちで書かれていた）のを見つけられたからだ。</li>
<li>今回のARMではUSBDevice側が全く微動だにしていなかったのでアナライザも役に立たない。</li>
<li>結局ソース書き換えてから試すまでのサイクルをどれだけ短縮できるかか勝負だった。</li></ul>
<p>で、何が悪かったんだろう。いろいろあった。</p>
<ul class="list1 list-indent1"><li>crt.S（？）swi（？）その辺は弄り回しすぎて一回りした。</li>
<li>LPC23xx.hとかUSB周りのポートアドレスが腐っていたのが一番やられた。</li>
<li>USBCLKCFG ポートの設定が抜け落ちていた。</li>
<li>HW初期化周りにもいろいろ不文律があるようだ。自分にはさっぱり分からない。</li>
<li>で、とにかくLPC214xとLPC2388ではアドレスも初期化手順も違いが多くて、まともではないような気がした。</li>
<li>この様子だと、LPCXpresso(Cortex-M3)はもっとひどいかも。</li></ul>
<p>あとでまとめよう。ARMはもう飽きた。</p>
<p><br /></p>
<p>read more : <a href="ARM7mon.html" title="ARM7mon" class="link_page_passage">interface 2009-05付録基板で遊ぶPartII</a></p>
<p><br /></p>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_32">Ｃ級出版：ＳＨ−２Ａさっそく落とし穴が<a class="anchor_super" id="eb30bb56" href="#eb30bb56" title="eb30bb56" style="user-select:none;">&dagger;</a></h2>
<p>水晶は何ＭＨｚ？</p>
<ul class="list1 list-indent1"><li><a href="http://d.hatena.ne.jp/pcm1723/20100426/1272275049" rel="nofollow">http://d.hatena.ne.jp/pcm1723/20100426/1272275049</a></li></ul>
<p>デフォルトはキャッシュOFF？</p>
<ul class="list1 list-indent1"><li><a href="http://d.hatena.ne.jp/pcm1723/20100430/1272616341" rel="nofollow">http://d.hatena.ne.jp/pcm1723/20100430/1272616341</a></li></ul>
<ul class="list1 list-indent1"><li>ほかにもありそうだ。</li>
<li>開発環境がＨＥＷなので、いろいろとね・・・色々。</li>
<li>内蔵ＳＲＡＭが１Ｍバイトとか言ってるけれど、<del>殆どはフレームバッファ（データ用）としてしか使えないとか・・・</del>（？コード用は６４Ｋとか書いてあったので心配だ）</li></ul>
<ul class="list2 list-indent2"><li><a href="http://japan.renesas.com/media/products/mpumcu/superh/sh7260/sh7262/sh7262_block_diagram.pdf" rel="nofollow">んなこたあなさそうだ</a></li>
<li>高速SRAMは64kしかない。</li>
<li>i-cache,d-cacheは各8kB,高速SRAMはcacheしない。</li></ul>
<p>付録基板は所詮ジャンク基板なのか？</p>

<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_33">Ｃ級出版：ＳＨ−２Ａって、国産ロケットみたいだな。<a class="anchor_super" id="g8c714d2" href="#g8c714d2" title="g8c714d2" style="user-select:none;">&dagger;</a></h2>
<p>２<del>枚</del>冊も買った。</p>
<ul class="list1 list-indent1"><li>SPDIFいじりにも使えそうだし。</li>
<li>ほんとにSRAMが1MBも載っているんだな。</li></ul>
<p>だれもが思いつくネタその１</p>
<ul class="list1 list-indent1"><li>uCLinux動かんかいな。
<ul class="list2 list-indent1"><li>内蔵1MBではさすがに厳しいといわざるをえない、たぶん。カーネルは600kBくらいらしいけどあぷりは動かないか。外部RAMを増設できるなら良いと思う。</li></ul></li>
<li>CP/Msh-2a
<ul class="list2 list-indent1"><li>きっと速かろう。</li>
<li>ビデオ出力でコンソールが出せるといいのに。</li>
<li>なんかこうフレームバッファがキャプチャを兼ねてるところといい、ＱＶＧＡなところといい、ＲＧＢ５６５なところといい、オーバレイするところといい、<strong>まるでデジカメのパーツみたい。</strong></li></ul></li></ul>
<p><br /></p>
<p>だれもが思いつくネタその２</p>
<ul class="list1 list-indent1"><li>CP/Mは古すぎて誰もソフト持ってないと思うので、（それにディスク入れ替えのたび＾Ｃは２１世紀には理解されないと思う）MS-DOSくらいはエミュれないかハニー！というわけでDOSエミュ。</li></ul>
<ul class="list1 list-indent1"><li>もうひとつ、往年の名機ＰＣ９８０１エミュ。だって主記憶１Ｍバイトもあるじゃん。るねさすもＮＥＣに買収されたことだし頃合も良かろう。
<ul class="list2 list-indent1"><li>ＰＣ９８０１って６４０ｋＢしかＲＡＭがなかったんだよしかもＤ-ＲＡＭ。こっちはＳＲＡＭで１Ｍバイト。<strong>夢みたいだ。</strong></li>
<li>クロック比：元祖ＰＣ９８０１は８０８６−<del>８ＭＨｚ（だっけ？？）</del>いや５ＭＨｚなんだな。だから<strong>１４４対５</strong>。</li>
<li>CISCとRISCの違いがあるしＳＨ−２Ａは２命令同時issueなのでたぶんこの１０倍、１４４０対５くらいの開きがあるので、
ＪＩＴコンパイラなんて載せなくてチンタラエミュレーションしても１０倍速くらいになるかもしれない。</li></ul></li></ul>
<p><br /></p>
<ul class="list2 list-indent2"><li>これもビデオアウトをどうするかが鍵なんだがな。難しそうだな。ＴＥＸＴ-ＶＲＡＭがないから全部グラフィックバッファに持ってかれるとメモリー無くなるもんな。どうやるかだな。</li>
<li>ウルトラＣとしては２冊同時購入して<strong>片方がＴＥＸＴＶＲＡＭ担当</strong>ってやつ。接続はUSB host--deviceかな？</li></ul>
<p>ギャグにしかなってないや。</p>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_34">Ｃ級出版：ＳＨ−２Ａ：<a class="anchor_super" id="c6eb34f7" href="#c6eb34f7" title="c6eb34f7" style="user-select:none;">&dagger;</a></h2>
<p><strong>Ｌチカ完了！</strong>＜＝今ここ</p>
<ul class="list1 list-indent1"><li>このままで終わりそうな予感。</li>
<li>１４４ＭＨｚＲＩＳＣ　ＣＰＵ、１ＭＢの内蔵ＳＲＡＭがＬＥＤを秒単位で点滅させる程度の仕事しかさせていない。</li>
<li>なんという情けなさ。</li></ul>
<p><br /></p>
<p>チップを見て微妙に気になったこと。</p>
<ul class="list1 list-indent1"><li>型番だけしか刻印されていない。</li>
<li>昔のＨ８-３０４８ＦやＨ８Ｓ−２１４４には日立マークが刻印されていたのだけど。</li>
<li>RENESASになってから刻印やめたのかな？</li></ul>
<p><br /></p>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_35">CQ-FRK-SH2Aはワンチップセガサターン（性能相当）なのか？<a class="anchor_super" id="j6c951ee" href="#j6c951ee" title="j6c951ee" style="user-select:none;">&dagger;</a></h2>
<div class="ie5"><table class="style_table" cellspacing="1" border="0"><tbody><tr><td class="style_td">＼</td><td class="style_td">セガサターン</td><td class="style_td">CQ-FRK-SH2A</td></tr>
<tr><td class="style_td">発売</td><td class="style_td">1994年11月22日</td><td class="style_td">2010年4月24日</td></tr>
<tr><td class="style_td">メインＣＰＵ</td><td class="style_td">SH-2(HD6417095)28.64MHz×２</td><td class="style_td">SH-2A(SH7262)144MHz</td></tr>
<tr><td class="style_td">メインメモリー</td><td class="style_td">DRAM 2MB</td><td class="style_td">内蔵SRAM 1MB</td></tr>
<tr><td class="style_td">ＦＰＵ</td><td class="style_td">なし</td><td class="style_td">あり</td></tr>
<tr><td class="style_td">発売当初の価格</td><td class="style_td">44,800円</td><td class="style_td">2,310円(雑誌込)</td></tr>
</tbody></table></div>
<p>雑誌付録マイコンとしては破格の性能。</p>
<ul class="list1 list-indent1"><li>なんといっても外部バスにSDRAMを接続してメモリー増設が可能。（サターンは不可）</li>
<li>ＦＰＵ内蔵</li>
<li>デュアルＣＰＵではないが、１クロックに２命令実行可能。</li></ul>
<p><br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_36">ＡＲＭ(thumb)とＳＨのアーキテクチャー上の違い（レジスタ本数など）<a class="anchor_super" id="o14d105d" href="#o14d105d" title="o14d105d" style="user-select:none;">&dagger;</a></h2>
<p>どちらも３２ビット長の整数レジスタ１６本を持つ。</p>
<pre>    ARM           SH
  +--------+   +--------+
  |   R0   |   |   R0   |
  +--------+   +--------+
  |   R1   |   |   R1   |
  +--------+   +--------+
  |   R2   |   |   R2   |
  +--------+   +--------+
  |   R3   |   |   R3   |
  +--------+   +--------+
  |   R4   |   |   R4   |
  +--------+   +--------+
  |   R5   |   |   R5   |
  +--------+   +--------+
  |   R6   |   |   R6   |
  +--------+   +--------+
  |   R7   |   |   R7   |
  +--------+   +--------+
  |   R8   |   |   R8   |
  +--------+   +--------+
  |   R9   |   |   R9   |
  +--------+   +--------+
  |   R10  |   |   R10  |
  +--------+   +--------+
  |   R11  |   |   R11  |
  +--------+   +--------+
  |   R12  |   |   R12  |
  +--------+   +--------+
  |R13(SP) |   |   R13  |
  +--------+   +--------+
  |R14(LR) |   |   R14  |
  +--------+   +--------+
  |R15(PC) |   |R15(SP) |
  +--------+   +--------+</pre>
<pre>               +--------+
               |  PR(LR)|
               +--------+
               +--------+
               |  PC    |
               +--------+</pre>
<ul class="list1 list-indent1"><li>ARMは１６本の汎用レジスタ内にPC,LRを含めている</li>
<li>SHではPR(LR),PCは独立していて汎用レジスタ扱いではない。</li></ul>
<ul class="list1 list-indent1"><li>Thumbではレジスタ指定フィールドが3bit(実質レジスタ８本)なので、これでよいのかも。</li></ul>
<ul class="list1 list-indent1"><li>参考：<a href="http://www.bomber.co.jp/chaola/docs/ARM/inst_THUMB.html" rel="nofollow">http://www.bomber.co.jp/chaola/docs/ARM/inst_THUMB.html</a></li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_37">LPC2388:まだ動かない。<a class="anchor_super" id="pfcee6d7" href="#pfcee6d7" title="pfcee6d7" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>HIDクラスデバイスを作って、64byte書いて64byte読むというのをやってみた。</li>
<li>１回目はＯＫなのだが、</li>
<li>２回目の書き込みデータが前と同じままという変な現象が起きていて</li>
<li>先へ進まない。</li></ul>
<ul class="list1 list-indent1"><li>シリアルデバッグでもするかのう・・・（面倒くさい）</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_38">ubuntu10.04がリリースされたらしい。<a class="anchor_super" id="e4c478ee" href="#e4c478ee" title="e4c478ee" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li><a href="https://wiki.ubuntulinux.jp/Develop/Lucid/TechnicalOverview" rel="nofollow">https://wiki.ubuntulinux.jp/Develop/Lucid/TechnicalOverview</a></li>
<li><a href="https://wiki.ubuntu.com/LucidLynx/ReleaseNotes/ja" rel="nofollow">https://wiki.ubuntu.com/LucidLynx/ReleaseNotes/ja</a></li>
<li><a href="http://www.lifehacker.jp/2010/02/100224ubuntumusicstore.html" rel="nofollow">http://www.lifehacker.jp/2010/02/100224ubuntumusicstore.html</a></li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />
   </div>
  </div>
 </div>
 <div style="clear:both;height:1em;"></div>
 <div id="logo"><a href="/ATMEL_AVR/html/" style="background-image: url(image/title.jpg);"></a></div>
 <div id="personal"><ul><li class="login"><a href="http://">ログインまたはアカウント作成</a></li></ul></div>
 <div id="footer">
  <div id="f-officialico">
   <a href="http://pukiwiki.sourceforge.jp/"><img src="../image/b_pukiwiki.official.png" alt="PukiWiki-official" /></a>
  </div>
  <div id="f-officialdevico">
   <a href="http://pukiwiki.sourceforge.jp/dev/"><img src="../image/b_pukiwiki.dev.png" alt="PukiWiki-dev" /></a>
  </div>
  <div id="f-list">
   <ul><li id="lastmod">Last-modified: 2014-11-17 (月) 14:44:26<span class="page_passage" data-mtime="2014-11-17T14:44:26+09:00"></span></li><li>Site admin: <a href="http://pukiwiki.example.com/">anonymous</a></li>    <li>Powered by PukiWiki</li>
    <li><a href="http://www.luntf.com/">Monobook for PukiWiki</a></li>
   </ul>
  </div>
  <div style="clear:both;"></div>
 </div>
</div>
</body>
</html>
