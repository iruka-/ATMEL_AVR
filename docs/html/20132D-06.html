<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">

<head>
 <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
 <title>2013-06 - PukiWiki</title>

<!---
 <link rel="stylesheet" media="screen and (max-width:768px)" href="../skin/180wiki-sp.css" />

 --->

 <link rel="stylesheet" media="screen and (max-width:768px)" href="../skin/monobook/mobile.css" />
 <link rel="stylesheet" media="screen and (min-width:769px)" href="../skin/monobook/monobook.css" />

 <link rel="stylesheet" type="text/css" media="print" href="../skin/monobook/monobook.print.css" />
 <link rel="alternate" type="application/rss+xml" title="RSS" href="./?cmd=rss" />

 <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>
<div id="globalWrapper">
 <div id="menubar">
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/html/" title="FrontPage" class="link_page_passage">Ｔｏｐ</a></li></ul>
<hr class="full_hr" />
<p><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-EF-BD-98-.html" class="link_page_passage">ＨＩＤａｓｐｘ</a></p>
<ul class="list1 list-indent1"><li><a href="EF-BC-A4-EF-BD-8F-EF-BD-97-EF-BD-8E-EF-BC-AC-EF-BD-8F-EF-BD-81-EF-BD-84-.html" class="link_page_passage">ＤｏｗｎＬｏａｄ</a></li>
<li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E9-AB-98-E9-80-9F-E5-8C-96-.html" class="link_page_passage">ＨＩＤａｓｐ高速化</a></li>
<li><strong><a href="Newest.html" title="Newest" class="link_page_passage">開発日記</a></strong> <a href="SiteMap.html" title="SiteMap" class="link_page_passage">ログ</a></li></ul>
<p><a href="E5-88-B6-E4-BD-9C-.html" class="link_page_passage">制作</a></p>
<p><a href="AVRetc.html" title="AVRetc" class="link_page_passage">ＡＶＲ関係</a></p>
<ul class="list1 list-indent1"><li><a href="AVR_Monit.html" class="link_page_passage">AVR_Monit</a></li>
<li><a href="AVR_term.html" class="link_page_passage">AVR_term</a></li>
<li><a href="W32_term.html" class="link_page_passage">W32_term</a></li>
<li><a href="HIDmon88.html" class="link_page_passage">HIDmon88</a></li>
<li><a href="HIDtester.html" class="link_page_passage">HIDtester</a></li>
<li><a href="usbRS232.html" class="link_page_passage">usbRS232</a></li>
<li><a href="Arduino2313.html" class="link_page_passage">Arduino2313</a></li>
<li><a href="E3-83-87-E3-82-B8-E3-82-BF-E3-83-AB-E3-83-86-E3-82-B9-E3-82-BF-E3-83-BC-.html" class="link_page_passage">デジタルテスター</a></li>
<li><a href="ATmega88E7-94-9F-E6-B4-BB-.html" class="link_page_passage">ATmega88生活</a></li>
<li><a href="KeyBoardE3-83-9E-E3-83-8B-E3-82-A2-.html" class="link_page_passage">KeyBoardマニア</a></li>
<li><a href="KeyBoardE3-83-9E-E3-83-8B-E3-82-A2-II.html" class="link_page_passage">KeyBoardマニアII</a></li>
<li><a href="Arduino400.html" class="link_page_passage">Arduino400</a></li>
<li><a href="PICspx.html" title="PICspx" class="link_page_passage">PICライター</a></li>
<li><a href="hid_blaster.html" title="hid_blaster" class="link_page_passage">ARMライター</a></li>
<li><a href="E8-B5-A4-E5-A4-96-E7-B7-9A-E3-83-AA-E3-83-A2-E3-82-B3-E3-83-B3-.html" class="link_page_passage">赤外線リモコン</a></li></ul>
<p><a href="ARM.html" class="link_page_passage">ARM</a></p>
<ul class="list1 list-indent1"><li><a href="armon.html" title="armon" class="link_page_passage">STM32ブートローダー</a></li>
<li><a href="stm32f103.html" title="stm32f103" class="link_page_passage">STM8S-Discovery改造</a></li>
<li><a href="stm8s_blaster.html" title="stm8s_blaster" class="link_page_passage">STM8S-OpenOCDライター</a></li>
<li><a href="LPCXpresso.html" class="link_page_passage">LPCXpresso</a></li>
<li><a href="lpc2D-armon.html" title="lpc-armon" class="link_page_passage">LPC用ブートローダー</a></li>
<li><a href="LPCUSB.html" title="LPCUSB" class="link_page_passage">NXP用LPCUSB</a></li>
<li><a href="ARM7mon.html" title="ARM7mon" class="link_page_passage">NXP用ブートローダー</a></li>
<li><a href="LPC1114.html" title="LPC1114" class="link_page_passage">MARY基板</a></li>
<li><a href="LPC1114FN28.html" class="link_page_passage">LPC1114FN28</a></li>
<li><a href="arm_blaster.html" title="arm_blaster" class="link_page_passage">OpenOCD　JTAGアダプター</a></li>
<li><a href="openocd2D-build.html" title="openocd-build" class="link_page_passage">OpenOCDビルド方法</a></li>
<li><a href="arm2D-gcc.html" title="arm-gcc" class="link_page_passage">arm-gccビルド方法</a></li>
<li><a href="mapleIDE.html" title="mapleIDE" class="link_page_passage">mapleIDEの改造</a></li>
<li><a href="libmapleE3-81-A7-E4-BB-AE-E6-83-B3-COM.html" class="link_page_passage">libmapleで仮想COM</a></li></ul>
<p>PIC32</p>
<ul class="list1 list-indent1"><li><a href="PIC32MX.html" class="link_page_passage">PIC32MX</a></li>
<li><a href="Pinguino.html" title="Pinguino" class="link_page_passage">Pinguinoで遊ぼう</a></li>
<li><a href="HIDBootX.html" title="HIDBootX" class="link_page_passage">ブートローダーを作る</a></li>
<li><a href="uartflash32.html" title="uartflash32" class="link_page_passage">シリアルブートローダー</a></li>
<li><a href="PIC32MX_USBCDC.html" title="PIC32MX_USBCDC" class="link_page_passage">USB仮想シリアル</a></li>
<li><a href="USB_CUSTOM.html" title="USB_CUSTOM" class="link_page_passage">USBカスタムデバイス</a></li>
<li><a href="PIC32mon.html" title="PIC32mon" class="link_page_passage">USB簡易モニター</a></li>
<li><a href="USBE3-82-AA-E3-82-B7-E3-83-AD-E3-82-B9-E3-82-B3-E3-83-BC-E3-83-97-.html" class="link_page_passage">USBオシロスコープ</a></li>
<li><a href="USB_HOST.html" title="USB_HOST" class="link_page_passage">USBホスト</a>　</li>
<li><a href="Bluetooth.html" title="Bluetooth" class="link_page_passage">PIC32でBluetooth</a>　</li>
<li><a href="USBAudio.html" class="link_page_passage">USBAudio</a>　</li>
<li><a href="USBStudy.html" class="link_page_passage">USBStudy</a>　</li>
<li><a href="pic32vga.html" title="pic32vga" class="link_page_passage">VGA出力に挑戦</a></li>
<li><a href="tinyBasic2.html" title="tinyBasic2" class="link_page_passage">BASICを動かす</a></li>
<li><a href="WinUSB.html" class="link_page_passage">WinUSB</a>　</li>
<li><a href="PIC32MXcust.html" title="PIC32MXcust" class="link_page_passage">勝手に改蔵*PIC32</a></li></ul>
<p>PIC18F</p>
<ul class="list1 list-indent1"><li><a href="pic18boot.html" title="pic18boot" class="link_page_passage">HIDブートローダー</a></li>
<li><a href="pic18spx.html" title="pic18spx" class="link_page_passage">AVR/PIC両用ライター</a></li>
<li><a href="pic18blaster.html" title="pic18blaster" class="link_page_passage">ARMライター</a></li>
<li><a href="pic18monit.html" title="pic18monit" class="link_page_passage">usb汎用クラス</a></li>
<li><a href="usbserial.html" title="usbserial" class="link_page_passage">usbシリアル変換</a></li>
<li><a href="pic18hidkey.html" title="pic18hidkey" class="link_page_passage">usbキーボード変換</a></li>
<li><a href="sdcc.html" title="sdcc" class="link_page_passage">sdccを使いこなす</a></li>
<li><a href="mcc18.html" title="mcc18" class="link_page_passage">mcc18を使いこなす</a></li>
<li><a href="HIDmon2D-2550.html" class="link_page_passage">HIDmon-2550</a></li>
<li><a href="HIDmon2D-14K50.html" class="link_page_passage">HIDmon-14K50</a></li>
<li><a href="PICmonitor.html" class="link_page_passage">PICmonitor</a></li></ul>
<p>試行錯誤の記録</p>
<ul class="list1 list-indent1"><li><a href="UBW.html" title="UBW" class="link_page_passage">UBWを試す</a></li>
<li><a href="HIDboot.html" title="HIDboot" class="link_page_passage">旧HIDboot</a></li>
<li><a href="PIC18F2550.html" title="PIC18F2550" class="link_page_passage">PIC18F2550試用記</a></li>
<li><a href="PIC18F4550.html" title="PIC18F4550" class="link_page_passage">PIC18F4550試用記</a></li></ul>
<p>その他マイコン</p>
<ul class="list1 list-indent1"><li><a href="NEC78K.html" class="link_page_passage">NEC78K</a></li>
<li><a href="RX62N.html" class="link_page_passage">RX62N</a></li>
<li><a href="SH2A.html" class="link_page_passage">SH2A</a></li>
<li><a href="EF-BC-A8-EF-BC-98-.html" class="link_page_passage">Ｈ８</a></li>
<li><a href="FM3.html" class="link_page_passage">FM3</a></li>
<li><a href="ubuntuXP.html" title="ubuntuXP" class="link_page_passage">XPからubuntuに乗り換え</a></li>
<li><a href="Android.html" class="link_page_passage">Android</a></li>
<li><a href="Xen2D-hypervisor.html" class="link_page_passage">Xen-hypervisor</a></li>
<li><a href="Windows8E3-82-AB-E3-82-B9-E3-82-BF-E3-83-9E-E3-82-A4-E3-82-BA-.html" class="link_page_passage">Windows8カスタマイズ</a></li></ul>
<p>開発日記</p>
<ul class="list1 list-indent1"><li><a href="20152D-04.html" class="link_page_passage">2015-04</a></li></ul>
<hr class="full_hr" />
<p>ノウハウ</p>
<ul class="list1 list-indent1"><li><a href="AVRUSB_Tips.html" class="link_page_passage">AVRUSB_Tips</a></li>
<li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E6-83-85-E5-A0-B1-.html" class="link_page_passage">ＨＩＤａｓｐ情報</a></li>
<li><a href="E6-B1-8E-E7-94-A8-EF-BC-B5-EF-BC-B3-EF-BC-A2-2D-EF-BC-A9-EF-BC-AF-.html" class="link_page_passage">汎用ＵＳＢ-ＩＯ</a></li></ul>
<hr class="full_hr" />
<p>・<a href="AVRlink.html" title="AVRlink" class="link_page_passage">リンク</a></p>
<p>フリースペース</p>
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/cgi-bin/note/index.cgi" rel="nofollow">ゲストブック</a></li></ul>
<hr class="full_hr" />
<p><a href="EF-BC-B7-EF-BD-89-EF-BD-84-EF-BD-85-EF-BC-B4-EF-BD-85-EF-BD-98-EF-BD-94-.html" title="ＷｉｄｅＴｅｘｔ" class="link_page_passage">旧コンテンツ</a><br />
<a href="EF-BC-B7-EF-BD-89-EF-BD-8E-EF-BC-B6-EF-BD-89-EF-BD-93-EF-BD-94-EF-BD-81-.html" class="link_page_passage">ＷｉｎＶｉｓｔａ</a><br />
<a href="E3-82-A4-E3-83-B3-E3-82-BF-E3-83-BC-E3-83-95-E3-82-A7-E3-83-BC-E3-82-B9-E8-80-83-.html" class="link_page_passage">インターフェース考</a></p>
<hr class="full_hr" />
<h5>最新の20件</h5>
<div><strong>2024-06-21</strong>
<ul class="recent_list">
 <li><a href="SMRE3-81-AA-HDDE3-83-99-E3-83-B3-E3-83-81-E3-83-9E-E3-83-BC-E3-82-AF-.html" class="link_page_passage">SMRなHDDベンチマーク</a></li>
 <li><a href="20222D-08.html" class="link_page_passage">2022-08</a></li>
 <li><a href="UEFI_Basic.html" class="link_page_passage">UEFI_Basic</a></li>
</ul>
<strong>2024-06-20</strong>
<ul class="recent_list">
 <li><a href="Newest.html" class="link_page_passage">Newest</a></li>
 <li><a href="MenuBar.html" class="link_page_passage">MenuBar</a></li>
</ul>
<strong>2022-12-06</strong>
<ul class="recent_list">
 <li><a href="MSE3-82-A2-E3-82-AB-E3-82-A6-E3-83-B3-E3-83-88-E3-81-AE-WindowsE3-81-AE-CE3-83-89-E3-83-A9-E3-82-A4-E3-83-96-E3-82-92-E4-BF-AE-E5-BE-A9-E3-81-99-E3-82-8B-.html" class="link_page_passage">MSアカウントのWindowsのCドライブを修復する</a></li>
</ul>
<strong>2022-09-29</strong>
<ul class="recent_list">
 <li><a href="AndroidE3-81-AB-SSLE8-87-AA-E5-B7-B1-E7-BD-B2-E5-90-8D-E8-A8-BC-E6-98-8E-E6-9B-B8-E3-82-92-E5-85-A5-E3-82-8C-E3-82-8B-.html" class="link_page_passage">AndroidにSSL自己署名証明書を入れる</a></li>
</ul>
<strong>2022-08-31</strong>
<ul class="recent_list">
 <li><a href="E7-B0-A1-E6-98-93-E9-80-9F-E5-BA-A6-E6-B8-AC-E5-AE-9A-E3-82-B5-E3-82-A4-E3-83-88-.html" class="link_page_passage">簡易速度測定サイト</a></li>
 <li><a href="E3-83-8D-E3-83-83-E3-83-88-E3-83-AF-E3-83-BC-E3-82-AF-BOOT.html" class="link_page_passage">ネットワークBOOT</a></li>
</ul>
<strong>2022-08-26</strong>
<ul class="recent_list">
 <li><a href="E7-B0-A1-E6-98-93-E3-82-B3-E3-83-B3-E3-83-91-E3-82-A4-E3-83-AB-E3-83-99-E3-83-B3-E3-83-81-.html" class="link_page_passage">簡易コンパイルベンチ</a></li>
</ul>
<strong>2022-08-01</strong>
<ul class="recent_list">
 <li><a href="/ATMEL_AVR/html/" class="link_page_passage">FrontPage</a></li>
 <li><a href="20152D-04.html" class="link_page_passage">2015-04</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-EF-BD-98-.html" class="link_page_passage">ＨＩＤａｓｐｘ</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E6-83-85-E5-A0-B1-.html" class="link_page_passage">ＨＩＤａｓｐ情報</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-.html" class="link_page_passage">ＨＩＤａｓｐ</a></li>
 <li><a href="NEC78K.html" class="link_page_passage">NEC78K</a></li>
 <li><a href="AVRetc.html" class="link_page_passage">AVRetc</a></li>
 <li><a href="AVR_Monit.html" class="link_page_passage">AVR_Monit</a></li>
 <li><a href="20082D-08.html" class="link_page_passage">2008-08</a></li>
</ul>
<strong>2022-07-31</strong>
<ul class="recent_list">
 <li><a href="EF-BC-B7-EF-BD-89-EF-BD-84-EF-BD-85-EF-BC-B4-EF-BD-85-EF-BD-98-EF-BD-94-.html" class="link_page_passage">ＷｉｄｅＴｅｘｔ</a></li>
</ul>
</div>
</div>
 <div id="mainColumnWrapper">
  <div id="main-column">
   <div id="navigator"><ul><li class="selected" id="separate"><a href="">本文</a></li><li><a href="./?cmd=edit&amp;page=2013-06">編集</a></li><li><a href="./?cmd=diff&amp;page=2013-06">差分</a></li></ul></div>
   <div id="content">
    <h1 class="firstHeading">2013-06</h1><div id="contentSub"></div>
    <p><a href="20132D-05.html" class="link_page_passage">2013-05</a>　<a href="FM3.html" class="link_page_passage">FM3</a>　<a href="RX62N.html" class="link_page_passage">RX62N</a>　<a href="SH2A.html" class="link_page_passage">SH2A</a>　<a href="PIC32MX.html" class="link_page_passage">PIC32MX</a></p>
<hr class="full_hr" />
<h2 id="content_1_0">６月<a class="anchor_super" id="nee7e420" href="#nee7e420" title="nee7e420" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>とりあえず、220円で作る<a href="USBE3-82-AA-E3-82-B7-E3-83-AD-E3-82-B9-E3-82-B3-E3-83-BC-E3-83-97-.html" class="link_page_passage">USBオシロスコープ</a>は完成した（つもり）</li>
<li>PIC32MXでFT2232互換ファームを作る計画があったんだけれど、また先延ばし。(FT232Hモジュールが秋月で安く買えるようになったので、わざわざマイコンでFT232の代わりをやらせるのも面倒面倒)</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_1">6月のテーマ:予定<a class="anchor_super" id="s56b1be1" href="#s56b1be1" title="s56b1be1" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>急遽、ＬＥＤディマーを作る予定。内容は謎。</li></ul>
<ul class="list1 list-indent1"><li>マウスの修理
<ul class="list2 list-indent1"><li>長いことIntelliPoint Explororを使っていたんだけど、ボタンが接触不良になった。</li>
<li>それで、Comfort 6000を買ってきたのだが、こいつ、じっとしていてもこっくりさんをしたり、動かしてるときもポインタがふらつく。最悪だ。</li>
<li>　古いのを修理して元に戻そう。</li></ul></li></ul>
<ul class="list1 list-indent1"><li>オシロだと500kSPS程度が限界みたいなので、DMA叩いてPORTをサンプリングする、ロジアナっぽいやつを作ってみる。</li>
<li>SPIインターフェースを使って1bit DACを書いてみようかなとかそんな奴。(SPIの先にDACを繋ぐ訳ではない)</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_2">Linux Containers<a class="anchor_super" id="d0c1645f" href="#d0c1645f" title="d0c1645f" style="user-select:none;">&dagger;</a></h2>
<p><strong>Linuxコンテナ(LXC)</strong>というのは、仮想マシン(VM)を使わない、Linux OSの多重化の実装。</p>
<ul class="list1 list-indent1"><li><a href="http://webframe.sourceforge.jp/wiki/index.php?LinuXContainers" rel="nofollow">http://webframe.sourceforge.jp/wiki/index.php?LinuXContainers</a></li></ul>
<ul class="list1 list-indent1"><li><a href="https://guinan.ten-forward.ws/lxc-20130601/lxc-current-info.html" rel="nofollow">https://guinan.ten-forward.ws/lxc-20130601/lxc-current-info.html</a></li></ul>
<p><br />
荒っぽく言うと、chrootでユーザーランド切り替えて、ついでにcgroupsでプロセス空間とかもうまくホストＯＳから隔離してしまう奴。</p>
<p><br />
どこが良いんでしょう？</p>
<ul class="list1 list-indent1"><li>仮想マシンを導入することによるパフォーマンスオーバヘッドが無くなって軽くなる。</li>
<li>でかい仮想ドライブイメージとかも要らない。単にどっかのディレクトリにchrootするマウントポイントと、最小限のLinuxが置いてあればよい。</li>
<li>ゲスト側で独立したOSが動いているわけではないので、多重化環境をたくさん用意してもあんまりリソース食わなくて済む。（高密度化出来る）</li>
<li>起動/シャットダウンがめちゃ速い。というか一瞬。（Xenのpvmも相当早いんだけど）</li></ul>
<p><br />
弱点？</p>
<ul class="list1 list-indent1"><li>カーネルは全部共通になる。（ホストOSのカーネルが実行する）。</li>
<li>Linux以外のOSは多重化できない。</li>
<li>まだまだ開発途上なんだけど、ubuntu12.04以降ではだいたい動いてるよ。</li></ul>
<p><br /></p>
<p>LXCの導入</p>
<ul class="list1 list-indent1"><li><a href="http://gihyo.jp/admin/serial/01/ubuntu-recipe/0226" rel="nofollow">http://gihyo.jp/admin/serial/01/ubuntu-recipe/0226</a></li></ul>
<p>上記URLのとおりにする。えらく簡単。</p>
<pre># apt-get install lxc lxctl
# lxc-create -t ubuntu -n raring
# lxc-start -n raring</pre>
<p>この３行でもう新しいubuntuが動いてしまうくらい。</p>
<p><br />
落とし穴。（トラブルシュートともいう）</p>
<ul class="list1 list-indent1"><li>1)環境変数LANGをja_JP.EUC-JPやCにしてる人は全然インストール(lxc-create)出来ない。
<pre># export LANG=ja_JP.UTF-8</pre></li>
<li>にすべし
<ul class="list2 list-indent1"><li>エラーメッセージに出てこないので、これは何が原因なのか分からない落とし穴。</li>
<li>ubuntu12.04まではOKだったのに・・・。</li></ul></li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>2)LANのinterfaceはlxcbr0 というのが自動的に作られる。（10.0.3.1とかになる）
<ul class="list2 list-indent1"><li>ホストLinuxからゲートウェイするのであればそれでもＯＫだけど、普通にＬＡＮ内に晒したいならば、</li>
<li>/etc/lxc/default.confを編集して
<pre>lxc.network.link = eth0</pre></li>
<li>とか(すでにXenのブリッジがあるなら)
<pre>lxc.network.link = xenbr0</pre></li>
<li>とかに書き換える。</li>
<li>すでにcreate済みのゲストOSならば、</li>
<li>/var/lib/lxc/ゲストOS名/config を同様に書き換える。</li></ul></li></ul>
<p><br /></p>
<p><br /></p>
<ul class="list1 list-indent1"><li>ubuntuのユーザーランドが出来る場所。
<ul class="list2 list-indent1"><li>/var/cache/lxc/ 以下にはdebootstrapで取得された最小限のユーザーランドがダウンロードされる。</li>
<li># lxc-create -n &lt;OSインスタンスの名前&gt; 　すると、 /var/lib/lxc/&lt;OSインスタンスの名前&gt;/ 以下に、ユーザーランドがコピーされ、ついでにconfigも置かれる。</li>
<li># lxc-destroy -n &lt;OSインスタンスの名前&gt;　を実行すると、/var/lib/lxc/&lt;OSインスタンスの名前&gt;/ 以下は消滅する。</li></ul></li></ul>
<p><br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_3">おまけ:x86環境でarmのlinuxをホスティングすることも出来る。<a class="anchor_super" id="u10f53d8" href="#u10f53d8" title="u10f53d8" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>これはXenとかVMWareでは出来なかった芸。QEMUを使うけど。</li></ul>
<pre># apt-get install qemu-user-static
# lxc-create -n armhf -t ubuntu -- -a armhf
# lxc-start -n armhf</pre>
<ul class="list1 list-indent1"><li>arm-linuxが動くということは、その中でchrootすればAndroidを動かすことも出来る（原理的に）</li>
<li><del>まだ試していない。</del> -- 試してみたけど、だめだった。ログインしようとしてもプロンプトまで来ない。</li>
<li><del>原因不明。</del>
<ul class="list2 list-indent1"><li>ubuntu12.04.2LTSだと動く。13.04だとパスワードを入力した後、だんまりになる。</li>
<li>やはり原因不明。</li></ul></li></ul>
<ul class="list1 list-indent1"><li>ubuntu12.04.2LTSで試す。
<ul class="list2 list-indent1"><li>psコマンドでsignal 11(SEGV)が出る。</li>
<li>それ以外はだいたい動いている。（ような気がする。）</li></ul></li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_4">LXC:arm-linuxのベンチマーク<a class="anchor_super" id="u7cf052d" href="#u7cf052d" title="u7cf052d" style="user-select:none;">&dagger;</a></h2>
<p>適当なベンチマークソフトが無かったので、古いPerl5.005のTarBallの圧縮時間で計測。</p>
<ul class="list1 list-indent1"><li>tar.gzで5MB
<pre>5251351 2013-06-17 22:00 perl5.005_63.tar.gz</pre></li>
<li>これをgzipで一旦展開させて、
<pre>$ gzip -d perl5.005_63.tar.gz</pre></li>
<li>再圧縮の時間を計る。</li></ul>
<pre>ubuntu@arm:~$ time gzip  perl5.005_63.tar
real    0m14.734s
user    0m14.681s
sys     0m0.048s</pre>
<pre>processor       : 0
vendor_id       : GenuineIntel
cpu family      : 6
model           : 15
model name      : Intel(R) Core(TM)2 Duo CPU     E4500  @ 2.20GHz
stepping        : 13
microcode       : 0xa1
cpu MHz         : 1200.000
cache size      : 2048 KB
physical id     : 0
siblings        : 2
core id         : 0
cpu cores       : 2
apicid          : 0
initial apicid  : 0</pre>
<ul class="list1 list-indent1"><li>cpuinfoではintelになっているけれど、gzipはれっきとしたARMバイナリー</li></ul>
<pre>ubuntu@arm:~$ file /bin/gzip
/bin/gzip: ELF 32-bit LSB executable, ARM, version 1 (SYSV), dynamically linked (uses shared libs)
,for GNU/Linux 2.6.31, BuildID[sha1]=XXX, stripped</pre>
<pre>ubuntu@arm:/bin$ ldd gzip
       librt.so.1 =&gt; /lib/arm-linux-gnueabihf/librt.so.1 (0xf67cc000)
       libgcc_s.so.1 =&gt; /lib/arm-linux-gnueabihf/libgcc_s.so.1 (0xf67bb000)
       libc.so.6 =&gt; /lib/arm-linux-gnueabihf/libc.so.6 (0xf66d7000)
       /lib/arm-linux-gnueabihf/ld-linux.so.3 =&gt; /lib/ld-linux-armhf.so.3 (0xf6fe0000)
       libpthread.so.0 =&gt; /lib/arm-linux-gnueabihf/libpthread.so.0 (0xf66bc000)</pre>
<p><br /></p>
<ul class="list1 list-indent1"><li>比較対象：玄箱Pro(MarvelのARM 266MHzシングルコア)</li></ul>
<pre>kurobox$ time gzip perl5.005_63.tar
real    0m43.373s
user    0m27.670s
sys     0m0.440s</pre>
<pre>Processor       : Feroceon rev 0 (v5l)
BogoMIPS        : 265.42
Features        : swp half thumb fastmult edsp
CPU implementer : 0x41
CPU architecture: 5TEJ
CPU variant     : 0x0
CPU part        : 0x926
CPU revision    : 0

Hardware        : Buffalo/Revogear Kurobox Pro
Revision        : 0000
Serial          : 0000000000000000</pre>
<p><br /></p>
<ul class="list1 list-indent1"><li>比較対象２：普通のintel LinuxBox(仮想マシン 1CPU)
<pre>ubu-vm:~% time gzip perl5.005_63.tar
real    0m1.132s
user    0m1.116s
sys     0m0.008s</pre></li></ul>
<p><br />
結論</p>
<ul class="list1 list-indent1"><li>LXC(Linuxコンテナ)上のarm-linux(要はQEMU上で動いているARMのユーザーランド。Linuxカーネルだけはx86_64)の速度は</li>
<li>普通の<strong>intel上で動かすLinuxの1:14程度</strong>の速度でちゃんと動いている。(1/14を遅いと見るか速いと見るかはその人次第)</li>
<li>その速度は、玄箱Pro(ARM 266MHz)のなんと３倍もある。(MarvelのARM CPU換算で800MHz程度！)</li></ul>
<p><br />
ただし測定方法がgzip圧縮の時間計測のみなので、結構不正確かもしれない。</p>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_5">LXC:arm-linuxのその後<a class="anchor_super" id="jb20f7e2" href="#jb20f7e2" title="jb20f7e2" style="user-select:none;">&dagger;</a></h2>
<p>その後やってみて分かったことのメモ</p>
<ul class="list1 list-indent1"><li>ubuntu13.04にて、arm-linuxが動かない件は再現性あり。</li></ul>
<pre># apt-get install qemu-user-static
# lxc-create -n armhf -t ubuntu -- -a armhf
# lxc-start -n armhf</pre>
<p>不具合症状</p>
<ul class="list1 list-indent1"><li>これで起動したarm-linuxにログインしようとすると、(ubuntu/ubuntu)パスワード入力まで出来ても、コマンドプロンプトまで来ないでだんまりになる。</li></ul>
<p>試行錯誤した結果の、暫定的な解決策</p>
<ul class="list1 list-indent1"><li>/var/lib/lxc/armhf/rootfs/ にchrootの根っこがあるので、その下の home/ubuntu/ 以下の .profile を編集して、 .bashrc を実行しないようにする。</li></ul>
<ul class="list1 list-indent1"><li>すると、一応プロンプトに来る。</li>
<li>普通にarm-linuxとして使ってみる。</li></ul>
<p><br />
Tips</p>
<ul class="list1 list-indent1"><li>lxc-start に -d (デーモン起動)オプションを与えない場合（上記）は、arm-linuxから抜け出せなくなる。</li>
<li>なので、以下のように変えてみる。
<pre># lxc-start -d -n armhf
# lxc-console -n armhf</pre></li>
<li>こうしておくと Ctrl+A、q の２キーストロークでarm-linuxから脱出できる。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>コンソールを繋いだ状態 (lxc-console -n armhf)で暫く置くと、(QEMUで動いているほうの) rsyslogd がSegVで何度も落ちるとか、時々QEMUが、Unsupported Syscall 37? とかのエラーを吐いているので、まだまだエミュレーションは完璧とはいえないようだ。</li></ul>
<ul class="list1 list-indent1"><li>試しに
<pre># apt-get update
# apt-get install build-essential</pre></li>
<li>したのち、jed（小さなテキストエディタ）をソースからビルドしてみた。</li></ul>
<ul class="list1 list-indent1"><li>intel x64
<pre>real    0m17.860s
user    0m16.480s
sys     0m1.068s</pre></li>
<li>arm-linux On QEMU
<pre>real    2m26.298s
user    2m15.752s
sys     0m7.588s</pre></li>
<li>速度比率
<pre>146sec:17.8sec = 8.20</pre></li>
<li>ただし、同様のテストを別のcore2なLinux hostでやってみたところ、6分くらい掛かったので、QEMUの実行速度は
ばらつきが大きいかもしれない。</li></ul>
<p><br />
<br />
<br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_6">結論<a class="anchor_super" id="v4127f07" href="#v4127f07" title="v4127f07" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>わざわざQEMU経由でarm-linuxを動かすのは置いといても、普通にLinux On Linuxが手軽に試せるのは良いし、</li>
<li>Windows上のVMWarePlayerで動いているubuntuだろうが、レンタルサーバーの借りてる仮想マシン上だろうが、</li>
<li>それがubuntu12.04以降であれば気軽にLXCを試すことが出来て、設定弄りに失敗しても即座にdestroyしたり
cloneしたり出来るので、かなり便利です。<strong>動作も軽いし、各種リソースも最小限で動きます。</strong></li></ul>
<p><br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_7">参考ＵＲＬ<a class="anchor_super" id="nd7ea76f" href="#nd7ea76f" title="nd7ea76f" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li><a href="https://help.ubuntu.com/lts/serverguide/lxc.html" rel="nofollow">https://help.ubuntu.com/lts/serverguide/lxc.html</a></li>
<li><a href="https://help.ubuntu.com/community" rel="nofollow">https://help.ubuntu.com/community</a>
<br />
<br />
<br /></li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_8">PIC32MX:水晶発振から内蔵ＲＣ発振への変更。<a class="anchor_super" id="c36e3f5a" href="#c36e3f5a" title="c36e3f5a" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>一応うまくいった。</li></ul>
<p>課題</p>
<ul class="list1 list-indent1"><li>当然ながら、水晶と比べて、動作周波数が不正確（不安定）になる。</li>
<li>CLKIとRA4を接続する必要がある。CLKOは空きになる。差し引きで使用可能ピン数は変わらない。</li>
<li>ファームサイズが1kBとまではいかないけれど少し肥大化する。</li></ul>
<ul class="list1 list-indent1"><li>動作周波数が不正確でも良いけれど高密度実装したいとかそんな時には使えるかも。</li>
<li>AVR-USB(V-USB)の内蔵RCよりは通信は安定する。(ハード実装のUSB SIEなので)</li></ul>
<p>ソースはそのうち上げます。</p>
<p><br />
<br />
<br /></p>
<p><a href="20132D-05.html" title="2013-05" class="link_page_passage">＜前の月</a>｜<a href="20132D-07.html" title="2013-07" class="link_page_passage">次の月＞</a></p>
   </div>
  </div>
 </div>
 <div style="clear:both;height:1em;"></div>
 <div id="logo"><a href="/ATMEL_AVR/html/" style="background-image: url(image/title.jpg);"></a></div>
 <div id="personal"><ul><li class="login"><a href="http://">ログインまたはアカウント作成</a></li></ul></div>
 <div id="footer">
  <div id="f-officialico">
   <a href="http://pukiwiki.sourceforge.jp/"><img src="../image/b_pukiwiki.official.png" alt="PukiWiki-official" /></a>
  </div>
  <div id="f-officialdevico">
   <a href="http://pukiwiki.sourceforge.jp/dev/"><img src="../image/b_pukiwiki.dev.png" alt="PukiWiki-dev" /></a>
  </div>
  <div id="f-list">
   <ul><li id="lastmod">Last-modified: 2013-07-03 (水) 20:26:58<span class="page_passage" data-mtime="2013-07-03T20:26:58+09:00"></span></li><li>Site admin: <a href="http://pukiwiki.example.com/">anonymous</a></li>    <li>Powered by PukiWiki</li>
    <li><a href="http://www.luntf.com/">Monobook for PukiWiki</a></li>
   </ul>
  </div>
  <div style="clear:both;"></div>
 </div>
</div>
</body>
</html>
