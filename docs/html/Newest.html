<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">

<head>
 <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
 <title>Newest - PukiWiki</title>

<!---
 <link rel="stylesheet" media="screen and (max-width:768px)" href="../skin/180wiki-sp.css" />

 --->

 <link rel="stylesheet" media="screen and (max-width:768px)" href="../skin/monobook/mobile.css" />
 <link rel="stylesheet" media="screen and (min-width:769px)" href="../skin/monobook/monobook.css" />

 <link rel="stylesheet" type="text/css" media="print" href="../skin/monobook/monobook.print.css" />
 <link rel="alternate" type="application/rss+xml" title="RSS" href="./?cmd=rss" />

 <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>
<div id="globalWrapper">
 <div id="menubar">
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/html/" title="FrontPage" class="link_page_passage">Ｔｏｐ</a></li></ul>
<hr class="full_hr" />
<p><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-EF-BD-98-.html" class="link_page_passage">ＨＩＤａｓｐｘ</a></p>
<ul class="list1 list-indent1"><li><a href="EF-BC-A4-EF-BD-8F-EF-BD-97-EF-BD-8E-EF-BC-AC-EF-BD-8F-EF-BD-81-EF-BD-84-.html" class="link_page_passage">ＤｏｗｎＬｏａｄ</a></li>
<li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E9-AB-98-E9-80-9F-E5-8C-96-.html" class="link_page_passage">ＨＩＤａｓｐ高速化</a></li>
<li><strong><a href="" title="Newest" class="link_page_passage">開発日記</a></strong> <a href="SiteMap.html" title="SiteMap" class="link_page_passage">ログ</a></li></ul>
<p><a href="E5-88-B6-E4-BD-9C-.html" class="link_page_passage">制作</a></p>
<p><a href="AVRetc.html" title="AVRetc" class="link_page_passage">ＡＶＲ関係</a></p>
<ul class="list1 list-indent1"><li><a href="AVR_Monit.html" class="link_page_passage">AVR_Monit</a></li>
<li><a href="AVR_term.html" class="link_page_passage">AVR_term</a></li>
<li><a href="W32_term.html" class="link_page_passage">W32_term</a></li>
<li><a href="HIDmon88.html" class="link_page_passage">HIDmon88</a></li>
<li><a href="HIDtester.html" class="link_page_passage">HIDtester</a></li>
<li><a href="usbRS232.html" class="link_page_passage">usbRS232</a></li>
<li><a href="Arduino2313.html" class="link_page_passage">Arduino2313</a></li>
<li><a href="E3-83-87-E3-82-B8-E3-82-BF-E3-83-AB-E3-83-86-E3-82-B9-E3-82-BF-E3-83-BC-.html" class="link_page_passage">デジタルテスター</a></li>
<li><a href="ATmega88E7-94-9F-E6-B4-BB-.html" class="link_page_passage">ATmega88生活</a></li>
<li><a href="KeyBoardE3-83-9E-E3-83-8B-E3-82-A2-.html" class="link_page_passage">KeyBoardマニア</a></li>
<li><a href="KeyBoardE3-83-9E-E3-83-8B-E3-82-A2-II.html" class="link_page_passage">KeyBoardマニアII</a></li>
<li><a href="Arduino400.html" class="link_page_passage">Arduino400</a></li>
<li><a href="PICspx.html" title="PICspx" class="link_page_passage">PICライター</a></li>
<li><a href="hid_blaster.html" title="hid_blaster" class="link_page_passage">ARMライター</a></li>
<li><a href="E8-B5-A4-E5-A4-96-E7-B7-9A-E3-83-AA-E3-83-A2-E3-82-B3-E3-83-B3-.html" class="link_page_passage">赤外線リモコン</a></li></ul>
<p><a href="ARM.html" class="link_page_passage">ARM</a></p>
<ul class="list1 list-indent1"><li><a href="armon.html" title="armon" class="link_page_passage">STM32ブートローダー</a></li>
<li><a href="stm32f103.html" title="stm32f103" class="link_page_passage">STM8S-Discovery改造</a></li>
<li><a href="stm8s_blaster.html" title="stm8s_blaster" class="link_page_passage">STM8S-OpenOCDライター</a></li>
<li><a href="LPCXpresso.html" class="link_page_passage">LPCXpresso</a></li>
<li><a href="lpc2D-armon.html" title="lpc-armon" class="link_page_passage">LPC用ブートローダー</a></li>
<li><a href="LPCUSB.html" title="LPCUSB" class="link_page_passage">NXP用LPCUSB</a></li>
<li><a href="ARM7mon.html" title="ARM7mon" class="link_page_passage">NXP用ブートローダー</a></li>
<li><a href="LPC1114.html" title="LPC1114" class="link_page_passage">MARY基板</a></li>
<li><a href="LPC1114FN28.html" class="link_page_passage">LPC1114FN28</a></li>
<li><a href="arm_blaster.html" title="arm_blaster" class="link_page_passage">OpenOCD　JTAGアダプター</a></li>
<li><a href="openocd2D-build.html" title="openocd-build" class="link_page_passage">OpenOCDビルド方法</a></li>
<li><a href="arm2D-gcc.html" title="arm-gcc" class="link_page_passage">arm-gccビルド方法</a></li>
<li><a href="mapleIDE.html" title="mapleIDE" class="link_page_passage">mapleIDEの改造</a></li>
<li><a href="libmapleE3-81-A7-E4-BB-AE-E6-83-B3-COM.html" class="link_page_passage">libmapleで仮想COM</a></li></ul>
<p>PIC32</p>
<ul class="list1 list-indent1"><li><a href="PIC32MX.html" class="link_page_passage">PIC32MX</a></li>
<li><a href="Pinguino.html" title="Pinguino" class="link_page_passage">Pinguinoで遊ぼう</a></li>
<li><a href="HIDBootX.html" title="HIDBootX" class="link_page_passage">ブートローダーを作る</a></li>
<li><a href="uartflash32.html" title="uartflash32" class="link_page_passage">シリアルブートローダー</a></li>
<li><a href="PIC32MX_USBCDC.html" title="PIC32MX_USBCDC" class="link_page_passage">USB仮想シリアル</a></li>
<li><a href="USB_CUSTOM.html" title="USB_CUSTOM" class="link_page_passage">USBカスタムデバイス</a></li>
<li><a href="PIC32mon.html" title="PIC32mon" class="link_page_passage">USB簡易モニター</a></li>
<li><a href="USBE3-82-AA-E3-82-B7-E3-83-AD-E3-82-B9-E3-82-B3-E3-83-BC-E3-83-97-.html" class="link_page_passage">USBオシロスコープ</a></li>
<li><a href="USB_HOST.html" title="USB_HOST" class="link_page_passage">USBホスト</a>　</li>
<li><a href="Bluetooth.html" title="Bluetooth" class="link_page_passage">PIC32でBluetooth</a>　</li>
<li><a href="USBAudio.html" class="link_page_passage">USBAudio</a>　</li>
<li><a href="USBStudy.html" class="link_page_passage">USBStudy</a>　</li>
<li><a href="pic32vga.html" title="pic32vga" class="link_page_passage">VGA出力に挑戦</a></li>
<li><a href="tinyBasic2.html" title="tinyBasic2" class="link_page_passage">BASICを動かす</a></li>
<li><a href="WinUSB.html" class="link_page_passage">WinUSB</a>　</li>
<li><a href="PIC32MXcust.html" title="PIC32MXcust" class="link_page_passage">勝手に改蔵*PIC32</a></li></ul>
<p>PIC18F</p>
<ul class="list1 list-indent1"><li><a href="pic18boot.html" title="pic18boot" class="link_page_passage">HIDブートローダー</a></li>
<li><a href="pic18spx.html" title="pic18spx" class="link_page_passage">AVR/PIC両用ライター</a></li>
<li><a href="pic18blaster.html" title="pic18blaster" class="link_page_passage">ARMライター</a></li>
<li><a href="pic18monit.html" title="pic18monit" class="link_page_passage">usb汎用クラス</a></li>
<li><a href="usbserial.html" title="usbserial" class="link_page_passage">usbシリアル変換</a></li>
<li><a href="pic18hidkey.html" title="pic18hidkey" class="link_page_passage">usbキーボード変換</a></li>
<li><a href="sdcc.html" title="sdcc" class="link_page_passage">sdccを使いこなす</a></li>
<li><a href="mcc18.html" title="mcc18" class="link_page_passage">mcc18を使いこなす</a></li>
<li><a href="HIDmon2D-2550.html" class="link_page_passage">HIDmon-2550</a></li>
<li><a href="HIDmon2D-14K50.html" class="link_page_passage">HIDmon-14K50</a></li>
<li><a href="PICmonitor.html" class="link_page_passage">PICmonitor</a></li></ul>
<p>試行錯誤の記録</p>
<ul class="list1 list-indent1"><li><a href="UBW.html" title="UBW" class="link_page_passage">UBWを試す</a></li>
<li><a href="HIDboot.html" title="HIDboot" class="link_page_passage">旧HIDboot</a></li>
<li><a href="PIC18F2550.html" title="PIC18F2550" class="link_page_passage">PIC18F2550試用記</a></li>
<li><a href="PIC18F4550.html" title="PIC18F4550" class="link_page_passage">PIC18F4550試用記</a></li></ul>
<p>その他マイコン</p>
<ul class="list1 list-indent1"><li><a href="NEC78K.html" class="link_page_passage">NEC78K</a></li>
<li><a href="RX62N.html" class="link_page_passage">RX62N</a></li>
<li><a href="SH2A.html" class="link_page_passage">SH2A</a></li>
<li><a href="EF-BC-A8-EF-BC-98-.html" class="link_page_passage">Ｈ８</a></li>
<li><a href="FM3.html" class="link_page_passage">FM3</a></li>
<li><a href="ubuntuXP.html" title="ubuntuXP" class="link_page_passage">XPからubuntuに乗り換え</a></li>
<li><a href="Android.html" class="link_page_passage">Android</a></li>
<li><a href="Xen2D-hypervisor.html" class="link_page_passage">Xen-hypervisor</a></li>
<li><a href="Windows8E3-82-AB-E3-82-B9-E3-82-BF-E3-83-9E-E3-82-A4-E3-82-BA-.html" class="link_page_passage">Windows8カスタマイズ</a></li></ul>
<p>開発日記</p>
<ul class="list1 list-indent1"><li><a href="20152D-04.html" class="link_page_passage">2015-04</a></li></ul>
<hr class="full_hr" />
<p>ノウハウ</p>
<ul class="list1 list-indent1"><li><a href="AVRUSB_Tips.html" class="link_page_passage">AVRUSB_Tips</a></li>
<li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E6-83-85-E5-A0-B1-.html" class="link_page_passage">ＨＩＤａｓｐ情報</a></li>
<li><a href="E6-B1-8E-E7-94-A8-EF-BC-B5-EF-BC-B3-EF-BC-A2-2D-EF-BC-A9-EF-BC-AF-.html" class="link_page_passage">汎用ＵＳＢ-ＩＯ</a></li></ul>
<hr class="full_hr" />
<p>・<a href="AVRlink.html" title="AVRlink" class="link_page_passage">リンク</a></p>
<p>フリースペース</p>
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/cgi-bin/note/index.cgi" rel="nofollow">ゲストブック</a></li></ul>
<hr class="full_hr" />
<p><a href="EF-BC-B7-EF-BD-89-EF-BD-84-EF-BD-85-EF-BC-B4-EF-BD-85-EF-BD-98-EF-BD-94-.html" title="ＷｉｄｅＴｅｘｔ" class="link_page_passage">旧コンテンツ</a><br /><br />
<a href="EF-BC-B7-EF-BD-89-EF-BD-8E-EF-BC-B6-EF-BD-89-EF-BD-93-EF-BD-94-EF-BD-81-.html" class="link_page_passage">ＷｉｎＶｉｓｔａ</a><br /><br />
<a href="E3-82-A4-E3-83-B3-E3-82-BF-E3-83-BC-E3-83-95-E3-82-A7-E3-83-BC-E3-82-B9-E8-80-83-.html" class="link_page_passage">インターフェース考</a></p>
<hr class="full_hr" />
<h5>最新の20件</h5>
<div><strong>2024-07-05</strong>
<ul class="recent_list">
 <li>Newest</li>
</ul>
<strong>2024-07-01</strong>
<ul class="recent_list">
 <li><a href="node.jsE3-81-AE-E5-85-A5-E3-82-8C-E6-96-B9-.html" class="link_page_passage">node.jsの入れ方</a></li>
</ul>
<strong>2024-06-29</strong>
<ul class="recent_list">
 <li><a href="20242D-07.html" class="link_page_passage">2024-07</a></li>
</ul>
<strong>2024-06-26</strong>
<ul class="recent_list">
 <li><a href="20222D-08.html" class="link_page_passage">2022-08</a></li>
</ul>
<strong>2024-06-21</strong>
<ul class="recent_list">
 <li><a href="SMRE3-81-AA-HDDE3-83-99-E3-83-B3-E3-83-81-E3-83-9E-E3-83-BC-E3-82-AF-.html" class="link_page_passage">SMRなHDDベンチマーク</a></li>
 <li><a href="UEFI_Basic.html" class="link_page_passage">UEFI_Basic</a></li>
</ul>
<strong>2024-06-20</strong>
<ul class="recent_list">
 <li><a href="MenuBar.html" class="link_page_passage">MenuBar</a></li>
</ul>
<strong>2022-12-06</strong>
<ul class="recent_list">
 <li><a href="MSE3-82-A2-E3-82-AB-E3-82-A6-E3-83-B3-E3-83-88-E3-81-AE-WindowsE3-81-AE-CE3-83-89-E3-83-A9-E3-82-A4-E3-83-96-E3-82-92-E4-BF-AE-E5-BE-A9-E3-81-99-E3-82-8B-.html" class="link_page_passage">MSアカウントのWindowsのCドライブを修復する</a></li>
</ul>
<strong>2022-09-29</strong>
<ul class="recent_list">
 <li><a href="AndroidE3-81-AB-SSLE8-87-AA-E5-B7-B1-E7-BD-B2-E5-90-8D-E8-A8-BC-E6-98-8E-E6-9B-B8-E3-82-92-E5-85-A5-E3-82-8C-E3-82-8B-.html" class="link_page_passage">AndroidにSSL自己署名証明書を入れる</a></li>
</ul>
<strong>2022-08-31</strong>
<ul class="recent_list">
 <li><a href="E7-B0-A1-E6-98-93-E9-80-9F-E5-BA-A6-E6-B8-AC-E5-AE-9A-E3-82-B5-E3-82-A4-E3-83-88-.html" class="link_page_passage">簡易速度測定サイト</a></li>
 <li><a href="E3-83-8D-E3-83-83-E3-83-88-E3-83-AF-E3-83-BC-E3-82-AF-BOOT.html" class="link_page_passage">ネットワークBOOT</a></li>
</ul>
<strong>2022-08-26</strong>
<ul class="recent_list">
 <li><a href="E7-B0-A1-E6-98-93-E3-82-B3-E3-83-B3-E3-83-91-E3-82-A4-E3-83-AB-E3-83-99-E3-83-B3-E3-83-81-.html" class="link_page_passage">簡易コンパイルベンチ</a></li>
</ul>
<strong>2022-08-01</strong>
<ul class="recent_list">
 <li><a href="/ATMEL_AVR/html/" class="link_page_passage">FrontPage</a></li>
 <li><a href="20152D-04.html" class="link_page_passage">2015-04</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-EF-BD-98-.html" class="link_page_passage">ＨＩＤａｓｐｘ</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E6-83-85-E5-A0-B1-.html" class="link_page_passage">ＨＩＤａｓｐ情報</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-.html" class="link_page_passage">ＨＩＤａｓｐ</a></li>
 <li><a href="NEC78K.html" class="link_page_passage">NEC78K</a></li>
 <li><a href="AVRetc.html" class="link_page_passage">AVRetc</a></li>
 <li><a href="AVR_Monit.html" class="link_page_passage">AVR_Monit</a></li>
</ul>
</div>
</div>
 <div id="mainColumnWrapper">
  <div id="main-column">
   <div id="navigator"><ul><li class="selected" id="separate"><a href="">本文</a></li><li><a href="./?cmd=edit&amp;page=Newest">編集</a></li><li><a href="./?cmd=diff&amp;page=Newest">差分</a></li></ul></div>
   <div id="content">
    <h1 class="firstHeading">Newest</h1><div id="contentSub"></div>
    
<p><a href="20242D-07.html" class="link_page_passage">2024-07</a>&lt;&lt;
　<a href="FM3.html" class="link_page_passage">FM3</a>　<a href="RX62N.html" class="link_page_passage">RX62N</a>　<a href="SH2A.html" class="link_page_passage">SH2A</a>　<a href="PIC32MX.html" class="link_page_passage">PIC32MX</a></p>

<h3 id="content_1_0">最新の日記<a class="anchor_super" id="s4d25be3" href="#s4d25be3" title="s4d25be3" style="user-select:none;">&dagger;</a></h3>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_1"><a href="20242D-07.html#r74b56b4" title="2024-07" class="link_page_passage">SC/MP</a> はもう飽きたので・・・<a class="anchor_super" id="ic479845" href="#ic479845" title="ic479845" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>流行りのローカル人工知能(Ollama)をChatGPTインターフェース(LibreChat)で動かす動かし方、</li>
<li>みたいな記事を書いたら需要はあるんだろうか。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>そのまえに、ローカルLLMって、ほんとに需要はあるんだろうか。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>いやいや、それよりも、このページって、<strong>誰か読んでたりするんだろうか？？</strong></li></ul>
<p><br /></p>
<p>疑問は尽きない</p>
<ul class="list1 list-indent1"><li>Github-Pagesって、なんらかのCGI掲示板置けないのかな？JavaScriptで頑張るとか・</li>
<li>データをどうするかだな。PHPとか動かないしサーバーサイドのデータ書き換えは無理だよな。</li>
<li>レンサバVPSは一応あるんだけど、スパム攻撃が酷いのでポートを閉じてしまった・・・・</li></ul>
<p>　----&gt; 記事を書いてしまった： <a href="https://qiita.com/iruka/items/323dc790adef946fe855" rel="nofollow">ブラウザJavaScriptだけで、CGI掲示板ぽいやつを作る</a></p>
<p><br /></p>
<ul class="list1 list-indent1"><li>ローカル人工知能(Ollama)をChatGPTインターフェース(LibreChat)で動かす動かし方</li>
<li>記事を書こうとしているんだけど、再現インストールで<a href="node.jsE3-81-AE-E5-85-A5-E3-82-8C-E6-96-B9-.html" class="link_page_passage">node.jsの入れ方</a>が分かっていない俺ガイル。</li></ul>
<p>なんで前はインストール出来たんだ・・・</p>
<p><br /></p>
<p><strong>あ、人工知能（Co-Pilotさん）って、もう、だめかもね</strong></p>
<ul class="list1 list-indent1"><li>ニュースソースはこれ:
<div class="ie5"><table class="style_table" cellspacing="1" border="0">
<tr class="style_tr"><td class="style_td"><a href="https://gazlog.jp/entry/windows11-copilot-tonedown/" rel="nofollow">https://gazlog.jp/entry/windows11-copilot-tonedown/</a></td></tr>
</table></div></li>
<li>MicrosoftがWindows 11へのCopilot統合を取りやめ。相当不評だった？
<ul class="list2 list-indent1"><li>なんかもう、<strong>「お前を消す方法」</strong> のオンパレードが見える・・・</li></ul></li></ul>
<ul class="list1 list-indent1"><li>PCを勝手に操作すな、って話かなぁ</li>
<li>自分も、Win10/11入れたら、真っ先にやることは OneDriveのアンインストールだからなぁ</li></ul>
<p><br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_2">今日の、教訓（ダジャレではない）<a class="anchor_super" id="hc82f917" href="#hc82f917" title="hc82f917" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>Ubuntu 22.04 ---&gt; 24.04 へのアプグレは鬼門です。</li>
<li>Ubuntu 22.04 上で動いている Ubuntu20.04コンテナ内で、カーネルモジュールバージョンに強く依存するコマンドやライブラリを動かしてはいけません（動きません）
<ul class="list2 list-indent1"><li>当然だろがー。</li></ul></li></ul>
<ul class="list1 list-indent1"><li>IPv6 難しすぎーー。</li></ul>
<p><br /><br />
<br /><br />
<br /><br />
<br /></p>
<p><br /><br />
<br /><br />
<strong>目次</strong></p>
<div class="contents">
<a id="contents_1"></a>
<ul class="list2 list-indent1"><li><a href="#s4d25be3">最新の日記</a></li></ul>
<ul class="list1 list-indent1"><li><a href="#ic479845">SC/MP はもう飽きたので・・・</a></li>
<li><a href="#hc82f917">今日の、教訓（ダジャレではない）</a></li>
<li><a href="#deca03ff">title: 今流行のローカルLLM（人工知能）をWebブラウザーからチャット風に気軽に使いたい</a></li>
<li><a href="#k99a5994">概要</a></li>
<li><a href="#ef7685ca">前提条件</a></li>
<li><a href="#l9bd67ee">導入手順</a>
<ul class="list2 list-indent1"><li><a href="#k6da999d">(1) Ollama の導入</a></li>
<li><a href="#oa8ccd9b">(2) Node.jsを導入</a></li>
<li><a href="#vac54277">(3) MongoDBを導入</a></li>
<li><a href="#q7ee5527">(4) LibreChatの導入</a></li>
<li><a href="#xe614149">(5) LibreChatの設定</a></li></ul></li>
<li><a href="#j21daaa8">人工知能 gemma2 の回答例</a></li>
<li><a href="#r41051dc">参考</a></li></ul>
</div>

<p><br /></p>


<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_3">title: 今流行のローカルLLM（人工知能）をWebブラウザーからチャット風に気軽に使いたい<a class="anchor_super" id="deca03ff" href="#deca03ff" title="deca03ff" style="user-select:none;">&dagger;</a></h2>
<p>tags: Linux ollama librechat LLM</p>

<p>以下、もうだいぶ加筆したので、<a href="https://qiita.com/iruka/items/4a19a63e5e0c341e4466" rel="nofollow">キータ</a>のほうを読んでください。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_4">概要<a class="anchor_super" id="k99a5994" href="#k99a5994" title="k99a5994" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>ローカルLLM（GoogleのGemma2、MSのPhi3、Qwen、cohere Command-R、・・・等）はどんどん賢くなりつつありますが、自分のサーバー上で動かすなら電気代だけで済みますし、レート制限や毎月課金もありません。</li></ul>
<ul class="list1 list-indent1"><li>おうちLinuxサーバー上にサクッとインストール出来る人工知能ライブラリ Ollama に、LibreChatという、外見ChatGPTそっくりさんのWeb UI を組み合わせて、ローカルLLMサーバーを作成する手順を解説していきます。</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_5">前提条件<a class="anchor_super" id="ef7685ca" href="#ef7685ca" title="ef7685ca" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>Linuxは Ubuntu 22.04 LTS が動いていることを前提に話を進めます。</li></ul>
<ul class="list1 list-indent1"><li>導入手順は、大きく分けて、Ollama のインストール（１行コマンドを打つだけでサクッと終わります）と、LibreChat のインストールの２段階があります。</li>
<li>LibreChatのインストールの前準備として、
<pre>1)Node.js を導入する
2)MongoDB を導入する</pre></li>
<li>が必要ですが、これも手順の中で説明します。</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_6">導入手順<a class="anchor_super" id="l9bd67ee" href="#l9bd67ee" title="l9bd67ee" style="user-select:none;">&dagger;</a></h2>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_7">(1) Ollama の導入<a class="anchor_super" id="k6da999d" href="#k6da999d" title="k6da999d" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>一番簡単なので、こいつから行きます。</li></ul>
<div class="ie5"><table class="style_table" cellspacing="1" border="0">
<tr class="style_tr"><td class="style_td"><a href="https://ollama.com/" rel="nofollow">https://ollama.com/</a></td></tr>
</table></div>
<ul class="list1 list-indent1"><li>書いてある通りにします。<br />
```
<pre>$ curl -fsSL https://ollama.com/install.sh | sh</pre>
```</li></ul>
<p>これだけです。</p>
<ul class="list1 list-indent1"><li>インストール出来たら<br />
```
<pre>$ ollama run gemma2</pre>
```</li></ul>
<ul class="list1 list-indent1"><li>これだけで、gemma2 がコマンドラインで動きます。</li>
<li>初回だけ、人工知能Gemma2: 9B のモデルデータのダウンロードが入ります。(5.5GB)</li>
<li>二回目からは、すぐに走ります。</li></ul>
<ul class="list1 list-indent1"><li>nVidiaのグラボ（と、nVidiaサイトから導入したCUDAのドライバー)がLinuxに導入済であれば、そのままグラボを認識してGPUで走ります。</li>
<li>グラボ無しのLinuxの場合は、CPUのみで推論が実行されます。（やや遅いです）</li>
<li>グラボは、メモリー容量があればあるほど良いです。自分は、安物RTX-3060 (12GB) を挿してます。</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_8">(2) Node.jsを導入<a class="anchor_super" id="oa8ccd9b" href="#oa8ccd9b" title="oa8ccd9b" style="user-select:none;">&dagger;</a></h3>
<p>（nvmも同時に入ります）</p>
<ul class="list1 list-indent1"><li>Node.js 本家に書いてある通りにします。</li>
<li><a href="https://nodejs.org/en/download/package-manager" rel="nofollow">https://nodejs.org/en/download/package-manager</a></li>
<li>とりあえず、最新版 (Ver 22.3.0 current)  On Linux With NVM でいきます。</li></ul>
<p>```</p>
<pre># installs nvm (Node Version Manager)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
# download and install Node.js (you may need to restart the terminal)
nvm install 22
# verifies the right Node.js version is in the environment
node -v # should print `v22.3.0`
# verifies the right NPM version is in the environment
npm -v # should print `10.8.1`</pre>
<p>```</p>
<ul class="list1 list-indent1"><li>罠としては、<br />
```
<pre>curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash</pre>
```<br />
したあと、一回ログアウトして入りなおすか、bash にシェルを読ませてPATHを追加しないと、次の<br />
```
<pre>nvm install 22</pre>
```<br />
が動きません。</li></ul>
<ul class="list1 list-indent1"><li>あと、node.jsの導入先dirは、
<pre>$(HOME)/.nvm/versions/node/v22.3.0/bin/node</pre></li>
<li>みたいな場所になるようです。</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_9">(3) MongoDBを導入<a class="anchor_super" id="vac54277" href="#vac54277" title="vac54277" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>LibreChat公式 より<br />
<a href="https://www.librechat.ai/docs/configuration/mongodb/mongodb_community" rel="nofollow">https://www.librechat.ai/docs/configuration/mongodb/mongodb_community</a></li></ul>
<ul class="list1 list-indent1"><li>MongoDB Community を導入します（例） Ubuntu22.04の apt にリポジトリ、キーを追加して、 apt install です。</li></ul>
<p>```</p>
<pre>curl -fsSL https://www.mongodb.org/static/pgp/server-7.0.asc | \
  sudo gpg -o /usr/share/keyrings/mongodb-server-7.0.gpg \
  --dearmor

echo &quot;deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-7.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/7.0 multiverse&quot; | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list

apt update

apt-get install -y mongodb-org </pre>
<p>```</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_10">(4) LibreChatの導入<a class="anchor_super" id="q7ee5527" href="#q7ee5527" title="q7ee5527" style="user-select:none;">&dagger;</a></h3>
<p>（Dockerのほうは無視して、普通にLinuxにローカルインストールします）</p>
<ul class="list1 list-indent1"><li>LibreChat 公式より、</li></ul>
<div class="ie5"><table class="style_table" cellspacing="1" border="0">
<tr class="style_tr"><td class="style_td"><a href="https://www.librechat.ai/docs/quick_start/local_setup" rel="nofollow">https://www.librechat.ai/docs/quick_start/local_setup</a></td></tr>
</table></div>
<ul class="list1 list-indent1"><li>具体的には、GitHubからLibreChatをまるっと取ってきます。</li></ul>
<p>```</p>
<pre>git clone https://github.com/danny-avila/LibreChat.git</pre>
<p>```</p>
<ul class="list1 list-indent1"><li>次に、cloneしたディレクトリに cd して、環境ファイル .env をテンプレートからコピーして作ります。</li></ul>
<p>```</p>
<pre>cd LibreChat

cp .env.example .env

### Important: Edit the newly created .env file to update the MONGO_URI
### with your own MongoDB instance URI.

# Install dependencies
npm ci

# Build the Frontend
npm run frontend

# Start LibreChat!
npm run backend

# Visit http://localhost:3080/</pre>
<p>```</p>
<ul class="list1 list-indent1"><li>MongoDB のURIとかはなにも弄らなくてOkだった気がします。気になるようでしたら、.envの中を確認してください</li>
<li>あとは、nodejsの npm コマンドに全部任せて、依存を更新して、実行です。</li></ul>
<ul class="list1 list-indent1"><li>このLinuxの <a href="http://localhost:3080/" rel="nofollow">http://localhost:3080/</a> で動いているはずです。</li></ul>
<ul class="list1 list-indent1"><li>Linuxを再起動した場合は、
<pre>npm run backend</pre></li>
<li>これだけで起動します。</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_11">(5) LibreChatの設定<a class="anchor_super" id="xe614149" href="#xe614149" title="xe614149" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>Ollamaは今年初めぐらいにAPIのエンドポイントがOpenAI互換になったので、LibreChatからOllamaが動いているマシンのURIを指定するだけで、連携できます。一応この説明文書では、同じLinuxで動いていることにしているので、localhostでいいのかな。</li>
<li>別マシンのOllamaにアクセスする場合でもLibreChat側のyamlではURIを合わせるだけでいいですが、Ollama（推論）側では アクセスするIP、ポートを 127.0.0.1 ではなく、0.0.0.0 にして他のマシンからも接続できるようにしておきます。（編集ファイルは、 /etc/systemd/system/ollama.server ）</li></ul>
<p>```</p>
<pre>[Service]
ExecStart=/usr/local/bin/ollama serve
User=ollama
Group=ollama
Restart=always
RestartSec=3
Environment=&quot;PATH=略&quot;
Environment=&quot;OLLAMA_HOST=0.0.0.0:11434&quot;
Environment=&quot;OLLAMA_FLASH_ATTENTION=True&quot;</pre>
<p>```</p>
<ul class="list1 list-indent1"><li>&quot;OLLAMA_FLASH_ATTENTION=True&quot; は、Qwen2 がうまく動かなかったときのおまじないで、別に無くても問題ありません</li></ul>
<ul class="list1 list-indent1"><li>自分の場合、librechat.yaml に、以下のような項目を追加して、自分のローカルLLMを足しました。</li></ul>
<p>```</p>
<pre>   - name: &quot;Ollama&quot;
     apiKey: &quot;ollama&quot;
     # use 'host.docker.internal' instead of localhost if running LibreChat in a docker container
     #baseURL: &quot;http://localhost:11434/v1/chat/completions&quot;
     baseURL: &quot;http://192.168.9.99:11434/v1/chat/completions&quot;
     models:
       default: [
         &quot;llama2&quot;,
         &quot;mistral&quot;,
         &quot;codellama&quot;,
         &quot;dolphin-mixtral&quot;,
         &quot;mistral-openorca&quot;
         ]
       # fetching list of models is supported but the name field must start
       # with ollama (case-insensitive), as it does in this example.
       fetch: true
     titleConvo: true
     titleModel: &quot;current_model&quot;
     summarize: false
     summaryModel: &quot;current_model&quot;
     forcePrompt: false
     modelDisplayLabel: &quot;Ollama&quot;</pre>
<p>```</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_12">人工知能 gemma2 の回答例<a class="anchor_super" id="j21daaa8" href="#j21daaa8" title="j21daaa8" style="user-select:none;">&dagger;</a></h2>
<p>あなた：</p>
<p>銀河系から、マゼラン星雲へ旅をしています。<br />
孤独の寂しさをまぎらわす方法を教えてください</p>
<p>ollama ：</p>
<p>銀河系からマゼラン星雲へ、なんて壮大な旅ですね！孤独な気持ち、よく分かります。宇宙の広がりの中で、自分だけの時間と空間を過ごすのは、時に寂しくなるものです。</p>
<p>でも、大丈夫！孤独を乗り越える方法はたくさんありますよ。旅の途中で、あなたを励ましてくれる方法をいくつか提案させてください。</p>
<p>1. 宇宙の美しさに浸る:<br />
あなたは、銀河系からマゼラン星雲へ旅しているという、かけがえのない経験をしているのです。<br />
宇宙の壮大なスケール、星々の光り輝き、そして未知の天体たちを目の当たりにする喜びを味わってください。</p>
<p>日誌をつける: 毎日、見た景色、感じたこと、考えたことを書き留めてみましょう。あなたの旅の記録となり、後から振り返ると温かい気持ちになれるはずです。<br />
星空観察: マゼラン星雲に近づくにつれて、銀河系の景色も変わってきます。今まで見たことのない星々や星座に出会えるかもしれません。星図を広げて、天体を探索してみるのもおすすめです。<br />
宇宙音楽を聴く: 壮大な宇宙をイメージさせる音楽を聴きながら、旅の気分を高めましょう。宇宙の神秘的な雰囲気に浸り、心を落ち着かせましょう。<br />
2. 創造性を活かす:<br />
宇宙空間での自由な時間は、あなたの創造性を刺激するチャンスです。</p>
<p>詩や短編小説を書く: 宇宙での体験や感じたことを、言葉で表現してみましょう。あなたの旅の物語は、きっと人々を感動させるでしょう。<br />
宇宙旅行記を作る: 写真や動画をまとめ、あなたの壮大な旅を記録してみましょう。旅行記を通して、多くの人とあなたの体験を共有できるかもしれません。<br />
宇宙アートを描く: 宇宙の美しさ、広がり、そして神秘感を、あなたの感性で表現してみましょう。宇宙のエネルギーをチャージし、あなた自身の創造性を開花させてください。<br />
3. 未来への夢を描き続ける:</p>
<p>マゼラン星雲へ行く目的、あなた自身の夢を忘れないようにしましょう。</p>
<p>目標を明確にする: マゼラン星雲での探検、研究、そしてあなたの夢の実現に向けて、具体的な目標を設定しましょう。目標があることで、旅のモチベーションを高く保つことができます。<br />
未来の自分を想像する: マゼラン星雲での探検を終えたあなた、そしてその先の未来を想像してみましょう。夢を実現するために、今できることを一つずつ進めていきましょう。<br />
ポジティブな思考を持つ: 旅の途中で困難に直面しても、諦めないでください。困難は乗り越えることで、あなたを成長させ、より強い精神力を育みます。ポジティブな思考を保ち、未来への希望を捨てずに進みましょう。<br />
あなたにとって、マゼラン星雲への旅が、かけがえのない体験となることを心より願っています。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_13">参考<a class="anchor_super" id="r41051dc" href="#r41051dc" title="r41051dc" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>ollama と LibreChat を連携させる<br />
<a href="https://blog.itod.dev/story/text-generation-local/" rel="nofollow">https://blog.itod.dev/story/text-generation-local/</a></li></ul>
<ul class="list1 list-indent1"><li>ollama で使える人工知能モデルの一覧<br />
<a href="https://github.com/ollama/ollama?tab=readme-ov-file#model-library" rel="nofollow">https://github.com/ollama/ollama?tab=readme-ov-file#model-library</a><br />
<a href="https://ollama.com/library" rel="nofollow">https://ollama.com/library</a></li></ul>
<p>HuggingFace みたいに、アカウント取得したり、モデル使用許諾を取ったりとかなしで、いきなりコマンドラインから、</p>
<p>```</p>
<pre>$ ollama run LLM名:サイズ</pre>
<p>```</p>
<p>みたいな感じで実行できます。</p>
<p>雑多情報源</p>
<p>なんJ 避難所2	<a href="https://mercury.bbspink.com/test/read.cgi/onatech/1714642045/" rel="nofollow">https://mercury.bbspink.com/test/read.cgi/onatech/1714642045/</a><br />
なんJ 避難所3	<a href="https://mercury.bbspink.com/test/read.cgi/onatech/1717886234/" rel="nofollow">https://mercury.bbspink.com/test/read.cgi/onatech/1717886234/</a><br />
うみゆきさん Twtter <a href="https://twilog.togetter.com/umiyuki_ai" rel="nofollow">https://twilog.togetter.com/umiyuki_ai</a><br />
LLMの現在 いもす様	 <a href="https://speakerdeck.com/pfn/llmnoxian-zai" rel="nofollow">https://speakerdeck.com/pfn/llmnoxian-zai</a></p>
   </div>
  </div>
 </div>
 <div style="clear:both;height:1em;"></div>
 <div id="logo"><a href="/ATMEL_AVR/html/" style="background-image: url(image/title.jpg);"></a></div>
 <div id="personal"><ul><li class="login"><a href="http://">ログインまたはアカウント作成</a></li></ul></div>
 <div id="footer">
  <div id="f-officialico">
   <a href="http://pukiwiki.sourceforge.jp/"><img src="../image/b_pukiwiki.official.png" alt="PukiWiki-official" /></a>
  </div>
  <div id="f-officialdevico">
   <a href="http://pukiwiki.sourceforge.jp/dev/"><img src="../image/b_pukiwiki.dev.png" alt="PukiWiki-dev" /></a>
  </div>
  <div id="f-list">
   <ul><li id="lastmod">Last-modified: 2024-07-05 (金) 18:31:52<span class="page_passage" data-mtime="2024-07-05T18:31:52+09:00"></span></li><li>Site admin: <a href="http://pukiwiki.example.com/">anonymous</a></li>    <li>Powered by PukiWiki</li>
    <li><a href="http://www.luntf.com/">Monobook for PukiWiki</a></li>
   </ul>
  </div>
  <div style="clear:both;"></div>
 </div>
</div>
</body>
</html>
