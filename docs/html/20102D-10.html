<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">

<head>
 <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
 <title>2010-10 - PukiWiki</title>

<!---
 <link rel="stylesheet" media="screen and (max-width:768px)" href="../skin/180wiki-sp.css" />

 --->

 <link rel="stylesheet" media="screen and (max-width:768px)" href="../skin/monobook/mobile.css" />
 <link rel="stylesheet" media="screen and (min-width:769px)" href="../skin/monobook/monobook.css" />

 <link rel="stylesheet" type="text/css" media="print" href="../skin/monobook/monobook.print.css" />
 <link rel="alternate" type="application/rss+xml" title="RSS" href="./?cmd=rss" />

 <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>
<div id="globalWrapper">
 <div id="menubar">
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/html/" title="FrontPage" class="link_page_passage" data-mtime="2022-08-01T12:48:11+09:00">Ｔｏｐ</a></li></ul>
<hr class="full_hr" />
<p><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-EF-BD-98-.html" class="link_page_passage" data-mtime="2022-08-01T10:38:55+09:00">ＨＩＤａｓｐｘ</a></p>
<ul class="list1 list-indent1"><li><a href="EF-BC-A4-EF-BD-8F-EF-BD-97-EF-BD-8E-EF-BC-AC-EF-BD-8F-EF-BD-81-EF-BD-84-.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">ＤｏｗｎＬｏａｄ</a></li>
<li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E9-AB-98-E9-80-9F-E5-8C-96-.html" class="link_page_passage" data-mtime="2022-07-25T21:56:43+09:00">ＨＩＤａｓｐ高速化</a></li>
<li><strong><a href="20222D-08.html" title="2022-08" class="link_page_passage" data-mtime="2022-12-06T14:55:12+09:00">開発日記</a></strong> <a href="SiteMap.html" title="SiteMap" class="link_page_passage" data-mtime="2022-07-31T15:21:46+09:00">ログ</a></li></ul>
<p><a href="E5-88-B6-E4-BD-9C-.html" class="link_page_passage" data-mtime="2013-04-29T09:29:29+09:00">制作</a></p>
<p><a href="AVRetc.html" title="AVRetc" class="link_page_passage" data-mtime="2022-08-01T10:38:10+09:00">ＡＶＲ関係</a></p>
<ul class="list1 list-indent1"><li><a href="AVR_Monit.html" class="link_page_passage" data-mtime="2022-08-01T10:38:01+09:00">AVR_Monit</a></li>
<li><a href="AVR_term.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">AVR_term</a></li>
<li><a href="W32_term.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">W32_term</a></li>
<li><a href="HIDmon88.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">HIDmon88</a></li>
<li><a href="HIDtester.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">HIDtester</a></li>
<li><a href="usbRS232.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">usbRS232</a></li>
<li><a href="Arduino2313.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">Arduino2313</a></li>
<li><a href="E3-83-87-E3-82-B8-E3-82-BF-E3-83-AB-E3-83-86-E3-82-B9-E3-82-BF-E3-83-BC-.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">デジタルテスター</a></li>
<li><a href="ATmega88E7-94-9F-E6-B4-BB-.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">ATmega88生活</a></li>
<li><a href="KeyBoardE3-83-9E-E3-83-8B-E3-82-A2-.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">KeyBoardマニア</a></li>
<li><a href="KeyBoardE3-83-9E-E3-83-8B-E3-82-A2-II.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">KeyBoardマニアII</a></li>
<li><a href="Arduino400.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">Arduino400</a></li>
<li><a href="PICspx.html" title="PICspx" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">PICライター</a></li>
<li><a href="hid_blaster.html" title="hid_blaster" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">ARMライター</a></li>
<li><a href="E8-B5-A4-E5-A4-96-E7-B7-9A-E3-83-AA-E3-83-A2-E3-82-B3-E3-83-B3-.html" class="link_page_passage" data-mtime="2014-12-01T23:50:24+09:00">赤外線リモコン</a></li></ul>
<p><a href="ARM.html" class="link_page_passage" data-mtime="2014-06-23T17:20:51+09:00">ARM</a></p>
<ul class="list1 list-indent1"><li><a href="armon.html" title="armon" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">STM32ブートローダー</a></li>
<li><a href="stm32f103.html" title="stm32f103" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">STM8S-Discovery改造</a></li>
<li><a href="stm8s_blaster.html" title="stm8s_blaster" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">STM8S-OpenOCDライター</a></li>
<li><a href="LPCXpresso.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">LPCXpresso</a></li>
<li><a href="lpc2D-armon.html" title="lpc-armon" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">LPC用ブートローダー</a></li>
<li><a href="LPCUSB.html" title="LPCUSB" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">NXP用LPCUSB</a></li>
<li><a href="ARM7mon.html" title="ARM7mon" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">NXP用ブートローダー</a></li>
<li><a href="LPC1114.html" title="LPC1114" class="link_page_passage" data-mtime="2012-09-12T22:43:19+09:00">MARY基板</a></li>
<li><a href="LPC1114FN28.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">LPC1114FN28</a></li>
<li><a href="arm_blaster.html" title="arm_blaster" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">OpenOCD　JTAGアダプター</a></li>
<li><a href="openocd2D-build.html" title="openocd-build" class="link_page_passage" data-mtime="2011-11-25T22:47:41+09:00">OpenOCDビルド方法</a></li>
<li><a href="arm2D-gcc.html" title="arm-gcc" class="link_page_passage" data-mtime="2011-11-27T16:31:48+09:00">arm-gccビルド方法</a></li>
<li><a href="mapleIDE.html" title="mapleIDE" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">mapleIDEの改造</a></li>
<li><a href="libmapleE3-81-A7-E4-BB-AE-E6-83-B3-COM.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">libmapleで仮想COM</a></li></ul>
<p>PIC32</p>
<ul class="list1 list-indent1"><li><a href="PIC32MX.html" class="link_page_passage" data-mtime="2015-05-02T16:17:40+09:00">PIC32MX</a></li>
<li><a href="Pinguino.html" title="Pinguino" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">Pinguinoで遊ぼう</a></li>
<li><a href="HIDBootX.html" title="HIDBootX" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">ブートローダーを作る</a></li>
<li><a href="uartflash32.html" title="uartflash32" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">シリアルブートローダー</a></li>
<li><a href="PIC32MX_USBCDC.html" title="PIC32MX_USBCDC" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">USB仮想シリアル</a></li>
<li><a href="USB_CUSTOM.html" title="USB_CUSTOM" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">USBカスタムデバイス</a></li>
<li><a href="PIC32mon.html" title="PIC32mon" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">USB簡易モニター</a></li>
<li><a href="USBE3-82-AA-E3-82-B7-E3-83-AD-E3-82-B9-E3-82-B3-E3-83-BC-E3-83-97-.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">USBオシロスコープ</a></li>
<li><a href="USB_HOST.html" title="USB_HOST" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">USBホスト</a>　</li>
<li><a href="Bluetooth.html" title="Bluetooth" class="link_page_passage" data-mtime="2014-09-27T22:53:38+09:00">PIC32でBluetooth</a>　</li>
<li><a href="USBAudio.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">USBAudio</a>　</li>
<li><a href="USBStudy.html" class="link_page_passage" data-mtime="2014-11-20T22:01:19+09:00">USBStudy</a>　</li>
<li><a href="pic32vga.html" title="pic32vga" class="link_page_passage" data-mtime="2015-02-01T14:32:31+09:00">VGA出力に挑戦</a></li>
<li><a href="tinyBasic2.html" title="tinyBasic2" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">BASICを動かす</a></li>
<li><a href="WinUSB.html" class="link_page_passage" data-mtime="2013-05-10T22:28:35+09:00">WinUSB</a>　</li>
<li><a href="PIC32MXcust.html" title="PIC32MXcust" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">勝手に改蔵*PIC32</a></li></ul>
<p>PIC18F</p>
<ul class="list1 list-indent1"><li><a href="pic18boot.html" title="pic18boot" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">HIDブートローダー</a></li>
<li><a href="pic18spx.html" title="pic18spx" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">AVR/PIC両用ライター</a></li>
<li><a href="pic18blaster.html" title="pic18blaster" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">ARMライター</a></li>
<li><a href="pic18monit.html" title="pic18monit" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">usb汎用クラス</a></li>
<li><a href="usbserial.html" title="usbserial" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">usbシリアル変換</a></li>
<li><a href="pic18hidkey.html" title="pic18hidkey" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">usbキーボード変換</a></li>
<li><a href="sdcc.html" title="sdcc" class="link_page_passage" data-mtime="2009-09-25T17:26:22+09:00">sdccを使いこなす</a></li>
<li><a href="mcc18.html" title="mcc18" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">mcc18を使いこなす</a></li>
<li><a href="HIDmon2D-2550.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">HIDmon-2550</a></li>
<li><a href="HIDmon2D-14K50.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">HIDmon-14K50</a></li>
<li><a href="PICmonitor.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">PICmonitor</a></li></ul>
<p>試行錯誤の記録</p>
<ul class="list1 list-indent1"><li><a href="UBW.html" title="UBW" class="link_page_passage" data-mtime="2009-04-16T22:42:14+09:00">UBWを試す</a></li>
<li><a href="HIDboot.html" title="HIDboot" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">旧HIDboot</a></li>
<li><a href="PIC18F2550.html" title="PIC18F2550" class="link_page_passage" data-mtime="2010-02-17T16:23:41+09:00">PIC18F2550試用記</a></li>
<li><a href="PIC18F4550.html" title="PIC18F4550" class="link_page_passage" data-mtime="2009-05-06T01:05:20+09:00">PIC18F4550試用記</a></li></ul>
<p>その他マイコン</p>
<ul class="list1 list-indent1"><li><a href="NEC78K.html" class="link_page_passage" data-mtime="2022-08-01T10:38:19+09:00">NEC78K</a></li>
<li><a href="RX62N.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">RX62N</a></li>
<li><a href="SH2A.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">SH2A</a></li>
<li><a href="EF-BC-A8-EF-BC-98-.html" class="link_page_passage" data-mtime="2010-04-28T09:27:01+09:00">Ｈ８</a></li>
<li><a href="FM3.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">FM3</a></li>
<li><a href="ubuntuXP.html" title="ubuntuXP" class="link_page_passage" data-mtime="2014-06-22T14:58:37+09:00">XPからubuntuに乗り換え</a></li>
<li><a href="Android.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">Android</a></li>
<li><a href="Xen2D-hypervisor.html" class="link_page_passage" data-mtime="2015-01-22T18:20:53+09:00">Xen-hypervisor</a></li>
<li><a href="Windows8E3-82-AB-E3-82-B9-E3-82-BF-E3-83-9E-E3-82-A4-E3-82-BA-.html" class="link_page_passage" data-mtime="2012-12-06T13:25:35+09:00">Windows8カスタマイズ</a></li></ul>
<p>開発日記</p>
<ul class="list1 list-indent1"><li><a href="20152D-04.html" class="link_page_passage" data-mtime="2022-08-01T10:41:06+09:00">2015-04</a></li></ul>
<hr class="full_hr" />
<p>ノウハウ</p>
<ul class="list1 list-indent1"><li><a href="AVRUSB_Tips.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">AVRUSB_Tips</a></li>
<li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E6-83-85-E5-A0-B1-.html" class="link_page_passage" data-mtime="2022-08-01T10:38:45+09:00">ＨＩＤａｓｐ情報</a></li>
<li><a href="E6-B1-8E-E7-94-A8-EF-BC-B5-EF-BC-B3-EF-BC-A2-2D-EF-BC-A9-EF-BC-AF-.html" class="link_page_passage" data-mtime="2008-10-13T03:47:40+09:00">汎用ＵＳＢ-ＩＯ</a></li></ul>
<hr class="full_hr" />
<p>・<a href="AVRlink.html" title="AVRlink" class="link_page_passage" data-mtime="2010-11-02T22:35:53+09:00">リンク</a></p>
<p>フリースペース</p>
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/cgi-bin/note/index.cgi" rel="nofollow">ゲストブック</a></li></ul>
<hr class="full_hr" />
<p><a href="EF-BC-B7-EF-BD-89-EF-BD-84-EF-BD-85-EF-BC-B4-EF-BD-85-EF-BD-98-EF-BD-94-.html" title="ＷｉｄｅＴｅｘｔ" class="link_page_passage" data-mtime="2022-07-31T15:28:50+09:00">旧コンテンツ</a><br />
<a href="EF-BC-B7-EF-BD-89-EF-BD-8E-EF-BC-B6-EF-BD-89-EF-BD-93-EF-BD-94-EF-BD-81-.html" class="link_page_passage" data-mtime="2008-05-17T00:51:37+09:00">ＷｉｎＶｉｓｔａ</a><br />
<a href="E3-82-A4-E3-83-B3-E3-82-BF-E3-83-BC-E3-83-95-E3-82-A7-E3-83-BC-E3-82-B9-E8-80-83-.html" class="link_page_passage" data-mtime="2007-08-28T23:52:40+09:00">インターフェース考</a></p>
<hr class="full_hr" />
<h5>最新の20件</h5>
<div><strong>2022-12-06</strong>
<ul class="recent_list">
 <li><a href="MSE3-82-A2-E3-82-AB-E3-82-A6-E3-83-B3-E3-83-88-E3-81-AE-WindowsE3-81-AE-CE3-83-89-E3-83-A9-E3-82-A4-E3-83-96-E3-82-92-E4-BF-AE-E5-BE-A9-E3-81-99-E3-82-8B-.html" class="link_page_passage" data-mtime="2022-12-06T15:05:42+09:00">MSアカウントのWindowsのCドライブを修復する</a></li>
 <li><a href="20222D-08.html" class="link_page_passage" data-mtime="2022-12-06T14:55:12+09:00">2022-08</a></li>
</ul>
<strong>2022-09-29</strong>
<ul class="recent_list">
 <li><a href="AndroidE3-81-AB-SSLE8-87-AA-E5-B7-B1-E7-BD-B2-E5-90-8D-E8-A8-BC-E6-98-8E-E6-9B-B8-E3-82-92-E5-85-A5-E3-82-8C-E3-82-8B-.html" class="link_page_passage" data-mtime="2022-09-29T22:10:56+09:00">AndroidにSSL自己署名証明書を入れる</a></li>
</ul>
<strong>2022-09-01</strong>
<ul class="recent_list">
 <li><a href="UEFI_Basic.html" class="link_page_passage" data-mtime="2022-09-01T20:22:14+09:00">UEFI_Basic</a></li>
</ul>
<strong>2022-08-31</strong>
<ul class="recent_list">
 <li><a href="SMRE3-81-AA-HDDE3-83-99-E3-83-B3-E3-83-81-E3-83-9E-E3-83-BC-E3-82-AF-.html" class="link_page_passage" data-mtime="2022-08-31T11:15:42+09:00">SMRなHDDベンチマーク</a></li>
 <li><a href="E7-B0-A1-E6-98-93-E9-80-9F-E5-BA-A6-E6-B8-AC-E5-AE-9A-E3-82-B5-E3-82-A4-E3-83-88-.html" class="link_page_passage" data-mtime="2022-08-31T11:11:11+09:00">簡易速度測定サイト</a></li>
 <li><a href="E3-83-8D-E3-83-83-E3-83-88-E3-83-AF-E3-83-BC-E3-82-AF-BOOT.html" class="link_page_passage" data-mtime="2022-08-31T11:09:22+09:00">ネットワークBOOT</a></li>
</ul>
<strong>2022-08-26</strong>
<ul class="recent_list">
 <li><a href="E7-B0-A1-E6-98-93-E3-82-B3-E3-83-B3-E3-83-91-E3-82-A4-E3-83-AB-E3-83-99-E3-83-B3-E3-83-81-.html" class="link_page_passage" data-mtime="2022-08-26T16:28:56+09:00">簡易コンパイルベンチ</a></li>
</ul>
<strong>2022-08-05</strong>
<ul class="recent_list">
 <li><a href="MenuBar.html" class="link_page_passage" data-mtime="2022-08-05T09:51:36+09:00">MenuBar</a></li>
</ul>
<strong>2022-08-01</strong>
<ul class="recent_list">
 <li><a href="/ATMEL_AVR/html/" class="link_page_passage" data-mtime="2022-08-01T12:48:11+09:00">FrontPage</a></li>
 <li><a href="20152D-04.html" class="link_page_passage" data-mtime="2022-08-01T10:41:06+09:00">2015-04</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-EF-BD-98-.html" class="link_page_passage" data-mtime="2022-08-01T10:38:55+09:00">ＨＩＤａｓｐｘ</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E6-83-85-E5-A0-B1-.html" class="link_page_passage" data-mtime="2022-08-01T10:38:45+09:00">ＨＩＤａｓｐ情報</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-.html" class="link_page_passage" data-mtime="2022-08-01T10:38:34+09:00">ＨＩＤａｓｐ</a></li>
 <li><a href="NEC78K.html" class="link_page_passage" data-mtime="2022-08-01T10:38:19+09:00">NEC78K</a></li>
 <li><a href="AVRetc.html" class="link_page_passage" data-mtime="2022-08-01T10:38:10+09:00">AVRetc</a></li>
 <li><a href="AVR_Monit.html" class="link_page_passage" data-mtime="2022-08-01T10:38:01+09:00">AVR_Monit</a></li>
 <li><a href="20082D-08.html" class="link_page_passage" data-mtime="2022-08-01T10:37:50+09:00">2008-08</a></li>
</ul>
<strong>2022-07-31</strong>
<ul class="recent_list">
 <li><a href="EF-BC-B7-EF-BD-89-EF-BD-84-EF-BD-85-EF-BC-B4-EF-BD-85-EF-BD-98-EF-BD-94-.html" class="link_page_passage" data-mtime="2022-07-31T15:28:50+09:00">ＷｉｄｅＴｅｘｔ</a></li>
 <li><a href="RecentDeleted.html" class="link_page_passage" data-mtime="2022-07-31T15:25:08+09:00">RecentDeleted</a></li>
</ul>
</div>
</div>
 <div id="mainColumnWrapper">
  <div id="main-column">
   <div id="navigator"><ul><li class="selected" id="separate"><a href="">本文</a></li><li><a href="./?cmd=edit&amp;page=2010-10">編集</a></li><li><a href="./?cmd=diff&amp;page=2010-10">差分</a></li></ul></div>
   <div id="content">
    <h1 class="firstHeading">2010-10</h1><div id="contentSub"></div>
    <p><a href="20102D-09.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">2010-09</a>←　→<a href="ARM.html" class="link_page_passage" data-mtime="2014-06-23T17:20:51+09:00">ARM</a>　<a href="armon.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">armon</a>　<a href="stm32f103.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">stm32f103</a>　<a href="pic18spx.html" title="pic18spx" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">ＡＶＲ／ＰＩＣ両用ライター</a>　<a href="usbserial.html" title="usbserial" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">usbシリアル変換 </a>　<a href="pic18hidkey.html" title="pic18hidkey" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">usbキーボード </a>　<a href="pic18spx.html" title="pic18spx" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">簡易ロジアナ、赤外線リモコン信号観測</a></p>
<h3 id="content_1_0">１０月：<a class="anchor_super" id="j84101cb" href="#j84101cb" title="j84101cb" style="user-select:none;">&dagger;</a></h3>
<p><br /></p>
<p><br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_1">先月のまとめ<a class="anchor_super" id="r452ccbc" href="#r452ccbc" title="r452ccbc" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li><a href="armon.html" title="armon" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">armon/armboot</a>のブラッシュアップを実施。</li>
<li><a href="20102D-09.html#xf2f8f42" title="2010-09" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">OpenOCDのWindows版ビルド</a>は成功。</li></ul>
<p><br />
<br /></p>
<p><strong>今月の目標</strong></p>
<ul class="list1 list-indent1"><li>OpenOCDの改造に着手。
<ul class="list2 list-indent1"><li>改造といってもドライバーをいじるだけ。</li>
<li>オレオレブラスターを作ってみる。</li></ul></li></ul>
<ul class="list1 list-indent1"><li>ライターばかり作ってて良く飽きないね〜。
<ul class="list2 list-indent1"><li>だってほら、ライター以外に作りたいものって、無いじゃん。（がっくり）</li></ul></li></ul>
<p><br /></p>
<div class="contents">
<a id="contents_1"></a>
<ul class="list2 list-indent1"><li><a href="#j84101cb">１０月：</a></li></ul>
<ul class="list1 list-indent1"><li><a href="#r452ccbc">先月のまとめ</a></li>
<li><a href="#lfb64294">USB-Blaster（もどき）でOpenOCD</a></li>
<li><a href="#u82c529c">OpenOCD研究:</a></li>
<li><a href="#p006f490">Android-x86 v1.6をVMWareで動かす。</a></li>
<li><a href="#j4cdba95">Toshiba AC100(dynabook AZ)にUbuntuをインストールする方法</a></li>
<li><a href="#de3aee10">OpenOCD : ドライバーの分離実装を考えてみる。</a></li>
<li><a href="#ea0b6484">LPC2388 : armon/armboot用のサンプルアプリケーションを追加</a></li>
<li><a href="#u4e8d92d">OpenOCD : ドライバーの分離実装:やや苦戦中</a></li>
<li><a href="#o6f90102">OpenOCD : オレオレブラスターをでっちあげてみた。</a></li>
<li><a href="#m63d022b">OpenOCD : オレオレブラスターの続き。</a></li>
<li><a href="#h7c5f3a9">OpenOCD : またまた挫折か？</a></li>
<li><a href="#je5bf8ce">OpenOCD : なんとなく、うまくいっているかも。</a></li>
<li><a href="#caf36a7c">v-usb本家 : vusb-20100715/example</a></li>
<li><a href="#o85ce309">OpenOCD : オレオレブラスターの第一歩が、動いた。</a></li>
<li><a href="#gec928a4">OpenOCD : STM32への書き込みに成功!</a></li>
<li><a href="#w0bdf5eb">OpenOCD : 次はATtiny2313でOpenOCD</a></li>
<li><a href="#rc586e71">OpenOCD : 次はATtiny2313でOpenOCD : その２</a></li>
<li><a href="#a6ca895a">OpenOCD : 次はATtiny2313でOpenOCD : その３</a></li>
<li><a href="#xb02edbc">CPUを設計するべからず</a></li>
<li><a href="#a6ca895a">OpenOCD : 次はATtiny2313でOpenOCD : その４</a></li>
<li><a href="#b8650a54">OpenOCD : 次はATtiny2313でOpenOCD : その５</a></li>
<li><a href="#aceb9a55">ログ</a></li>
<li><a href="#nfc6e504">OpenOCD : 次はATtiny2313でOpenOCD : 高速化完了！</a></li>
<li><a href="#o459bbc5">OpenOCD : 次はATtiny2313でOpenOCD : さらに高速化に成功。</a></li>
<li><a href="#t0c59f3a">OpenOCD : 次は何しょぅ・・・</a></li>
<li><a href="#a54e41a4">OpenOCD : 次はUSB-Blaster(もどき)用に対応してみたり。</a></li>
<li><a href="#ucbea6ca">FRISK-JTAG</a></li>
<li><a href="#qdcd472d">AVR用6PIN-ISPピンヘッダー仕様</a></li>
<li><a href="#sfc7aa67">『Windows Phone 7』がAndroidを上回る理由</a></li>
<li><a href="#g3c09efb">OpenOCD : PIC18spxファームを更新</a></li>
<li><a href="#k39423b6">OpenOCD : pic18spx ファームだけ高速化</a></li>
<li><a href="#naa391fd">OpenOCD : PIC18spxをJTAGアダプターにする。</a></li>
<li><a href="#naa391fd">OpenOCD : STBEE MINIをJTAGアダプターにする。</a></li>
<li><a href="#la5f0147">OpenOCD : 次のテーマ（予定）</a></li>
<li><a href="#jb236c8b">OpenOCD : 今度はArduino？</a></li>
<li><a href="#fa1d0bd0">Windows8はARMプロセッサ上で動作？？？</a></li>
<li><a href="#w8a4ee44">OpenOCD : Arduino版の開発はペンディング？</a></li>
<li><a href="#v0ee15bc">久々に互換機組み立て</a></li>
<li><a href="#v49556b8">Android携帯は流行るのか？</a></li>
<li><a href="#g3630380">Appleという名のガラパゴス諸島</a></li>
<li><a href="#z864e051">MacBookがさっそくバラされている件</a></li>
<li><a href="#t584b116">STM8L-Discovery</a></li>
<li><a href="#eb0f1fba">PlayStation Move Teardown</a></li>
<li><a href="#xb5aa32c">STM8S-Discovery基板を用いたOpenOCDライター</a></li>
<li><a href="#aed8dbd4">ちょっと良さげなキーボード</a></li></ul>
</div>

<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_2">USB-Blaster（もどき）でOpenOCD<a class="anchor_super" id="lfb64294" href="#lfb64294" title="lfb64294" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>OpenOCDが知らん間にFTDIのd2xx経由のUSB-Blasterをサポートしていたので、
<pre>       --enable-usb-blaster-ftd2xx </pre></li>
<li>勢いでやってみるテスト。</li></ul>
<hr class="full_hr" />
<p>まず、<a href="20102D-06.html#sec3eda2" title="2010-06" class="link_page_passage" data-mtime="2014-06-23T17:20:51+09:00">USB-Blasterとは何なのか？</a>を参照。</p>
<ul class="list1 list-indent1"><li>で、これがUSB-Blaster（もどき）。製作中のもの。</li></ul>
<p><a href="/ATMEL_AVR/jpg/PIC/usb-bl2.jpg" rel="nofollow"><img src="/ATMEL_AVR/jpg/PIC/usb-bl2.jpg" alt="/ATMEL_AVR/jpg/PIC/usb-bl2.jpg" /></a>
<a href="/ATMEL_AVR/jpg/PIC/usb-bl3.jpg" rel="nofollow"><img src="/ATMEL_AVR/jpg/PIC/usb-bl3.jpg" alt="/ATMEL_AVR/jpg/PIC/usb-bl3.jpg" /></a></p>
<ul class="list1 list-indent1"><li>部品代は
<div class="ie5"><table class="style_table" cellspacing="1" border="0"><tbody><tr><td class="style_td">PIC18F14K50</td><td class="style_td">200円</td></tr>
<tr><td class="style_td">12MHz水晶</td><td class="style_td">50円</td></tr>
<tr><td class="style_td">3.3Vレギュレータ</td><td class="style_td">100円</td></tr>
<tr><td class="style_td">USB-Bコネクタ</td><td class="style_td">40円（最近、このデカいコネクタは、<strong>珍しいUSBコネクタ</strong>と呼ばれているらしい。嘘だろ？）</td></tr>
<tr><td class="style_td">あとは金目のものは使われていない。</td><td class="style_td">（Ｂコネクタこそ、由緒正しいデバイス側のＵＳＢコネクタなのに）</td></tr>
</tbody></table></div></li></ul>
<p>実際のところ、まだ18F14K50用ファームが存在しないので、
下記の18F2550版の実装を使わせていただいている。</p>
<ul class="list1 list-indent1"><li><a href="http://sa89a.net/mp.cgi/ele/ub.htm" rel="nofollow">http://sa89a.net/mp.cgi/ele/ub.htm</a></li></ul>
<p><br /></p>
<hr class="full_hr" />
<p>準備</p>
<ul class="list1 list-indent1"><li>まず、ubuntu Linuxを用意（VMWarePlayerなどで動かせばＯＫ）</li>
<li><a href="20102D-09.html#xf2f8f42" title="2010-09" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">OpenOCDのWindows版ビルド</a>で、bootstrapまでやっておく。</li></ul>
<ul class="list1 list-indent1"><li>次、ビルドする。</li></ul>
<pre>$ ./configure \
       --build=i686-pc-linux-gnu \
       --host=i586-mingw32msvc \
       --enable-maintainer-mode \
       --enable-usb-blaster-ftd2xx \
       --enable-ft2232_ftd2xx \
       --with-ftd2xx-win32-zipdir=../libftd2xx-win32
$ make</pre>
<ul class="list1 list-indent1"><li><strong>出来た。</strong></li>
<li>USB-Blaster（もどき）18F2550実装に、LPC2388基板(interface付録)をJTAG接続。</li>
<li>おおお、<strong>接続ＯＫ。動いた。</strong></li></ul>
<ul class="list1 list-indent1"><li>telnetから操作する場合のレスポンスは、それほど悪くない。</li>
<li>しかし、かなり（転送は）遅い。</li></ul>
<ul class="list1 list-indent1"><li>USB-Blasterをサポートしている部分のソースを見たら、あんまり変わってなかった。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_3">OpenOCD研究:<a class="anchor_super" id="u82c529c" href="#u82c529c" title="u82c529c" style="user-select:none;">&dagger;</a></h2>
<pre>src/jtag/drivers/minidriver_imp.h</pre>
<ul class="list1 list-indent1"><li>ドライバーのフレームワークはこのヘッダーに書かれた関数をインプリメント
することで実装されるようだ。</li></ul>
<p><br /></p>
<pre>src/jtag/drivers/driver.c</pre>
<ul class="list1 list-indent1"><li>driver.cは、minidriver_imp.hの実装部だ。</li></ul>
<pre>src/jtag/commands.h
src/jtag/commands.c</pre>
<ul class="list1 list-indent1"><li>JTAGのコマンドをコマンドキューにためて、それをドライバーに渡して実行してもらう形式になっている。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>で、各JTAGケーブルごとに書かれたドライバー
<pre>src/jtag/drivers/*.c</pre></li>
<li>は、そのコマンドキューを解釈実行することが出来ればよい。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>さらに、解釈実行が面倒くさい場合は、ミニドライバーのようなものに委譲してしまうこともできる。
<pre>src/jtag/drivers/bitbang.c
src/jtag/drivers/bitbang.h</pre></li>
<li>これは、コマンド解釈部を書かなくても、
<pre>struct bitbang_interface {
   /* low level callbacks (for bitbang)
    */
   int (*read)(void);
   void (*write)(int tck, int tms, int tdi);
   void (*reset)(int trst, int srst);
   void (*blink)(int on);
};</pre></li>
<li>だけ実装すればＯＫだ。これを利用しているハードは
<pre>at91rm9200.c
ep93xx.c
parport.c
usb_blaster.c</pre></li></ul>
<ul class="list1 list-indent1"><li>気になったのがread,writeの単位で、たぶん１tickというか１サンプル単位のデータ(int tckとなっているけれどたぶん1bitだと思う）でIN/OUTを行っているようなので、これをUSBの１パケットに変換して送ると、１秒にたったの１０００回(最速でも１０００ビット分）しか、bitbang出来ない。</li></ul>
<ul class="list1 list-indent1"><li>だからといって、適当バッファリングを行うわけにもいかないというインターフェースだ。(バッファフラッシュのタイミングが分からない)</li>
<li>byte-blasterのようなＰＣのパラレルポートを叩く処理に接続するのであれば、このインターフェースでも充分な速度が出るのかもしれない。</li></ul>
<p><br />
<br /></p>
<ul class="list1 list-indent1"><li>もうひとつのミニドライバーは
<pre>src/jtag/drivers/bitq.c
src/jtag/drivers/bitq.h</pre></li>
<li>用意されているフレームワークは
<pre>struct bitq_interface {
   // function to enqueueing low level IO requests
   int (*out)(int tms, int tdi, int tdo_req);
   int (*flush)(void);

   int (*sleep)(unsigned long us);
   int (*reset)(int trst, int srst);

   /* delayed read of requested TDO data,
    * the input shall be checked after call to any enqueuing function
    */
   int (*in_rdy)(void);
   int (*in)(void);
};</pre></li>
<li>となっていて、これを利用するハードは
<pre>presto.c</pre></li>
<li>のみ。</li>
<li>速度的にbitbangと変わらないような気がする。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>bitbang,bitqのような簡易フレームワークを使用しないタイプのドライバーは、すべて自前で
JTAGコマンドキューを解釈実行しなければならない。
<pre>src/jtag/commands.h
src/jtag/commands.c</pre>
を参照するとよい。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_4">Android-x86 v1.6をVMWareで動かす。<a class="anchor_super" id="p006f490" href="#p006f490" title="p006f490" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>そう。今頃。</li>
<li>v2.2 froyoのisoファイルが出回っているが、遅くてだめだったのでv1.6に戻る。</li></ul>
<p>read more : <a href="Android.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">Android</a></p>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_5">Toshiba AC100(dynabook AZ)にUbuntuをインストールする方法<a class="anchor_super" id="j4cdba95" href="#j4cdba95" title="j4cdba95" style="user-select:none;">&dagger;</a></h2>
<p>ひとりぶろぐ</p>
<ul class="list1 list-indent1"><li><a href="http://hitoriblog.com/?p=1472" rel="nofollow">http://hitoriblog.com/?p=1472</a></li></ul>
<p>元ネタ</p>
<ul class="list1 list-indent1"><li><a href="http://tosh-ac100.wetpaint.com/page/Alternative+OS" rel="nofollow">http://tosh-ac100.wetpaint.com/page/Alternative+OS</a></li></ul>
<p>東芝クラウドブックの仕様</p>
<ul class="list1 list-indent1"><li><a href="http://dynabook.com/pc/catalog/cloud/100621az/spec.htm" rel="nofollow">http://dynabook.com/pc/catalog/cloud/100621az/spec.htm</a></li>
<li>Tegra 1GHz x 2 / RAM 512MB / 16GB</li>
<li>アンドロイド2.1 / マーケットに接続できないのが痛い。</li>
<li>ネットブックより少し軽いが、価格や電池の持ちはあんまり変わらない。</li></ul>
<ul class="list1 list-indent1"><li>これも<strong>残念な製品</strong>のひとつ、なのか。(NetWalkerのようなスキマ商品)</li></ul>
<p>デザインや品質は決して悪くないので、せめて、</p>
<ul class="list1 list-indent1"><li>Androidだけでなく、ubuntuもサポートしてほしい。(NetWalkerはubuntuだ)</li>
<li>電池の持ちは、もう一声欲しい（１０時間くらいは）</li>
<li>軽さも、もう一声欲しい。（ネットブックと差別化するために）</li>
<li>CPUは充分なスペックだが、RAMは1G欲しい。</li>
<li>電池の持ちをよくするための手段として、サスペンド以外に、ハイバネーションはないのか？（不明）---今時のWindows7はサスペンドして一定時間が経つとハイバネーションを行うようだ。</li></ul>
<p><br /></p>
<p>今のままだと、半値くらいにならないと買う気しない。</p>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_6">OpenOCD : ドライバーの分離実装を考えてみる。<a class="anchor_super" id="de3aee10" href="#de3aee10" title="de3aee10" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>OpenOCDのドライバーはJTAGケーブルごとにまちまちで、特にbitbang.cを利用する実装だと低速になる問題がある。</li>
<li>bitbangというのはFT232のbitbangモードのことではなく、ＰＣのパラレルポート（プリンタポート）直叩きモードのことだ。</li>
<li>昔のパソコンＯＳならいざしらず、現在のＰＣでリアルタイムに叩いて即時に反応が返ってくるようなポートはもはや存在しない。（仮想化されてしまっているのでオーバヘッドが大きい）</li>
<li>ましてや、bitbangで叩く先がUSBケーブルの向こう側になってしまう(usb_blaster.cがそうだ）ともっと悲惨で、１秒回にたったの１０００回しかポーリングできなくなってしまう。</li>
<li>ということは、なんらかのバッファリングと、JTAGケーブルの先にあるマイコン側への処理の委譲が必要になる。</li></ul>
<p><br />
では、OpenOCDとJTAGケーブルのドライバーを分離できないか考えてみることにする。</p>
<ul class="list1 list-indent1"><li>現状のOpenOCDではドライバーのダイナミックリンクをサポートしていないので、とりあえず適当なＤＬＬをつくってそっちに処理を全部任せてみる。</li></ul>
<p>メリットとして、</p>
<ul class="list1 list-indent1"><li>OpenOCDのビルドは最初に１回やっておくだけで済む。</li>
<li>DLLの差し替えは比較的簡単に出来る。（ファイルを差し替えるだけ）</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>実は、ATtiny2313にUSBなJTAGケーブルを実装できないか考えているところ。</li>
<li>現状のHIDaspxライターのファームウェアからSPIのインライン展開コードを取り除き、代わりにJTAGの信号処理プロトコルを入れることになる。</li>
<li>デバイスクラスはHIDで、転送するデータは</li></ul>
<p>コマンドパケットの内容（ベンダーリクエスト）</p>
<pre>   0      1      2      3      4      5      6      7
+------+------+---------------------------+-------------+
| req  | cmd  | 送信データ（最大４バイト）|   wlength   |
+------+------+---------------------------+-------------+</pre>
<ul class="list1 list-indent1"><li>cmd内にはJTAG送信データの有効ビット数を(1〜32の範囲で)入れておく。</li></ul>
<p>後続する受信パケット</p>
<pre>   0      1      2      3      4      5      6      7
+---------------------------+---------------------------+
|受信データ（最大４バイト） |     空き                  |
+---------------------------+---------------------------+</pre>
<ul class="list1 list-indent1"><li>１回のコントロールパケットでわずか４バイト（３２ビット）までしか処理できないが、それでも、１ビットしか処理できないUSB-Blasterよりは３２倍速いものが作れるはずだ。</li></ul>
<ul class="list1 list-indent1"><li>ATtiny2313は3.3V駆動する必要がある。(ARM側と同じ電圧にするため)</li></ul>
<ul class="list1 list-indent1"><li>PIC18Fに実装する場合は、同じくHIDであるけれどインタラプト転送で行う（エンドポイントを独立させる）ようにして、
送受信するデータは１パケットで６４バイトまでとなる。</li>
<li>もちろんPIC18FではHIDにこだわる必要はなく、CDCかGenericなデバイスにしてもっと長いストリーム単位にすることで
高速化は出来るはず。</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_7">LPC2388 : armon/armboot用のサンプルアプリケーションを追加<a class="anchor_super" id="ea0b6484" href="#ea0b6484" title="ea0b6484" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>とりあえず、vcom（仮想COM）サンプルのビルドが通るようにしてみた。</li></ul>
<p><br />
read more : <a href="ARM7mon.html" title="ARM7mon" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">NXP用armon/armboot</a></p>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_8">OpenOCD : ドライバーの分離実装:やや苦戦中<a class="anchor_super" id="u4e8d92d" href="#u4e8d92d" title="u4e8d92d" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>といっても全然たいした問題じゃないんだけど。</li>
<li>実はWindowsでDLLの呼び出し方を知らないんで、いろいろ調べ中</li></ul>
<ul class="list1 list-indent1"><li>Win32API使って良いなら、
<pre>   hDLL = LoadLibrary(&quot;mydll.dll&quot;);
   myfunc = GetProcAddress(hDLL, &quot;myfunc&quot;);
   mufunc();</pre></li>
<li>という感じなんだろうか？？？</li></ul>
<ul class="list1 list-indent1"><li>そうじゃなれれば
<pre>__declspec(dllimport) int __stdcall myfunc();</pre>
みたいなヘッダーを用意して、
<pre>myfunc();</pre></li>
<li>でいいのかな？</li></ul>
<ul class="list1 list-indent1"><li>後者のやりかただと、DLLのファイル名を指定するところがどこにもなくて、</li>
<li>DLLを作る時点で</li></ul>
<pre>dll:
      dllwrap -mwindows -mno-cygwin --enable-stdcall-fixup \
             --add-stdcall-alias -o hidmon.dll $(OBJS) -lsetupapi -Wl,--out-implib,hidmon.lib</pre>
<ul class="list1 list-indent1"><li>みたいなことをやっていた。（遠い目）</li>
<li>dllwrapについて調べればいいのか。</li></ul>
<ul class="list1 list-indent1"><li>問題は、openocdのソースツリーのMakefileの LIBS += の項目追加方法だな。</li>
<li>Makefileを手で書き換えてもconfigureしたときに上書きされるので、automakeについても勉強しないといけない。</li></ul>
<p>あー<strong>面倒面倒</strong>・・。</p>
<p><br />
ところで、話をARMに限定すればUSB-JTAGアダプターなんて、ARMチップですぐ作れそうな気がするし、実際Versaloon
がそうなんだけど、どうして皆んな作ろうとしないんだろう。</p>
<ul class="list1 list-indent1"><li>推測１）アマチュアがぼこぼこそんなものを作られると純正アダプター(ST-LinkとかLPC-Link)が売れなくなる</li>
<li>推測２）ARMチップでARMライター(デバッガー)を作るとなると、必ず<strong>鶏と卵</strong>問題が発生するので、<strong>生物がそう簡単に無から発生しない</strong>理由によって禁則事項になっている。
<ul class="list2 list-indent1"><li>つまりだ、ARMチップでARMライターを作るには、まず、別のJTAGアダプター(FT2232の奴とか)を入手する必要がある。</li>
<li>で、それを入手した途端、ARMライターを作る必要が無くなるので、誰も手がけようとしない。</li></ul></li>
<li>推測３）ライター作るの面倒くさい。
<ul class="list2 list-indent1"><li>これは確かだ。AVRライターやPICライターと違って、ARMのJTAGは面倒くさい。OpenOCDをベースにでもしないとやってられない。</li></ul></li>
<li>推測４）ライターが安く入手できるので作る必要が無い。
<ul class="list2 list-indent1"><li>半分当たっている。</li>
<li>ST-Link(2700円くらい)とかLPCXpresso(ターゲット基板込みで2800円とか)ふざけている。</li>
<li>しかし、両方とも自社のチップしか書けないとか、デバッガーと開発ツールにコードサイズ制限が掛かっていて、自由に開発できないし、当然OpenOCDでは使えない代物。</li></ul></li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_9">OpenOCD : オレオレブラスターをでっちあげてみた。<a class="anchor_super" id="o6f90102" href="#o6f90102" title="o6f90102" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>DLLの呼び出し方法は、前者の方法を採った。
<pre>Open On-Chip Debugger 0.5.0-dev (2010-10-04-20:01)
Licensed under GNU GPL v2
For bug reports, read
       http://openocd.berlios.de/doc/doxygen/bugs.html
if load
Warn : Adapter driver 'hid_blaster' did not declare which transports it allows; assuming legacy
Info : only one transport option; autoselect 'jtag'
1000 kHz
1000 kHz
adapter_nsrst_delay: 100
jtag_ntrst_delay: 100
Info : clock speed 1000 kHz
Info : JTAG tap: stm32.cpu tap/device found: 0x000000ff (mfg: 0x07f, part: 0x0000, ver: 0x0)
Warn : JTAG tap: stm32.cpu       UNEXPECTED: 0x000000ff (mfg: 0x07f, part: 0x0000, ver: 0x0)
Error: JTAG tap: stm32.cpu  expected 1 of 1: 0x3ba00477 (mfg: 0x23b, part: 0xba00, ver: 0x3)
Info : JTAG tap: stm32.bs tap/device found: 0x000000ff (mfg: 0x07f, part: 0x0000, ver: 0x0)
Warn : JTAG tap: stm32.bs       UNEXPECTED: 0x000000ff (mfg: 0x07f, part: 0x0000, ver: 0x0)
Error: JTAG tap: stm32.bs  expected 1 of 5: 0x06412041 (mfg: 0x020, part: 0x6412, ver: 0x0)
Error: JTAG tap: stm32.bs  expected 2 of 5: 0x06410041 (mfg: 0x020, part: 0x6410, ver: 0x0)
Error: JTAG tap: stm32.bs  expected 3 of 5: 0x16410041 (mfg: 0x020, part: 0x6410, ver: 0x1)
Error: JTAG tap: stm32.bs  expected 4 of 5: 0x06414041 (mfg: 0x020, part: 0x6414, ver: 0x0)
Error: JTAG tap: stm32.bs  expected 5 of 5: 0x06418041 (mfg: 0x020, part: 0x6418, ver: 0x0)
Error: Trying to use configured scan chain anyway...
Error: stm32.cpu: IR capture error; saw 0x0f not 0x01
Warn : Bypassing JTAG setup events due to errors
Warn : Invalid ACK 0 in JTAG-DP transaction
Polling target failed, GDB will be halted. Polling again in 100ms
Polling target failed, GDB will be halted. Polling again in 300ms
Polling target failed, GDB will be halted. Polling again in 700ms
Polling target failed, GDB will be halted. Polling again in 1500ms
Polling target failed, GDB will be halted. Polling again in 3100ms
Polling target failed, GDB will be halted. Polling again in 6300ms
バッチ ジョブを終了しますか (Y/N)? y</pre></li></ul>
<p>まず、</p>
<ul class="list1 list-indent1"><li>configureは --enable-dummy だけ指定して、FTDIやlibusb不要のopenocd.exeを作ってみた。</li>
<li>それだけだと、何にも出来ないopenocd.exeになるので、
<pre>src/jtag/adapter.c </pre></li>
<li>にて、jtag_interfaces[]を参照している部分（２箇所）の参照直前に、DLLを読み込む初期化関数を呼び出してみた。</li>
<li>jtag_interfaces[0]にはdummyのstructアドレスしか入っていないので、DLLが読み込まれたら、DLL側のstructのアドレス
を上書きするようにしてみた。（かなり野蛮な改造）</li>
<li>そうすると、interfaceの名前もDLL側が供給できるようになる。</li>
<li>DLLが存在しない場合はロードに失敗するので、jtag_interfaces[0]の書き換えは実行されずに、dummyドライバーが残る。</li></ul>
<ul class="list1 list-indent1"><li>で、DLL側のjtag_interface structは適当に用意してみたものの、処理関数は全部ダミーなので、上記の結果となる。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>以上、かなり適当な方法でドライバー部分を独立して開発できるようにしてみた。</li>
<li>本来なら、openocd.exeと同じディレクトリに存在するDLLを全部スキャンして、登録するようにすべきだし、
jtag_interfaces[0]を書き換えるのではなく、配列要素を追加するようにしたほうが良いだろう。</li></ul>
<ul class="list1 list-indent1"><li>しかし、ドライバーを分離してはみたものの、ドライバー実装のために、openocd側ヘッダーをいろいろ参照しなければならないという欠点に気づいた。</li>
<li>気づくの遅い。</li></ul>
<ul class="list1 list-indent1"><li>けど、Linuxを使わずに、&lt;windows.h&gt; なオレオレ環境上でドライバー開発できるのは便利だ。</li>
<li>もちろん、Linuxには<span class="noexists"><a href="./?cmd=edit&amp;page=LoadLibrary&amp;refer=2010-10">LoadLibrary</a></span>()など無いし、&lt;windows.h&gt;をインクルードしてはいけない。</li>
<li>Windows上でしか動かないが、それはそれで仕方が無いかな。</li></ul>
<p>ここまで、やっつけてみたら、OpenOCDのやる気無いUSB-Blaster対応ドライバーと同程度のものをATtiny2313で作るのは
２，３日もあれば出来る気がしてきた。（それはほとんど実用性がないけれど）</p>
<ul class="list1 list-indent1"><li>パラレルポート叩きの bitbang.c 組み込んで、(*read)()と(*write)()を実装するだけなので、簡単なはずだ。</li>
<li>その状態でとりあえず動くようにしておいて、組み込んだbitbang.cに、詳細なログを吐くデバッグコードを仕込んで、AVRでの最適実装を探ることになると思う。</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_10">OpenOCD : オレオレブラスターの続き。<a class="anchor_super" id="m63d022b" href="#m63d022b" title="m63d022b" style="user-select:none;">&dagger;</a></h2>
<p>ここまで出来た。</p>
<ul class="list1 list-indent1"><li>OpenOCDソースツリーの、src/jtag/drivers/bitbang.c と dummy.c それに必要なヘッダーのみをいただきストリート。（ぱくり）</li>
<li>Windows上のMinGWでビルドできるオレオレMakefileでビルドできるようにしてDLL作成可能にした。</li>
<li>もちろん上のLinuxでビルドしたOpenOCD.exeから読み込まれて実行できる。</li></ul>
<p>つぎに、</p>
<ul class="list1 list-indent1"><li>pic18spxのpicwriterソースツリーをぱくり。PIC18F2550に実装した、なんちゃってBitBangのソースとともにバインドしてDLL
になるようにした。</li>
<li>とりあえず全部ビルドが通るようになった。</li>
<li>openocdから、
<pre>interface hid_blaster</pre></li>
<li>とすると、DLL側のdummy.cが反応して、初期化が行なわれ、PIC18F2550に接続出来るところまで出来た。</li></ul>
<ul class="list1 list-indent1"><li>JTAG接続まで、あと一息なんだけど、</li>
<li>まだハードウェアを作っていない。（PIC,ARM単独の基板はある。JTAGケーブルとピンヘッダーがない。）</li></ul>
<p>ここで一休み。</p>
<p>ソースは、まだUPしない。</p>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_11">OpenOCD : またまた挫折か？<a class="anchor_super" id="h7c5f3a9" href="#h7c5f3a9" title="h7c5f3a9" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>ハードウェアは作った。（JTAGケーブルの配線をしただけ）</li>
<li>ソフトも書いた。</li>
<li>しかし動作しない。</li>
<li>調べてみたところ、driver(bigtang.c)に渡すjtag_command_queが、どうやらグローバル変数渡しに
なっていて、openocd本体とDLLで共有しなければならないかもしれないということが分かった。</li>
<li>このままだと大幅な改造が必要。</li></ul>
<p>だめじゃんOCD</p>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_12">OpenOCD : なんとなく、うまくいっているかも。<a class="anchor_super" id="je5bf8ce" href="#je5bf8ce" title="je5bf8ce" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>しめしめ。</li></ul>
<ul class="list1 list-indent1"><li>結局、DLL読み込み時に、グローバル変数jtag_command_queのアドレスをDLLに渡して、
DLL側はそのアドレスからqueを取得してもらうようにした。（投げ槍的？）</li></ul>
<ul class="list1 list-indent1"><li>本当はドライバーのexecute_que(void)関数に引数を追加すべきなんだが・・・</li></ul>
<pre>C:\&gt;openocd.exe -f blaster.cfg -f stm32.cfg

Open On-Chip Debugger 0.5.0-dev (2010-10-04-20:01)
Licensed under GNU GPL v2
For bug reports, read
        http://openocd.berlios.de/doc/doxygen/bugs.html
if load
Warn : Adapter driver 'hid_blaster' did not declare which transports it allows;
assuming legacy JTAG-only
Info : only one transport option; autoselect 'jtag'
1000 kHz
1000 kHz
adapter_nsrst_delay: 100
jtag_ntrst_delay: 100
=*= dummy_init(void)
TARGET DEV_ID=25 VER=1.1
Info : clock speed 1000 kHz
=*=bitbang_execute_queue(cmd=4) JTAG_RESET
Debug: 1 0 hidblast.c:167 dummy_reset(): reset to: RESET
=*=bitbang_execute_queue(cmd=7) JTAG_STABLECLOCKS
=*=bitbang_execute_queue(cmd=7) JTAG_STABLECLOCKS
=*=bitbang_execute_queue(cmd=2) JTAG_TLR_RESET
=*=bitbang_execute_queue(cmd=1) JTAG_SCAN
=*=bitbang_scan(type=0x3 size=0x280)
tms:0000000000000000000000000000000000000000000000000000000000000000000000000000...
tdi:1111111100000000000000000000000011111111000000000000000000000000111111110000...
tdo:1111111111111111111111111111111111111111111111111111111111111111111111111111...
=*=bitbang_execute_queue(cmd=2) JTAG_TLR_RESET
Error: JTAG scan chain interrogation failed: all ones
Error: Check JTAG interface, timings, target power, etc.
Error: Trying to use configured scan chain anyway...
=*=bitbang_execute_queue(cmd=1) JTAG_SCAN
=*=bitbang_scan(type=0x3 size=0xb)
tms:00000000001
tdi:11111111111
tdo:11111111111
Error: stm32.cpu: IR capture error; saw 0x0f not 0x01
=*=bitbang_execute_queue(cmd=2) JTAG_TLR_RESET
Warn : Bypassing JTAG setup events due to errors
=*=bitbang_execute_queue(cmd=1) JTAG_SCAN
=*=bitbang_scan(type=0x2 size=0x9)
tms:000000001
tdi:010111111
=*=bitbang_execute_queue(cmd=1) JTAG_SCAN
=*=bitbang_scan(type=0x2 size=0x24)
tms:000000000000000000000000000000000001
tdi:110000000000000000000000000000000000
=*=bitbang_execute_queue(cmd=1) JTAG_SCAN
=*=bitbang_scan(type=0x3 size=0x24)
tms:000000000000000000000000000000000001
tdi:111000000000000000000000000000000000
tdo:111111111111111111111111111111111111
=*=bitbang_execute_queue(cmd=1) JTAG_SCAN
=*=bitbang_scan(type=0x2 size=0x24)
tms:000000000000000000000000000000000001
tdi:010000001000000000000000000000000000
=*=bitbang_execute_queue(cmd=1) JTAG_SCAN
=*=bitbang_scan(type=0x2 size=0x24)
tms:000000000000000000000000000000000001
tdi:110000000000000000000000000000000000
=*=bitbang_execute_queue(cmd=1) JTAG_SCAN
=*=bitbang_scan(type=0x3 size=0x24)
tms:000000000000000000000000000000000001
tdi:111000000000000000000000000000000000
tdo:111111111111111111111111111111111111
=*=bitbang_execute_queue(cmd=1) JTAG_SCAN
=*=bitbang_scan(type=0x2 size=0x24)
tms:000000000000000000000000000000000001
tdi:010000000000000000000000000000010100
=*=bitbang_execute_queue(cmd=1) JTAG_SCAN
=*=bitbang_scan(type=0x2 size=0x24)
tms:000000000000000000000000000000000001
tdi:110000000000000000000000000000000000
=*=bitbang_execute_queue(cmd=1) JTAG_SCAN
=*=bitbang_scan(type=0x3 size=0x24)
tms:000000000000000000000000000000000001
tdi:111000000000000000000000000000000000
tdo:111111111111111111111111111111111111
=*=bitbang_execute_queue(cmd=1) JTAG_SCAN
=*=bitbang_scan(type=0x2 size=0x24)
tms:000000000000000000000000000000000001
tdi:110000000000000000000000000000000000
=*=bitbang_execute_queue(cmd=1) JTAG_SCAN
=*=bitbang_scan(type=0x3 size=0x24)
tms:000000000000000000000000000000000001
tdi:111000000000000000000000000000000000
tdo:111111111111111111111111111111111111
Warn : Invalid ACK 0x7 in JTAG-DP transaction
Polling target failed, GDB will be halted. Polling again in 100ms
Polling target failed, GDB will be halted. Polling again in 300ms
Polling target failed, GDB will be halted. Polling again in 700ms
Polling target failed, GDB will be halted. Polling again in 1500ms
Polling target failed, GDB will be halted. Polling again in 3100ms
Polling target failed, GDB will be halted. Polling again in 6300ms
=*= dummy_quit(void)</pre>
<ul class="list1 list-indent1"><li>これは、実際にPIC18spxのファームのポートを叩いている。（ので、240bitのJTAG_SCANに数秒掛かっている）</li>
<li>PIC18spx(PIC18F2550)の先には何も繋いでいない。</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_13">v-usb本家 : vusb-20100715/example<a class="anchor_super" id="caf36a7c" href="#caf36a7c" title="caf36a7c" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>AVRマイコンによる、ソフトウェアUSB実装。</li>
<li>昔と比べると、だいぶ整備されている。(exampleディレクトリが追加されている)</li>
<li>example/hid-data/commandlineにあるhiddata.cはusbhid<span class="noexists"><a href="./?cmd=edit&amp;page=GetReport&amp;refer=2010-10">GetReport</a></span>()とusbhid<span class="noexists"><a href="./?cmd=edit&amp;page=SetReport&amp;refer=2010-10">SetReport</a></span>()が実装されていて、Linuxと同様に使えるようになっている。</li>
<li>commandlineツールはWindowsビルドとLinux/MacOSビルドの両方が出来るようになっている。</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_14">OpenOCD : オレオレブラスターの第一歩が、動いた。<a class="anchor_super" id="o85ce309" href="#o85ce309" title="o85ce309" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>Linuxでクロスビルドした、素の(dummyドライバーのみしか内蔵していない)openocd.exeに、</li>
<li><a href="pic18spx.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">pic18spx</a>（PIC18F14K50）そのままのファームウェアをドライブするDLLを接続して、</li>
<li>CQ付録のLPC2388に<strong>JTAG接続が成功した。</strong>
<pre>C:\&gt;openocd.exe -f blaster.cfg -f lpc2378.cfg
Open On-Chip Debugger 0.5.0-dev (2010-10-04-20:01)
Licensed under GNU GPL v2
For bug reports, read
        http://openocd.berlios.de/doc/doxygen/bugs.html
if load
Warn : Adapter driver 'hid_blaster' did not declare which transports it allows; assuming legacy JTAG-
Info : only one transport option; autoselect 'jtag'
1000 kHz
adapter_nsrst_delay: 200
jtag_ntrst_delay: 200
trst_and_srst srst_pulls_trst srst_gates_jtag trst_push_pull srst_open_drain
500 kHz
=*= dummy_init(void)
TARGET DEV_ID=14 VER=1.1
Info : clock speed 500 kHz
Debug: 1 0 hidblast.c:175 dummy_reset(): reset to: RESET
Info : JTAG tap: lpc2378.cpu tap/device found: 0x4f1f0f0f (mfg: 0x787, part: 0xf1f0, ver: 0x4)
Info : Embedded ICE version 7
Error: EmbeddedICE v7 handling might be broken
Info : lpc2378.cpu: hardware has 2 breakpoint/watchpoint units
Info : accepting 'telnet' connection from 4444
   TapName             Enabled  IdCode     Expected   IrLen IrCap IrMask
-- ------------------- -------- ---------- ---------- ----- ----- ------
 0 lpc2378.cpu            Y     0x4f1f0f0f 0x4f1f0f0f     4 0x01  0x0f
requesting target halt and executing a soft reset
target state: halted
target halted in ARM state due to debug-request, current mode: Supervisor
cpsr: 0x000000d3 pc: 0x00000000
background polling: on
TAP: lpc2378.cpu (enabled)
target state: halted
target halted in ARM state due to debug-request, current mode: Supervisor
cpsr: 0x000000d3 pc: 0x00000000
===== ARM registers
(0) r0 (/32): 0xFFFFFFFF (dirty)
(1) r1 (/32): 0xFFFFFFFF (dirty)
(2) r2 (/32): 0xFFFFFFFF (dirty)
(3) r3 (/32): 0xFFFFFFFF (dirty)
(4) r4 (/32): 0xFFFFFFFF (dirty)
(5) r5 (/32): 0xFFFFFFFF (dirty)
(6) r6 (/32): 0xFFFFFFFF (dirty)
(7) r7 (/32): 0xFFFFFFFF (dirty)
(8) r8 (/32): 0xFFFFFFFF (dirty)
(9) r9 (/32): 0xFFFFFFFF (dirty)
(10) r10 (/32): 0xFFFFFFFF (dirty)
(11) r11 (/32): 0xFFFFFFFF (dirty)
(12) r12 (/32): 0xFFFFFFFF (dirty)
(13) sp_usr (/32)
(14) lr_usr (/32)
(15) pc (/32): 0x00000000 (dirty)
(16) r8_fiq (/32)
(17) r9_fiq (/32)
(18) r10_fiq (/32)
(19) r11_fiq (/32)
(20) r12_fiq (/32)
(21) sp_fiq (/32)
(22) lr_fiq (/32)
(23) sp_irq (/32)
(24) lr_irq (/32)
(25) sp_svc (/32): 0xFFFFFFFF (dirty)
(26) lr_svc (/32): 0xFFFFFFFF (dirty)
(27) sp_abt (/32)
(28) lr_abt (/32)
(29) sp_und (/32)
(30) lr_und (/32)
(31) cpsr (/32): 0x000000D3 (dirty)
(32) spsr_fiq (/32)
(33) spsr_irq (/32)
(34) spsr_svc (/32)
(35) spsr_abt (/32)
(36) spsr_und (/32)
===== EmbeddedICE registers
(37) debug_ctrl (/6): 0x05
(38) debug_status (/5)
(39) comms_ctrl (/6)
(40) comms_data (/32)
(41) watch_0_addr_value (/32)
(42) watch_0_addr_mask (/32)
(43) watch_0_data_value (/32)
(44) watch_0_data_mask (/32)
(45) watch_0_control_value (/9)
(46) watch_0_control_mask (/8)
(47) watch_1_addr_value (/32)
(48) watch_1_addr_mask (/32)
(49) watch_1_data_value (/32)
(50) watch_1_data_mask (/32)
(51) watch_1_control_value (/9)
(52) watch_1_control_mask (/8)</pre></li></ul>
<ul class="list1 list-indent1"><li>まだ、bitbangモードのままなので<strong>、遅い。</strong>(USB-Blasterと同程度。実用にはならない。)</li>
<li>やや不安定。</li></ul>
<p>read more : <a href="pic18blaster.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">pic18blaster</a></p>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_15">OpenOCD : STM32への書き込みに成功!<a class="anchor_super" id="gec928a4" href="#gec928a4" title="gec928a4" style="user-select:none;">&dagger;</a></h2>
<pre>Open On-Chip Debugger
&gt; scan_chain
   TapName             Enabled  IdCode     Expected   IrLen IrCap IrMask
-- ------------------- -------- ---------- ---------- ----- ----- ------
 0 stm32.cpu              Y     0x3ba00477 0x3ba00477     4 0x01  0x0f
 1 stm32.bs               Y     0x16410041 0x06412041     5 0x01  0x03
                                           0x06410041
                                           0x06410041
                                           0x06410041
                                           0x06410041
&gt; reset halt
JTAG tap: stm32.cpu tap/device found: 0x3ba00477 (mfg: 0x23b, part: 0xba00, ver: 0x3)
JTAG tap: stm32.bs tap/device found: 0x16410041 (mfg: 0x020, part: 0x6410, ver: 0x1)
Only resetting the Cortex-M3 core, use a reset-init event handler to reset any peripherals
target state: halted
target halted due to debug-request, current mode: Thread
xPSR: 0x01000000 pc: 0x08000120 msp: 0x20005000
&gt; flash write_image erase main-0000.hex
auto erase enabled
device id = 0x20036410
flash size = 64kbytes
wrote 8192 bytes from file main-0000.hex in 27.562500s (0.290 KiB/s)
&gt;</pre>
<ul class="list1 list-indent1"><li><strong>遅っ！</strong></li></ul>
<ul class="list1 list-indent1"><li>遅い理由は、jtag_command_queueのコマンドパケットが0x24(36bit)しか長さがないためらしい。</li>
<li>書き込むmain-0000.hexのファームサイズは約８ｋＢ。書き込みに３０秒掛かる。</li>
<li>毎秒２９０バイトしか送れない。</li></ul>
<ul class="list1 list-indent1"><li>１回のjtag_command_queueは36bit長であり、TCKを0-&gt;1 にする都合上、BitBangの回数（パラレルポートにたとえるなら、ポートを叩く回数）は36x2=72bitある。</li></ul>
<ul class="list1 list-indent1"><li>PICに実装したbitbangは１回のUSBパケットに48bitしか乗せられないので２回(最速でも2mS)の転送を要する。</li></ul>
<ul class="list1 list-indent1"><li>要約すると、どんなに速くても2mSに４バイトのファームしか書けないのだ。</li>
<li>秒あたりに換算すると、２ｋＢ。</li>
<li>実際その１/７程度しか出ていないけれど。</li></ul>
<p>まるでHIDaspx並の遅さ。</p>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_16">OpenOCD : 次はATtiny2313でOpenOCD<a class="anchor_super" id="w0bdf5eb" href="#w0bdf5eb" title="w0bdf5eb" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>昔のtiny2313実験基板を掘り出してJTAGハードウェアを用意した。</li>
<li>ST-Link(のJTAG書き込み端子)と互換のJTAGケーブルでSTM8S-DのSTM32側に接続するようにした。</li>
<li>HIDspxファームを元にしてファームウェアのフレームワークを用意した。</li></ul>
<p>問題は、プロトコルをどうするかという点。</p>
<ul class="list1 list-indent1"><li>Low SpeedのUSBではControl転送しか使えない。</li>
<li>スループットを上げるためには、Control転送のHID SetReportのサイズを32byte〜128byte程度に大きく取る必要がある。</li>
<li>しかし、tiny2313にはRAMが全部で128byteしかなく、HIDaspx実装では38byteのバッファを確保するのがやっとだ。（しかも送受で共用）</li>
<li>なので、JTAGの双方向読み書きでは8byteまでのパケットしか扱えないだろう。(送受で独立バッファがおそらく必要だし、返答用には全データを保持しないとならないから)</li></ul>
<ul class="list1 list-indent1"><li>JTAG書き込みだけならReportサイズを128byteまで伸ばすことは可能。(実際は8byteごとに処理をして(捨てて)いかないといけない)</li>
<li>しかし、LowSpeedのControl転送は、どうあがいても１フレーム(1mS)に8byte、秒間8kBが上限になってしまう。</li>
<li>性能目標としては、書き込みのみのスループットで4kB/秒、読み書きだと1kB/秒というところか。</li></ul>
<ul class="list1 list-indent1"><li>BitBangで帯域を食われると非常にもったいないので、JTAGビットストリーム(TDIのビットが最密に詰まったストリーム)
でのやりとりになる。書き込みのみならTDOは無視。TCKは010101と交互にしか変わらないのでUSBでは伝送しない。TMSが変化する場合は一旦ストリームを閉じて、TMS変更コマンドを挿入するようにする。</li></ul>
<ul class="list1 list-indent1"><li>JTAG送受信
<pre>   0      1      2      3      4      5      6      7
+------+------+---------------------------+-------------+
| req  | cmd  | 送信データ（最大４バイト）|   wlength   |
+------+------+---------------------------+-------------+</pre></li></ul>
<ul class="list1 list-indent1"><li>cmd内にはJTAG送信データの有効ビット数を(1〜32の範囲で)入れておく。</li></ul>
<ul class="list1 list-indent1"><li>後続する受信パケット
<pre>   0      1      2      3      4      5      6      7
+---------------------------+---------------------------+
|受信データ（最大４バイト） |     空き                  |
+---------------------------+---------------------------+</pre></li></ul>
<ul class="list1 list-indent1"><li>JTAG送信のみ
<pre>   0      1      2      3      4      5      6      7
+------+------+---------------------------+-------------+
| req  | cmd  |     使用せず              |   wlength   |
+------+------+---------------------------+-------------+</pre></li></ul>
<ul class="list1 list-indent1"><li>cmd内にはJTAG送信データの有効ビット数を(1〜32の範囲で)入れておく。</li></ul>
<ul class="list1 list-indent1"><li>後続する送信パケット(8byte〜128byte)
<pre>   0      1      2      3      4      5      6      7
+------+--------------------+---------------------------+
| cmd  |  JTAGストリーム(56bitまで)                     |
+------+--------------------+---------------------------+
      ・・・
+------+--------------------+---------------------------+
| cmd  |  JTAGストリーム(56bitまで)                     |
+------+--------------------+---------------------------+</pre></li></ul>
<ul class="list1 list-indent1"><li>cmdはストリームのビット数(6bit)とTMSの初期値(1bit),TMSの最終値(1bit)をパックする。</li>
<li>v-usbで処理する都合上、後続する送信パケットは８バイト単位に細分化され、TMSが変化する場合は８バイトのうちでも、変化する位置までしか使用しない。</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_17">OpenOCD : 次はATtiny2313でOpenOCD : その２<a class="anchor_super" id="rc586e71" href="#rc586e71" title="rc586e71" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>openocd側のATtiny2313対応フレームワークも用意した。</li>
<li>試しに現状のHIDaspxファームウェアを最小構成にしてみた。</li>
<li>こんな感じ。
<pre>avr-objcopy -j .text -j .data -O ihex main-12.elf main-12.hex
avr-size --mcu=attiny2313 main-12.elf
  text    data     bss     dec     hex filename
  1816       2      83    1901     76d main-12.elf</pre></li>
<li>全然余裕じゃん。</li>
<li>コマンドを２つ追加して、TDIビットの詰まったパケット(最大長38byte程度)を処理するようにする。</li>
<li>読み書きを要する場合はTDOビットの詰まったパケットを返却する。</li>
<li>返却パケットは受け取ったバッファを再利用することでメモリー使用量を増やさずに実装出来る気がする。</li></ul>
<ul class="list1 list-indent1"><li>HIDaspx(AVRライター機能)と相乗りする都合上、受け取りパケットは38byte程度を全部受信した後、JTAG書き込みを実行するようになるしかない。</li>
<li>HIDaspx(AVRライター機能)を捨てる場合は、8byte受け取るたびにJTAG書き込みを実行することでインターリーブな高速化が可能。ただしパケット構造が8byte単位に依存してしまう。</li></ul>
<ul class="list1 list-indent1"><li>ファーム圧縮の差分はこんな感じになっている。(main.c)</li></ul>
<pre>189,195d188
&lt; /* ------------------------------------------------------------------------- */
&lt; /* -----------------------------  JTAG          ---------------------------- */
&lt; /* ------------------------------------------------------------------------- */
&lt; 
&lt; #if	INCLUDE_JTAG_CMD
&lt; void jtag_command()
&lt; {
197,198d189
&lt; }
&lt; #endif
221d211
&lt; #if	0
231a222,234
&gt; #else
&gt; 		uchar CR0=(1&lt;&lt;USIWM0)|(1&lt;&lt;USICS1)|(1&lt;&lt;USITC);
&gt; 		USICR=CR0;
&gt; 		uchar CR1=(1&lt;&lt;USIWM0)|(1&lt;&lt;USICS1)|(1&lt;&lt;USITC)|(1&lt;&lt;USICLK);
&gt; 		//↑これは1clkなので↓直後に nop必要.
&gt; 					asm(&quot;nop&quot;);	USICR=CR1;	DLY_2clk();
&gt; 		USICR=CR0;	DLY_2clk();	USICR=CR1;	DLY_2clk();
&gt; 		USICR=CR0;	DLY_2clk();	USICR=CR1;	DLY_2clk();
&gt; 		USICR=CR0;	DLY_2clk();	USICR=CR1;	DLY_2clk();
&gt; 		USICR=CR0;	DLY_2clk();	USICR=CR1;	DLY_2clk();
&gt; 		USICR=CR0;	DLY_2clk();	USICR=CR1;	DLY_2clk();
&gt; 		USICR=CR0;	DLY_2clk();	USICR=CR1;	DLY_2clk();
&gt; 		USICR=CR0;	DLY_2clk();	USICR=CR1;//DLY_2clk(); :else のrjmpで代用.
237,239c240
&lt; 	}else
&lt; #endif
&lt; 	{
---
&gt; 	}else{
242c243
&lt; 			while(d &gt; 2) {		// 1+1: cpi,breq
---
&gt; 			while(d != 2) {		// 1+1: cpi,breq
340,346d340
&lt; 
&lt; #if	INCLUDE_JTAG_CMD
&lt; 	if ( cmd == HIDASP_JTAG_WRITE) { // JTAG
&lt; 		jtag_command();
&lt; 	} else
&lt; #endif
&lt; </pre>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_18">OpenOCD : 次はATtiny2313でOpenOCD : その３<a class="anchor_super" id="a6ca895a" href="#a6ca895a" title="a6ca895a" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>おおむねJTAG用のファームウェアは書いてしまった。</li>
<li>まだFlashは余っている。</li>
<li>動作確認するためには、OpenOCD用のDLLを書かないといけない。（まだ書いていない）</li>
<li>たぶん動くと思う。
<ul class="list2 list-indent1"><li>秒間２Ｋの転送で実用になるかどうかは別だが、ARM用ライターが無いときは有用だと思う。</li></ul></li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_19">CPUを設計するべからず<a class="anchor_super" id="xb02edbc" href="#xb02edbc" title="xb02edbc" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li><a href="http://blogs.dion.ne.jp/sunagimoutchy/archives/9739321.html" rel="nofollow">http://blogs.dion.ne.jp/sunagimoutchy/archives/9739321.html</a></li>
<li>FPGAを素で使うよりは、中にMPUもどきを入れたほうが便利なこともある。</li>
<li>もっとも、最近はARMコアがおまけで入っているやつまであるけれど。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>新規にアーキテクチャ設計するのは無謀というものだ。なぜかというと、CPUコア以外にバスやら周辺やらコンパイラやらbinutilsなど、ありとあらゆるものを用意しないといけないからだ。</li>
<li>エコサイクル的には、現存するCPUのサブセットか改良（変形）程度にとどめて、現存する開発環境をちょっと改造するだけで使えるのがいいかと。</li>
<li>サブセット化すればFPGAの占有面積を節約できるし、特殊用途向けの拡張だってそれなりの効果はあると思う。</li>
<li>しかし、そうするといろいろな特許部分があるので、商売には出来ない罠。</li>
<li>個人的には、現行のARM/Thumbを少し変形してみたい気分もある。</li>
<li>32bit即値のロードと32bitアブソリュートアドレスのアクセスを命令コードに含めると、現在の２命令分割とかPC相対の32bit定数フェッチとかが要らなくなる。</li>
<li>但し、命令コードが可変長になってしまうのでどちらが有利なのかはすぐには分からない。少なくともキャッシュラインが64bitまとめてフェッチできなければ無意味になる。</li>
<li>そうやってちょっと最適化したところで、やっとx86と同等になるだけの効果しかないのかもしれない。</li></ul>
<p>で、現行のARM/Thumbにdalvik VM向けのサポート機構なんてあったら便利なんじゃないだろうか。</p>
<ul class="list1 list-indent1"><li>昔、携帯電話でJavaが流行ったときのARM/Jazelle拡張みたいな風に。</li>
<li>頻繁に使用される中間コードはそのまま実行して、そうでない複雑なコードは例外ハンドラーに飛ばせるようなやつ。</li>
<li>JITコンパイラとどっちが有利なんだろう。</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_20">OpenOCD : 次はATtiny2313でOpenOCD : その４<a class="anchor_super" id="a6ca895a" href="#a6ca895a" title="a6ca895a" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>まるで、<strong>悪い冗談</strong>みたいだ。</li>
<li><strong>ATtiny2313を使って、ARMのflash書き込みに成功した</strong></li></ul>
<p>read more : <a href="hid_blaster.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">hid_blaster</a></p>
<p><br /></p>
<ul class="list1 list-indent1"><li>死ぬほど遅い理由は <span class="noexists"><a href="./?cmd=edit&amp;page=BitBang&amp;refer=2010-10">BitBang</a></span>.c（パラレルポート直叩きドライバー）のプリンタポートがそのままUSBの先
にあるAttiny2313のPB4〜PB7に移動しただけという手抜き実装だから。</li></ul>
<ul class="list1 list-indent1"><li>死ぬほど遅いんだけれど、PICより安定している何故？(PIC18F14K50固有の不安定要素をまだ引きずっているようだ。PICはUSBパケットの処理が間に合わないときinterruptパケットを捨てる癖があるらしく、そこでハンドシェイクが死ぬことがある問題)</li></ul>
<ul class="list1 list-indent1"><li>これから、JTAG専用のコマンドを拡充する<strong>予定。</strong></li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_21">OpenOCD : 次はATtiny2313でOpenOCD : その５<a class="anchor_super" id="b8650a54" href="#b8650a54" title="b8650a54" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>専用コマンドが使えるようになった。</li>
<li>高速化してみた。</li>
<li>しかし、それほど速くなっていない。</li>
<li>理由は、JTAG_SCAN（４バイトのFLASH書き込み）の合間にJTAG_RUNTESTが走るので、せっかくの高速化が台無し。</li>
<li>RUNTESTはpath_move()を伴うようだが、runtestもpath_moveも専用パケットで処理できない。</li>
<li>接続は非常に安定している。書き込みに失敗することはない。</li>
<li>ただし遅い。</li></ul>
<p>今のところ8kB書き込みに12秒。(USB2.0HUBを入れた状態)</p>
<ul class="list1 list-indent1"><li>それでもUBS-Blasterよりは速い（はず)</li></ul>
<p>read more : <a href="hid_blaster.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">hid_blaster</a></p>
<p><br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_22">ログ<a class="anchor_super" id="aceb9a55" href="#aceb9a55" title="aceb9a55" style="user-select:none;">&dagger;</a></h2>
<pre>Open On-Chip Debugger
&gt; scan_chain
   TapName             Enabled  IdCode     Expected   IrLen IrCap IrMask
-- ------------------- -------- ---------- ---------- ----- ----- ------
 0 stm32.cpu              Y     0x3ba00477 0x3ba00477     4 0x01  0x0f
 1 stm32.bs               Y     0x16410041 0x06412041     5 0x01  0x03
                                           0x06410041
                                           0x06410041
                                           0x06410041
                                           0x06410041
&gt; reset halt
JTAG tap: stm32.cpu tap/device found: 0x3ba00477 (mfg: 0x23b, part: 0xba00, ver: 0x3)
JTAG tap: stm32.bs tap/device found: 0x16410041 (mfg: 0x020, part: 0x6410, ver: 0x1)
Only resetting the Cortex-M3 core, use a reset-init event handler to reset any peripherals
target state: halted
target halted due to debug-request, current mode: Thread
xPSR: 0x01000000 pc: 0x08000120 msp: 0x20005000
&gt; reg
===== arm v7m registers
(0) r0 (/32): 0x00000000
(1) r1 (/32): 0x2000032C
(2) r2 (/32): 0x40005C40
(3) r3 (/32): 0x00000000
(4) r4 (/32): 0xFFFF3F86
(5) r5 (/32): 0xFEFFEFFC
(6) r6 (/32): 0x62CC05DD
(7) r7 (/32): 0x7974BB6F
(8) r8 (/32): 0xFFFF7FDF
(9) r9 (/32): 0xF7FADDFC
(10) r10 (/32): 0xB2586ED2
(11) r11 (/32): 0x993AE28E
(12) r12 (/32): 0x00000000
(13) sp (/32): 0x20005000
(14) lr (/32): 0xFFFFFFFF
(15) pc (/32): 0x08000120
(16) xPSR (/32): 0x01000000
(17) msp (/32): 0x20005000
(18) psp (/32): 0xA6076F68
(19) primask (/1): 0x00
(20) basepri (/8): 0x00
(21) faultmask (/1): 0x00
(22) control (/2): 0x00
===== cortex-m3 dwt registers
(23) dwt_ctrl (/32)
(24) dwt_cyccnt (/32)
(25) dwt_0_comp (/32)
(26) dwt_0_mask (/4)
(27) dwt_0_function (/32)
(28) dwt_1_comp (/32)
(29) dwt_1_mask (/4)
(30) dwt_1_function (/32)
(31) dwt_2_comp (/32)
(32) dwt_2_mask (/4)
(33) dwt_2_function (/32)
(34) dwt_3_comp (/32)
(35) dwt_3_mask (/4)
(36) dwt_3_function (/32)
&gt; flash write_image erase main-0000.hex
auto erase enabled
device id = 0x20016410
flash size = 128kbytes
wrote 8192 bytes from file main-0000.hex in 12.484375s (0.641 KiB/s)</pre>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_23">OpenOCD : 次はATtiny2313でOpenOCD : 高速化完了！<a class="anchor_super" id="nfc6e504" href="#nfc6e504" title="nfc6e504" style="user-select:none;">&dagger;</a></h2>
<p>今のところ8kB書き込みに4.8秒。(USB2.0HUBを入れた状態)</p>
<ul class="list1 list-indent1"><li><span class="noexists"><a href="./?cmd=edit&amp;page=BitBang&amp;refer=2010-10">BitBang</a></span>,JTAGなどいずれのパケットも出来る限りバッファに溜めてからUSB経由で送るようにしてみた。</li>
<li>接続は非常に安定している。書き込みに失敗することはない。</li>
<li>JTAG_SCAN（４バイトのFLASH書き込み）の合間にJTAG_RUNTESTが走るので、せっかくの高速化が台無しだが、それでもだいぶ速くなった。</li>
<li>RUNTESTを減らしたり、FLASH書き込み中は抑止できるようにすればあと２倍くらいは速くなる。</li>
<li>そのためにはOpenOCDの内部をもう少し勉強しないといけない。</li></ul>
<p><br />
現状のファーム＋DLLでも、大きなファームを書き込むのでなければ充分実用になります。</p>
<p>read more : <a href="hid_blaster.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">hid_blaster</a></p>
<pre>Open On-Chip Debugger
&gt; scan_chain
   TapName             Enabled  IdCode     Expected   IrLen IrCap IrMask
-- ------------------- -------- ---------- ---------- ----- ----- ------
 0 stm32.cpu              Y     0x3ba00477 0x3ba00477     4 0x01  0x0f
 1 stm32.bs               Y     0x16410041 0x06412041     5 0x01  0x03
                                           0x06410041
                                           0x06410041
                                           0x06410041
                                           0x06410041
&gt; reset halt
JTAG tap: stm32.cpu tap/device found: 0x3ba00477 (mfg: 0x23b, part: 0xba00, ver: 0x3)
JTAG tap: stm32.bs tap/device found: 0x16410041 (mfg: 0x020, part: 0x6410, ver: 0x1)
Only resetting the Cortex-M3 core, use a reset-init event handler to reset any peripherals
target state: halted
target halted due to debug-request, current mode: Thread
xPSR: 0x01000000 pc: 0x08000120 msp: 0x20005000
&gt; flash write_image erase main-0000.hex
auto erase enabled
device id = 0x20016410
flash size = 128kbytes
wrote 8192 bytes from file main-0000.hex in 4.828125s (1.657 KiB/s)</pre>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_24">OpenOCD : 次はATtiny2313でOpenOCD : さらに高速化に成功。<a class="anchor_super" id="o459bbc5" href="#o459bbc5" title="o459bbc5" style="user-select:none;">&dagger;</a></h2>
<p>今のところ8kB書き込みに3.4秒。(USB2.0HUBを入れた状態)</p>
<ul class="list1 list-indent1"><li>RUNTESTを減らした。</li></ul>
<p><br />
現状のファーム＋DLLでも、大きなファームを書き込むのでなければ充分実用になります。</p>
<p>read more : <a href="hid_blaster.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">hid_blaster</a></p>
<pre>Open On-Chip Debugger
&gt; scan_chain
   TapName             Enabled  IdCode     Expected   IrLen IrCap IrMask
-- ------------------- -------- ---------- ---------- ----- ----- ------
 0 stm32.cpu              Y     0x3ba00477 0x3ba00477     4 0x01  0x0f
 1 stm32.bs               Y     0x16410041 0x06412041     5 0x01  0x03
                                           0x06410041
                                           0x06410041
                                           0x06410041
                                           0x06410041
&gt; reset halt
JTAG tap: stm32.cpu tap/device found: 0x3ba00477 (mfg: 0x23b, part: 0xba00, ver: 0x3)
JTAG tap: stm32.bs tap/device found: 0x16410041 (mfg: 0x020, part: 0x6410, ver: 0x1)
Only resetting the Cortex-M3 core, use a reset-init event handler to reset any peripherals
target state: halted
target halted due to debug-request, current mode: Thread
xPSR: 0x01000000 pc: 0x08000120 msp: 0x20005000
&gt; flash write_image erase main-0000.hex
auto erase enabled
device id = 0x20016410
flash size = 128kbytes
wrote 8192 bytes from file main-0000.hex in 3.406250s (2.349 KiB/s)</pre>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_25">OpenOCD : 次は何しょぅ・・・<a class="anchor_super" id="t0c59f3a" href="#t0c59f3a" title="t0c59f3a" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>同じプロトコル、アルゴリズムをPIC18Fに移植するとだいたい８倍程度速くなる予定</li>
<li>（何故なら、USBのコントロール転送はLOW SPEEDで8byte/1mSフレームなのに対して、FULL SPEEDだと64byte/1mSフレームになるから）</li>
<li>HIDデバイスにこだわらないのであれば、８倍（最大で64kB/sec）のさらに４倍くらい（最大で250kB/sec）になるはず。</li>
<li>FULL SPEEDだから12Mbps=約1.2MB/sec行くと思ったら大間違い。それはハンドシェークしないで無限長パケットを送りつける場合の話。実際USBはそんなに速くない（無駄が多い）し、PIC18Fの遅さを知らない発言だ。</li></ul>
<ul class="list1 list-indent1"><li>現状では18F14K50がJTAG接続中に不安定で使い物にならないレベルなので、代打として、3.3V駆動している18F2550基板を改造してPIC18Fへのインプリメントを続けるか、</li>
<li>PICの需要が無い、と勝手に判断してARMに移ることも考えている。(ARMでARMに書くのか？共食いだな、いや鶏卵問題か)</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>自分的には、8kファームを4秒で書けるなら、それで充分だし、OpenOCDはARMライターとしてしか見てないし（gdbやEclipseなどを使うつもりが全く無いと言うか・・・）</li>
<li>8k以上のファームを書く必要性すらない（それ以上のサイズはブートローダー経由で自力で書き込むことにしている）ので、
<strong>これで開発終了してもいいかな</strong>とか思っているところ。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>JTAG以外にSWD(SWIM)サポートしたい気はする。でもSTM32ではJTAGで充分速いし、SWDしか使えないチップって何だっけ？
<ul class="list2 list-indent1"><li>LPC1343だけか。でもあれはBOOT ROMが良く出来ていて自力でPCのUSBストレージになってくれるのでSWDで書く必要性は薄い。（SWDデバッグ出来ない問題は残る）
<br /></li></ul></li>
<li>OpenOCDのドライバー部分だけを別DLLにして、オレオレブラスター（実はUSB-Blasterのぱくりと言えなくも無いパケット構造なので、ナントカブラスターにしてみただけ）を作ってみたけれど、実のところOpenOCDのライセンス制約を把握できていないので、こんなことをやっていいのかどうかさえあんまり分かっていなかったりもする。</li></ul>
<p><br />
<br />
と、まあ勝手なことを連ねてみたが、結論としては</p>
<ul class="list1 list-indent1"><li>現状のHIDなオレオレブラスターをARMに載せるところまではやってみるつもり。たいして手間は掛からない。</li>
<li>PIC18Fは（現状ファームが不安定なので）放置予定。</li>
<li>HID以外のUSBクラスにするつもりは今のところない。<del>ドライバーを用意するのが面倒なので</del>。速くはなるけれど。</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_26">OpenOCD : 次はUSB-Blaster(もどき)用に対応してみたり。<a class="anchor_super" id="a54e41a4" href="#a54e41a4" title="a54e41a4" style="user-select:none;">&dagger;</a></h2>
<p><strong>PIC18F2550対応</strong></p>
<ul class="list1 list-indent1"><li>sa89a.net様の<a href="http://sa89a.net/mp.cgi/ele/ub.htm" rel="nofollow">USBブラスターもどき</a>と同一ハードウェアにフィットさせてみたものを公開</li></ul>
<p>read more : <a href="pic18blaster.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">pic18blaster</a></p>
<p><br /></p>
<ul class="list1 list-indent1"><li>OpenOCDをちゃんとUSB-Blasterに対応させたほうが利便性は高いはず。（でも面倒なので）</li>
<li>PIC18F2550はブートローダーを入れているのでファームの差し替えはそれほど手間が掛からないことを利用して、</li>
<li>USB-Blasterファームとpic18blasterファームを差し替えて試してみた。</li>
<li>とりあえず動いている。</li></ul>
<ul class="list1 list-indent1"><li>比較のため、
<pre>--enable-usb-blaster-ftd2xx</pre></li>
<li>にてビルドしたopenocdを用意して、USB-BlasterからARMにファームを書き込んでみた。</li>
<li>以下はそのログ
<pre>C:\OpenOCD&gt;openocd.exe -f blaster.cfg -f lpc2378.cfg -f batch.cfg
Open On-Chip Debugger 0.5.0-dev (2010-10-11-14:52)
Licensed under GNU GPL v2
For bug reports, read
        http://openocd.berlios.de/doc/doxygen/bugs.html
Warn : Adapter driver 'usb_blaster' did not declare which transports it allows; assuming legacy JTAG-only
Info : only one transport option; autoselect 'jtag'
1000 kHz
adapter_nsrst_delay: 200
jtag_ntrst_delay: 200
trst_and_srst srst_pulls_trst srst_gates_jtag trst_push_pull srst_open_drain
500 kHz
Warn : no usb_blaster device description specified, using default 'USB-Blaster'
Error: Translation from khz to jtag_speed not implemented
Error: Translation from khz to jtag_speed not implemented
Error: Translation from jtag_speed to khz not implemented
Error: Translation from khz to jtag_speed not implemented
Info : adapter-specific clock speed value 0
Info : JTAG tap: lpc2378.cpu tap/device found: 0x4f1f0f0f (mfg: 0x787, part: 0xf1f0, ver: 0x4)
Info : Embedded ICE version 7
Error: EmbeddedICE v7 handling might be broken
Info : lpc2378.cpu: hardware has 2 breakpoint/watchpoint units
   TapName             Enabled  IdCode     Expected   IrLen IrCap IrMask
-- ------------------- -------- ---------- ---------- ----- ----- ------
 0 lpc2378.cpu            Y     0x4f1f0f0f 0x4f1f0f0f     4 0x01  0x0f
Info : JTAG tap: lpc2378.cpu tap/device found: 0x4f1f0f0f (mfg: 0x787, part: 0xf1f0, ver: 0x4)
target state: halted
target halted in ARM state due to breakpoint, current mode: Supervisor
cpsr: 0xa00000d3 pc: 0x00000020
Warn : srst pulls trst - can not reset into halted mode. Issuing halt after reset.
Warn : NOTE! DCC downloads have not been enabled, defaulting to slow memory writes. Type 'help dcc'.
Warn : NOTE! Severe performance degradation without fast memory access enabled. Type 'help fast'.
requesting target halt and executing a soft reset
target state: halted
target halted in ARM state due to breakpoint, current mode: Supervisor
cpsr: 0xa00000d3 pc: 0x00000000
auto erase enabled
Warn : Verification will fail since checksum in image (0x00000000) to be written to flash is different from
calculated vector checksum (0xb8a06f60).
Warn : To remove this warning modify build tools on developer PC to inject correct LPC vector checksum.
wrote 8192 bytes from file main-0000.hex in 449.296875s (0.018 KiB/s)
shutdown command invoked</pre></li></ul>
<ul class="list1 list-indent1"><li>8kBのファーム書き込みに449.2秒掛かった。</li>
<li>pic18blasterを使うと、30秒くらいで書ける。</li>
<li>ATtiny2313で作った<a href="hid_blaster.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">hid_blaster</a>なら3.4秒で書ける。</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_27">FRISK-JTAG<a class="anchor_super" id="ucbea6ca" href="#ucbea6ca" title="ucbea6ca" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>STBEE MINIをFRISKのプラケースに入れて、基板を固定してみた。</li>
<li>いい感じ。</li></ul>
<p><a href="/ATMEL_AVR/jpg/ARM/frisk-jtag.jpg" rel="nofollow"><img src="/ATMEL_AVR/jpg/ARM/frisk-jtag.jpg" alt="/ATMEL_AVR/jpg/ARM/frisk-jtag.jpg" /></a></p>
<ul class="list1 list-indent1"><li>STBEE MINIの裏側にチップ部品が少し張り付いていたので、その部分だけ、裏張りの基板をえぐってある。（電動ドリルで穴あけすこし手前まで掘る）</li></ul>
<ul class="list1 list-indent1"><li>まだ未配線。</li>
<li>ファームも書いてないし、OpenOCDドライバーも書いていない。</li>
<li>一応AVR,PIC18,ARM(OpenOCD)まで対応する予定。</li>
<li>予定稿としては、<a href="pic18spx.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">pic18spx</a>をほぼ丸ごと移植するつもり。</li></ul>
<p><br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_28">AVR用6PIN-ISPピンヘッダー仕様<a class="anchor_super" id="qdcd472d" href="#qdcd472d" title="qdcd472d" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>使いまわし的に微妙に無理があるけれど、全機種共通配置。</li></ul>
<ul class="list1 list-indent1"><li>AVR-ISP用:ピンヘッダーを基板上から見た配置
<pre>   5    3    1
 +----+----+----+
 |Rset|SCK |MISO|
 +----+----+----+
 |GND |MOSI|Vcc |
 +----+----+----+
   6    4    2</pre></li>
<li>PIC18FのISPにもそのまま使いまわし
<pre>   5    3    1
 +----+----+----+
 |MCLR|PGC |PGD |
 +----+----+----+
 |GND |PGM |Vcc |
 +----+----+----+
   6    4    2</pre></li></ul>
<ul class="list1 list-indent1"><li>それをまたARM(JTAG)にも使いまわし
<pre>   5    3    1
 +----+----+----+
 |TMS |TCK |TDO |
 +----+----+----+
 |GND |TDI |Vcc |
 +----+----+----+
   6    4    2</pre></li></ul>
<ul class="list1 list-indent1"><li>対応表
<pre>AVR用ISP 6PIN     PIC18Fへ書き込み場合の対応表    ARM-JTAG
-------------------------------------------------
	1 MISO    ------------------&gt;   PGD       TDO (唯一の入力端子。ARMからは出力)
	2 Vcc     ------------------&gt;   Vcc       Vcc
	3 SCK     ------------------&gt;   PGC       TCK
	4 MOSI    ------------------&gt;   PGM       TDI
	5 RESET   ------------------&gt;   MCLR      TMS
	6 GND     ------------------&gt;   GND       GND
-------------------------------------------------</pre></li></ul>
<ul class="list1 list-indent1"><li>実際は、要らなくなった互換機の9PINシリアル外出しフラットケーブル(ピンヘッダーとDSUB9-PIN)を
ばらして使ったり、秋月の<a href="http://akizukidenshi.com/catalog/g/gC-03796/" rel="nofollow">10PINフラットケーブル</a>を使っているので、6PIN以外に4PIN分を余らせている。
（そこにnTRSTとかを割り当てることは可能）</li></ul>
<p>JTAGなんて、結局AVRの6PIN ISPと（必要ピン数は）大差ないのに、全部バラバラ仕様なので、</p>
<ul class="list1 list-indent1"><li><a href="http://www.geocities.jp/rev_eng_lab/jtag/connector.html" rel="nofollow">http://www.geocities.jp/rev_eng_lab/jtag/connector.html</a></li>
<li>その都度変換コネクターでも作るしかないと思っている。</li>
<li>ピンが全部バラけているような（ＡＴ互換機のマザーとフロントパネルとかオーディオを繋いでいるような）ケーブルを全部手で差し込むのだけは嫌だ。<strong>絶対間違える。</strong></li></ul>
<p><br />
今手元にある基板としては、こんな感じ。</p>
<div class="ie5"><table class="style_table" cellspacing="1" border="0"><tbody><tr><td class="style_td">CQ-FRK-NXP-ARMとSTBEE (FULL SIZE)</td><td class="style_td">ARM準標準の20PIN</td></tr>
<tr><td class="style_td">STM8S-Discovery</td><td class="style_td">STMicroの変な？配置の8PINピンヘッダー</td></tr>
<tr><td class="style_td">CQ-STARM</td><td class="style_td">JTAGは独立したピンヘッダーがないので、適当な変換基板を挟んでSTM8S-D配置に変換してみた</td></tr>
<tr><td class="style_td">STBEE MINI</td><td class="style_td">JTAGは独立したピンヘッダーに出ていない</td></tr>
<tr><td class="style_td">LPC1343</td><td class="style_td">JTAGはサポートされていない。SWDのみ</td></tr>
</tbody></table></div>
<p>なので、汎用ライターの端子はAVRISPの6PIN配置にしておいて、</p>
<ul class="list1 list-indent1"><li>AVRISPからARM準標準の20PINに変換するケーブル。</li>
<li>AVRISPからSTM8S-Dの変な8PINに変換するケーブル。</li></ul>
<p>が必要らしい。</p>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_29">『Windows Phone 7』がAndroidを上回る理由<a class="anchor_super" id="sfc7aa67" href="#sfc7aa67" title="sfc7aa67" style="user-select:none;">&dagger;</a></h2>
<p>Wired Vision</p>
<ul class="list1 list-indent1"><li><a href="http://wiredvision.jp/news/201010/2010101223.html" rel="nofollow">http://wiredvision.jp/news/201010/2010101223.html</a></li></ul>
<ul class="list1 list-indent1"><li>中華Padより端末の品質が良いことは分かった。</li>
<li>広まるかどうかは別だ。Xboxはまあまあ成功したがZuneは悲惨だったし、WindowsCEベースの端末の屍の数を知っている者としては・・・疑問符だらけ？</li></ul>
<ul class="list1 list-indent1"><li>世間的にはiOSやLinuxカーネルベースのMIDだらけになっているところに、いきなりWindowsCEのださい環境は受け入れられるのかどうか・・・。</li></ul>
<ul class="list1 list-indent1"><li>だけどこれら全部OSは違えど、ガワ（ハードウェア）は驚くほど似ている(全部ARMだし)</li></ul>
<ul class="list1 list-indent1"><li>だったらＡＴ互換機みたいにOS差し替え出来るようにするとか、VMWareのような仮想化ソフト入れて複数OSが走るようにすればいいのに。
<ul class="list2 list-indent1"><li>すでにiPadにChromeとか入れてる人もいるらしいけれど。</li></ul></li></ul>
<p>Gigazineのほうでは悲鳴が聞こえているらしい。</p>
<ul class="list1 list-indent1"><li><a href="http://gigazine.net/index.php?/news/comments/20101012_windows_phone7_makers/" rel="nofollow">http://gigazine.net/index.php?/news/comments/20101012_windows_phone7_makers/</a></li>
<li>つまり、Windows Mobile じゃなかったWindows Phone はAndroidより重いＯＳらしい。</li>
<li>こっちが妥当か。</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_30">OpenOCD : PIC18spxファームを更新<a class="anchor_super" id="g3c09efb" href="#g3c09efb" title="g3c09efb" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>割り込みを止めたら途端に安定化した。</li>
<li>なんかレジスタ壊してるのかな？</li>
<li>ということはpic18spxの18F14K50も割り込みを止めたら安定化するかも（未確認）</li></ul>
<p>read more : <a href="pic18blaster.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">pic18blaster</a></p>
<ul class="list1 list-indent1"><li>もしかしたら、スタックサイズが足りてないのかもしれない。</li>
<li>BitBangの処理とかPIC24Fの書き込みの処理ではlongな変数が多く使われているので、フォアグランド側がスタックを多く使う。</li>
<li>PIC18F14K50は元々メモリー(SRAM)が512byteしかないので、スタックもワークもバッファも全部ぎりぎり状態。</li>
<li>スタックオーバーのときのPICは全く意味不明の動作をする。</li>
<li>18F2550はRAMが2Kあるので楽勝。(ほんとか？)</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_31">OpenOCD : pic18spx ファームだけ高速化<a class="anchor_super" id="k39423b6" href="#k39423b6" title="k39423b6" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>あーどうしようAVR用のファームのJTAGコマンドを簡単にPICに移植できてしまった。</li>
<li>ハードウェア支援SPI機能など一切使っていないコードだから当然と言えば当然なんだけど。</li>
<li>しかし動作確認するにはOpenOCD用のDLLソースを激しく書きなおさないといけない。</li>
<li>いっそのことAVR用とPIC用を統合したらいいのに・・・＞俺</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_32">OpenOCD : PIC18spxをJTAGアダプターにする。<a class="anchor_super" id="naa391fd" href="#naa391fd" title="naa391fd" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>高速化完了!</li></ul>
<p>read more : <a href="pic18blaster.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">pic18blaster</a></p>
<pre>C:\pic18blaster&gt;openocd.exe -f blaster.cfg -f stm32.cfg -f batch.cfg
Open On-Chip Debugger 0.5.0-dev (2010-10-10-20:52)
Licensed under GNU GPL v2
For bug reports, read
        http://openocd.berlios.de/doc/doxygen/bugs.html
if load
Info : only one transport option; autoselect 'jtag'
1000 kHz
1000 kHz
adapter_nsrst_delay: 100
jtag_ntrst_delay: 100
=*= dummy_init(void)
TARGET DEV_ID=14 VER=1.1
Info : clock speed 1000 kHz
Info : JTAG tap: stm32.cpu tap/device found: 0x3ba00477 (mfg: 0x23b, part: 0xba00, ver: 0x3)
Info : JTAG tap: stm32.bs tap/device found: 0x16410041 (mfg: 0x020, part: 0x6410, ver: 0x1)
Info : stm32.cpu: hardware has 6 breakpoints, 4 watchpoints
   TapName             Enabled  IdCode     Expected   IrLen IrCap IrMask
-- ------------------- -------- ---------- ---------- ----- ----- ------
 0 stm32.cpu              Y     0x3ba00477 0x3ba00477     4 0x01  0x0f
 1 stm32.bs               Y     0x16410041 0x06412041     5 0x01  0x03
                                           0x06410041
                                           0x06410041
                                           0x06410041
                                           0x06410041
Info : JTAG tap: stm32.cpu tap/device found: 0x3ba00477 (mfg: 0x23b, part: 0xba00, ver: 0x3)
Info : JTAG tap: stm32.bs tap/device found: 0x16410041 (mfg: 0x020, part: 0x6410, ver: 0x1)
Warn : Only resetting the Cortex-M3 core, use a reset-init event handler to reset any peripherals
target state: halted
target halted due to debug-request, current mode: Thread
xPSR: 0x01000000 pc: 0x08000120 msp: 0x20005000
auto erase enabled
Info : device id = 0x20036410
Info : flash size = 64kbytes
wrote 37888 bytes from file main-2000.hex in 7.921875s (4.671 KiB/s)
verified 36912 bytes in 0.671875s (53.651 KiB/s)
shutdown command invoked
=*= dummy_quit(void)
</pre>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_33">OpenOCD : STBEE MINIをJTAGアダプターにする。<a class="anchor_super" id="naa391fd" href="#naa391fd" title="naa391fd" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>完成!</li>
<li>OpenOCDはＯＫ。</li>
<li>avrwriter(HIDspx相当)も動作した。</li>
<li>picwriterは<del>まだ動かない。</del> --- 動くようになりました。</li>
<li>pic24f_writerは未コンパイル。</li></ul>
<p>read more : <a href="arm_blaster.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">arm_blaster</a></p>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_34">OpenOCD : 次のテーマ（予定）<a class="anchor_super" id="la5f0147" href="#la5f0147" title="la5f0147" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>Arduinoのスケッチでやってみようと思うんだけれど、問題はATmegaが5V駆動なことなんだな。</li>
<li>そのまえにArduino持ってないんで、そっち方面から。</li></ul>
<ul class="list1 list-indent1"><li>まず、基板はこれ。古いのを発掘した。</li></ul>
<p><a href="/ATMEL_AVR/jpg/PIC/arduino14k1.jpg" rel="nofollow"><img src="/ATMEL_AVR/jpg/PIC/arduino14k1.jpg" alt="/ATMEL_AVR/jpg/PIC/arduino14k1.jpg" /></a>
<a href="/ATMEL_AVR/jpg/PIC/arduino14k2.jpg" rel="nofollow"><img src="/ATMEL_AVR/jpg/PIC/arduino14k2.jpg" alt="/ATMEL_AVR/jpg/PIC/arduino14k2.jpg" /></a></p>
<ul class="list1 list-indent1"><li>写真はPIC 18F14K50とATmega328搭載基板（Arduino機能互換）</li>
<li>今やATmega328は秋月で＠250円なので、マイコンチップ２個の価格は合わせて450円しかしない。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>ファームはこれ</li></ul>
<p>PIC14K50側</p>
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/upload/PIC/usbserial-uno.zip" rel="nofollow">usbserial-uno.zip</a></li>
<li>昔のファームとの違いは、単にDTRの出力論理を反転しただけのもの。</li>
<li>AVRのリセットへ行く線はコンデンサカップリングのまま。（配線を変えるのも面倒だから）</li></ul>
<p>AVR側</p>
<ul class="list1 list-indent1"><li><a href="http://www.arduino.cc/" rel="nofollow">http://www.arduino.cc/</a></li>
<li>Arduino-0021をダウンロードして、ＰＣにインストール。</li>
<li>AVR側には、ブートローダーとして、Arduino-0021に入っているoptibootのmega328用hexを焼いた。</li></ul>
<p>Arduino-0021のボード設定はunoがデフォルトになっていたので、そのままスケッチを転送して実行できた。</p>
<ul class="list1 list-indent1"><li>サンプルにあった、Basics-&gt;DigitalReadSerialのボーレートだけ115200bpsに変えたものをコンパイル＆転送して、
一応115200で受けてみてなんとなく動いているところまで確認した。</li></ul>
<p>今日はここまで。</p>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_35">OpenOCD : 今度はArduino？<a class="anchor_super" id="jb236c8b" href="#jb236c8b" title="jb236c8b" style="user-select:none;">&dagger;</a></h2>
<p>まず、</p>
<ul class="list1 list-indent1"><li><a href="arm_blaster.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">arm_blaster</a>でAVRに書き込んだときにエラーする問題は対処した。</li>
<li>同じく<a href="arm_blaster.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">arm_blaster</a>でPIC24Fライターがビルドできるようにしておいた。</li>
<li>たぶん繋げば焼けるはず。(PIC24Fって、需要あるのかな)</li></ul>
<p>次、</p>
<ul class="list1 list-indent1"><li>COMポートの列挙の実験 --- ＯＫ。</li>
<li>COMポートのどれがArduino(OpenOCDポート)なのかを検索する --- あれ？出来ないんじゃぁ？</li>
<li>COMポートとUSBデバイス名を紐付ける方法が無いらしい。</li>
<li>ここに書いてあるんだけどユーザー名って面倒くさい。どうやって取得するんだろう。
<pre>C:\Documents and Settings\ユーザー名\Application Data\Arduino\preferences.txt</pre></li>
<li>しかしOpenOCDデバイス(Arduino)のスケッチを書き込んだパソコンで常に試すとは限らない。</li>
<li>どっかに持って行って、OpenOCDを動かすときは、そもそもArduinoすら 入っていないので、preference.txtは存在しない。</li>
<li>急に<strong>面倒くさく</strong>なってきた。</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_36">Windows8はARMプロセッサ上で動作？？？<a class="anchor_super" id="fa1d0bd0" href="#fa1d0bd0" title="fa1d0bd0" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li><a href="http://www.eetimes.com/electronics-news/4209600/Why-Microsoft-Windows-8-will-run-ARM?cid=NL_EETimesDaily" rel="nofollow">http://www.eetimes.com/electronics-news/4209600/Why-Microsoft-Windows-8-will-run-ARM?cid=NL_EETimesDaily</a></li>
<li>先般MicrosoftがARMのアーキテクチャーライセンスを取得した理由はこれか？</li></ul>
<ul class="list1 list-indent1"><li>つまり、デスクトップＣＰＵは死んだ。</li>
<li>これからはモバイルWindows8なのか？</li></ul>
<p>まるで<strong>悪い冗談だ</strong></p>
<ul class="list1 list-indent1"><li>Atomの立場はどうなる？</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_37">OpenOCD : Arduino版の開発はペンディング？<a class="anchor_super" id="w8a4ee44" href="#w8a4ee44" title="w8a4ee44" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>簡単に作れるのが分かった途端に、急激に興味が失せてしまった。</li>
<li>それに5Vなので接続がやっかいだ。</li></ul>
<p>ところで、Arduinoのスケッチを集積したCPANのようなサイトはないのだろうか？</p>
<ul class="list1 list-indent1"><li>スケッチなんて、どうせ先にだれかが作っているに違いないと思うようになった。</li></ul>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_38">久々に互換機組み立て<a class="anchor_super" id="v0ee15bc" href="#v0ee15bc" title="v0ee15bc" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>あまり変わり映えしないんだけれど、BIOSTAR(G31)のマザーをGIGA G41M-ES2Lのと取り替えてみた。</li>
<li>CPUもCeleron420(1.6GHz single-core)からCeleron E3300(2.5GHz dual-core)に変えてみた。</li></ul>
<p>コストは１万円と少し。</p>
<ul class="list1 list-indent1"><li>オーバークロックは3.2GHz(FSB 1066MHz)までやってみたものの、Windowsがメモリーエラーを吐いて止まるので</li>
<li>逆にFSB533MHz(1.6GHz駆動)に落としてみた。</li>
<li>ついでにCore電圧も1V未満にした。</li>
<li>GIGAのEasyTuneでファンスピードも落として静かにした。</li></ul>
<ul class="list1 list-indent1"><li>Atomと比べると、ここまで落としても倍速×２CPUだ。ただ、G41チップセットの発熱はやや大きいのでどうしてもファンは回さなければならない。</li></ul>
<ul class="list1 list-indent1"><li>intelの石では、このあたりの組み合わせ(Core2の45nmCPUで最も廉価な当たり)が一番好きだな。速い安い旨い。</li>
<li>チップセットの発熱がもっと抑えられれば尚良しなんだけれど、昔持っていた発熱の少ないSiS671マザーは、へたれてしまって不安定で使えなくなった。</li></ul>
<ul class="list1 list-indent1"><li>現行のCore i3/i5はCPUもマザーも高価だし、性能比はCore2とあんまり変わらないので割高に感じる。</li>
<li>その先の世代はどうなんだろう。性能が上がっていくのは確かだが、ユーザーニーズに合わなくなってきていないだろうか。</li></ul>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_39">Android携帯は流行るのか？<a class="anchor_super" id="v49556b8" href="#v49556b8" title="v49556b8" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>iPhoneのキャリアがSBM一社であるので、他社auとdocomoは対抗馬Android端末を推しているわけで、流行り現象のひとつであることは確か。</li></ul>
<p>疑問点</p>
<ul class="list1 list-indent1"><li>iPhoneと同様に、パケットがだだもれ（自動的に大量発生する）になるので、パケホーダイを使わざるをえなくなる。</li>
<li>そうすると月間維持費は（従来より）高くなる。</li>
<li>それが嫌なら、<a href="http://andronavi.com/2010/06/28588" rel="nofollow">IS01</a>のようにSIMカードを抜いてWiFi専用機として使う（つまり携帯電話は従来のものを併用）しかしWiFi電波の無いところでは使えないのでそれはそれで不便な端末になる。</li></ul>
<ul class="list1 list-indent1"><li>PDAのようなものは昔もいくつか存在した。
<ul class="list2 list-indent1"><li>Psion-&gt;Palm(SONY CLIE)-&gt;WindowsCE-&gt;Sharp ZAURUS-&gt;<span class="noexists"><a href="./?cmd=edit&amp;page=NetWalker&amp;refer=2010-10">NetWalker</a></span>-&gt;...</li></ul></li>
<li>つまり、何が言いたい？
<ul class="list2 list-indent1"><li>PDAのカテゴリーに属する端末は、一時期は流行るけれど、いずれ廃れるものなんだ。</li>
<li>iPhoneやAndroidが流行るのももしかしたら一時的な現象かもしれない。</li>
<li>通信料はたしかに頭の痛い問題ではあるけれど、端末としては衝動買い可能なレベルだ。</li></ul></li></ul>
<p>全然関係ないけど、うちには今もIBMのWorkPadとNECの<span class="noexists"><a href="./?cmd=edit&amp;page=MobileGear&amp;refer=2010-10">MobileGear</a></span>(WinCE)がある。</p>
<ul class="list1 list-indent1"><li>さすがにPsionは持っていない。</li>
<li>ZAURUSやNetWalkerについてはキーボードと字が小さすぎて駄目。手を出さなかった。</li></ul>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_40">Appleという名のガラパゴス諸島<a class="anchor_super" id="g3630380" href="#g3630380" title="g3630380" style="user-select:none;">&dagger;</a></h2>
<p>マスコミやGIGAZINEが伝えないマジコン規制の本当の恐ろしさ</p>
<ul class="list1 list-indent1"><li><a href="http://d.hatena.ne.jp/heatwave_p2p/20101017/p2" rel="nofollow">http://d.hatena.ne.jp/heatwave_p2p/20101017/p2</a></li></ul>
<ul class="list1 list-indent1"><li>iTunesミュージックストアが閉じたときのことを全然考えていなかった。</li>
<li>PalmやCEが廃れたように、<strong>いずれはApple社にも落日の日が来る。</strong>（消滅したSunのことを考えるとよい。）</li>
<li>そうすると何が起きるか。</li>
<li>そうだ。<strong>今まで購入した楽曲やアプリが風化し消滅するのだ。しかもAppleにとってはなんのペナルティもなく合法的に！</strong></li></ul>
<ul class="list1 list-indent1"><li>現在所有しているiPhone/iPodが使えているうちはいいが、故障したり使えなくなったときには購入したデジタルデータは使えなくなる。</li></ul>
<p>デジタル化というのは、そういうものかもしれないが、</p>
<ul class="list1 list-indent1"><li>ありえない、というか許せない気持ちになる。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>実際のところ、iPhone/iPodのリチウム蓄電池には寿命がある。（せいぜい数年だ）</li>
<li>現在は１〜２年でAppleは新製品を出し、皆がそれに買い換えるので蓄電池の寿命は問題視されていないが、Appleが新製品を出さなくなったらそこで終了だ。</li>
<li>もちろん、AppleがiPadビジネスをやめる可能性はいまのところ少ない。</li>
<li>しかし、新製品を出す、あるいは現行製品の供給を続けるという確約がされているわけではない。</li>
<li>電子機器を多く製造している共産圏のとある国が崩壊した場合にはやはり安価な供給は続けられなくなるだろう。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>iPhone/iPadの一時の繁栄は幻想に過ぎない</li>
<li>iTunesによる囲い込みは、結局のところ、Appleという名のガラパゴス諸島にすぎないのだ。</li></ul>
<p><strong>これは、いまのうちに問題提起しておくべきことなのだ</strong></p>

<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_41">MacBookがさっそくバラされている件<a class="anchor_super" id="z864e051" href="#z864e051" title="z864e051" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li><a href="http://www.ifixit.com/Teardown/MacBook-Air-11-Inch-Model-A1370-Teardown/3745/1" rel="nofollow">http://www.ifixit.com/Teardown/MacBook-Air-11-Inch-Model-A1370-Teardown/3745/1</a></li>
<li>HDDみたいなやつは全部バッテリーか。</li>
<li>ある意味爆弾抱えて歩くようなものか。くわばら</li>
<li>Core2やめてA4プロセッサにすればいいのに。（そうすると後方互換性がなくなるし、iPhoneのSDKも動かなくなる）</li></ul>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_42">STM8L-Discovery<a class="anchor_super" id="t584b116" href="#t584b116" title="t584b116" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li><a href="http://jp.mouser.com/stm8ldiscovery/" rel="nofollow">http://jp.mouser.com/stm8ldiscovery/</a></li>
<li>LCDがついた。</li>
<li>もはや切り離せない基板。</li></ul>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_43"><span class="noexists"><a href="./?cmd=edit&amp;page=PlayStation&amp;refer=2010-10">PlayStation</a></span> Move Teardown<a class="anchor_super" id="eb0f1fba" href="#eb0f1fba" title="eb0f1fba" style="user-select:none;">&dagger;</a></h2>
<p>iFixit</p>
<ul class="list1 list-indent1"><li><a href="http://www.ifixit.com/Teardown/PlayStation-Move-Teardown/3594/1" rel="nofollow">http://www.ifixit.com/Teardown/PlayStation-Move-Teardown/3594/1</a></li>
<li>STM32F103VBT6</li>
<li>CQ-STARMと一緒じゃないか。</li></ul>
<p>ここにも解析している人が居た。</p>
<ul class="list1 list-indent1"><li><a href="http://www.kako.com/neta/2010-014/2010-014.html" rel="nofollow">http://www.kako.com/neta/2010-014/2010-014.html</a></li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_44">STM8S-Discovery基板を用いたOpenOCDライター<a class="anchor_super" id="xb5aa32c" href="#xb5aa32c" title="xb5aa32c" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>動いた。</li></ul>
<p>read more : <a href="stm8s_blaster.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">stm8s_blaster</a></p>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_45">ちょっと良さげなキーボード<a class="anchor_super" id="aed8dbd4" href="#aed8dbd4" title="aed8dbd4" style="user-select:none;">&dagger;</a></h2>
<p>ARCHISITE</p>
<ul class="list1 list-indent1"><li><a href="http://www.archisite.co.jp/archiss_as-kb87.htm" rel="nofollow">http://www.archisite.co.jp/archiss_as-kb87.htm</a></li>
<li>7980円</li>
<li>欲しいかも。</li>
<li>どの軸を選んだらよいのだ？</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />
   </div>
  </div>
 </div>
 <div style="clear:both;height:1em;"></div>
 <div id="logo"><a href="/ATMEL_AVR/html/" style="background-image: url(image/title.jpg);"></a></div>
 <div id="personal"><ul><li class="login"><a href="http://">ログインまたはアカウント作成</a></li></ul></div>
 <div id="footer">
  <div id="f-officialico">
   <a href="http://pukiwiki.sourceforge.jp/"><img src="../image/b_pukiwiki.official.png" alt="PukiWiki-official" /></a>
  </div>
  <div id="f-officialdevico">
   <a href="http://pukiwiki.sourceforge.jp/dev/"><img src="../image/b_pukiwiki.dev.png" alt="PukiWiki-dev" /></a>
  </div>
  <div id="f-list">
   <ul><li id="lastmod">Last-modified: 2014-11-17 (月) 14:44:26<span class="page_passage" data-mtime="2014-11-17T14:44:26+09:00"></span></li><li>Site admin: <a href="http://pukiwiki.example.com/">anonymous</a></li>    <li>Powered by PukiWiki</li>
    <li><a href="http://www.luntf.com/">Monobook for PukiWiki</a></li>
   </ul>
  </div>
  <div style="clear:both;"></div>
 </div>
</div>
</body>
</html>
