<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">

<head>
 <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
 <title>2010-07 - PukiWiki</title>

<!---
 <link rel="stylesheet" media="screen and (max-width:768px)" href="../skin/180wiki-sp.css" />

 --->

 <link rel="stylesheet" media="screen and (max-width:768px)" href="../skin/monobook/mobile.css" />
 <link rel="stylesheet" media="screen and (min-width:769px)" href="../skin/monobook/monobook.css" />

 <link rel="stylesheet" type="text/css" media="print" href="../skin/monobook/monobook.print.css" />
 <link rel="alternate" type="application/rss+xml" title="RSS" href="./?cmd=rss" />

 <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>
<div id="globalWrapper">
 <div id="menubar">
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/html/" title="FrontPage" class="link_page_passage">Ｔｏｐ</a></li></ul>
<hr class="full_hr" />
<p><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-EF-BD-98-.html" class="link_page_passage">ＨＩＤａｓｐｘ</a></p>
<ul class="list1 list-indent1"><li><a href="EF-BC-A4-EF-BD-8F-EF-BD-97-EF-BD-8E-EF-BC-AC-EF-BD-8F-EF-BD-81-EF-BD-84-.html" class="link_page_passage">ＤｏｗｎＬｏａｄ</a></li>
<li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E9-AB-98-E9-80-9F-E5-8C-96-.html" class="link_page_passage">ＨＩＤａｓｐ高速化</a></li>
<li><strong><a href="Newest.html" title="Newest" class="link_page_passage">開発日記</a></strong> <a href="SiteMap.html" title="SiteMap" class="link_page_passage">ログ</a></li></ul>
<p><a href="E5-88-B6-E4-BD-9C-.html" class="link_page_passage">制作</a></p>
<p><a href="AVRetc.html" title="AVRetc" class="link_page_passage">ＡＶＲ関係</a></p>
<ul class="list1 list-indent1"><li><a href="AVR_Monit.html" class="link_page_passage">AVR_Monit</a></li>
<li><a href="AVR_term.html" class="link_page_passage">AVR_term</a></li>
<li><a href="W32_term.html" class="link_page_passage">W32_term</a></li>
<li><a href="HIDmon88.html" class="link_page_passage">HIDmon88</a></li>
<li><a href="HIDtester.html" class="link_page_passage">HIDtester</a></li>
<li><a href="usbRS232.html" class="link_page_passage">usbRS232</a></li>
<li><a href="Arduino2313.html" class="link_page_passage">Arduino2313</a></li>
<li><a href="E3-83-87-E3-82-B8-E3-82-BF-E3-83-AB-E3-83-86-E3-82-B9-E3-82-BF-E3-83-BC-.html" class="link_page_passage">デジタルテスター</a></li>
<li><a href="ATmega88E7-94-9F-E6-B4-BB-.html" class="link_page_passage">ATmega88生活</a></li>
<li><a href="KeyBoardE3-83-9E-E3-83-8B-E3-82-A2-.html" class="link_page_passage">KeyBoardマニア</a></li>
<li><a href="KeyBoardE3-83-9E-E3-83-8B-E3-82-A2-II.html" class="link_page_passage">KeyBoardマニアII</a></li>
<li><a href="Arduino400.html" class="link_page_passage">Arduino400</a></li>
<li><a href="PICspx.html" title="PICspx" class="link_page_passage">PICライター</a></li>
<li><a href="hid_blaster.html" title="hid_blaster" class="link_page_passage">ARMライター</a></li>
<li><a href="E8-B5-A4-E5-A4-96-E7-B7-9A-E3-83-AA-E3-83-A2-E3-82-B3-E3-83-B3-.html" class="link_page_passage">赤外線リモコン</a></li></ul>
<p><a href="ARM.html" class="link_page_passage">ARM</a></p>
<ul class="list1 list-indent1"><li><a href="armon.html" title="armon" class="link_page_passage">STM32ブートローダー</a></li>
<li><a href="stm32f103.html" title="stm32f103" class="link_page_passage">STM8S-Discovery改造</a></li>
<li><a href="stm8s_blaster.html" title="stm8s_blaster" class="link_page_passage">STM8S-OpenOCDライター</a></li>
<li><a href="LPCXpresso.html" class="link_page_passage">LPCXpresso</a></li>
<li><a href="lpc2D-armon.html" title="lpc-armon" class="link_page_passage">LPC用ブートローダー</a></li>
<li><a href="LPCUSB.html" title="LPCUSB" class="link_page_passage">NXP用LPCUSB</a></li>
<li><a href="ARM7mon.html" title="ARM7mon" class="link_page_passage">NXP用ブートローダー</a></li>
<li><a href="LPC1114.html" title="LPC1114" class="link_page_passage">MARY基板</a></li>
<li><a href="LPC1114FN28.html" class="link_page_passage">LPC1114FN28</a></li>
<li><a href="arm_blaster.html" title="arm_blaster" class="link_page_passage">OpenOCD　JTAGアダプター</a></li>
<li><a href="openocd2D-build.html" title="openocd-build" class="link_page_passage">OpenOCDビルド方法</a></li>
<li><a href="arm2D-gcc.html" title="arm-gcc" class="link_page_passage">arm-gccビルド方法</a></li>
<li><a href="mapleIDE.html" title="mapleIDE" class="link_page_passage">mapleIDEの改造</a></li>
<li><a href="libmapleE3-81-A7-E4-BB-AE-E6-83-B3-COM.html" class="link_page_passage">libmapleで仮想COM</a></li></ul>
<p>PIC32</p>
<ul class="list1 list-indent1"><li><a href="PIC32MX.html" class="link_page_passage">PIC32MX</a></li>
<li><a href="Pinguino.html" title="Pinguino" class="link_page_passage">Pinguinoで遊ぼう</a></li>
<li><a href="HIDBootX.html" title="HIDBootX" class="link_page_passage">ブートローダーを作る</a></li>
<li><a href="uartflash32.html" title="uartflash32" class="link_page_passage">シリアルブートローダー</a></li>
<li><a href="PIC32MX_USBCDC.html" title="PIC32MX_USBCDC" class="link_page_passage">USB仮想シリアル</a></li>
<li><a href="USB_CUSTOM.html" title="USB_CUSTOM" class="link_page_passage">USBカスタムデバイス</a></li>
<li><a href="PIC32mon.html" title="PIC32mon" class="link_page_passage">USB簡易モニター</a></li>
<li><a href="USBE3-82-AA-E3-82-B7-E3-83-AD-E3-82-B9-E3-82-B3-E3-83-BC-E3-83-97-.html" class="link_page_passage">USBオシロスコープ</a></li>
<li><a href="USB_HOST.html" title="USB_HOST" class="link_page_passage">USBホスト</a>　</li>
<li><a href="Bluetooth.html" title="Bluetooth" class="link_page_passage">PIC32でBluetooth</a>　</li>
<li><a href="USBAudio.html" class="link_page_passage">USBAudio</a>　</li>
<li><a href="USBStudy.html" class="link_page_passage">USBStudy</a>　</li>
<li><a href="pic32vga.html" title="pic32vga" class="link_page_passage">VGA出力に挑戦</a></li>
<li><a href="tinyBasic2.html" title="tinyBasic2" class="link_page_passage">BASICを動かす</a></li>
<li><a href="WinUSB.html" class="link_page_passage">WinUSB</a>　</li>
<li><a href="PIC32MXcust.html" title="PIC32MXcust" class="link_page_passage">勝手に改蔵*PIC32</a></li></ul>
<p>PIC18F</p>
<ul class="list1 list-indent1"><li><a href="pic18boot.html" title="pic18boot" class="link_page_passage">HIDブートローダー</a></li>
<li><a href="pic18spx.html" title="pic18spx" class="link_page_passage">AVR/PIC両用ライター</a></li>
<li><a href="pic18blaster.html" title="pic18blaster" class="link_page_passage">ARMライター</a></li>
<li><a href="pic18monit.html" title="pic18monit" class="link_page_passage">usb汎用クラス</a></li>
<li><a href="usbserial.html" title="usbserial" class="link_page_passage">usbシリアル変換</a></li>
<li><a href="pic18hidkey.html" title="pic18hidkey" class="link_page_passage">usbキーボード変換</a></li>
<li><a href="sdcc.html" title="sdcc" class="link_page_passage">sdccを使いこなす</a></li>
<li><a href="mcc18.html" title="mcc18" class="link_page_passage">mcc18を使いこなす</a></li>
<li><a href="HIDmon2D-2550.html" class="link_page_passage">HIDmon-2550</a></li>
<li><a href="HIDmon2D-14K50.html" class="link_page_passage">HIDmon-14K50</a></li>
<li><a href="PICmonitor.html" class="link_page_passage">PICmonitor</a></li></ul>
<p>試行錯誤の記録</p>
<ul class="list1 list-indent1"><li><a href="UBW.html" title="UBW" class="link_page_passage">UBWを試す</a></li>
<li><a href="HIDboot.html" title="HIDboot" class="link_page_passage">旧HIDboot</a></li>
<li><a href="PIC18F2550.html" title="PIC18F2550" class="link_page_passage">PIC18F2550試用記</a></li>
<li><a href="PIC18F4550.html" title="PIC18F4550" class="link_page_passage">PIC18F4550試用記</a></li></ul>
<p>その他マイコン</p>
<ul class="list1 list-indent1"><li><a href="NEC78K.html" class="link_page_passage">NEC78K</a></li>
<li><a href="RX62N.html" class="link_page_passage">RX62N</a></li>
<li><a href="SH2A.html" class="link_page_passage">SH2A</a></li>
<li><a href="EF-BC-A8-EF-BC-98-.html" class="link_page_passage">Ｈ８</a></li>
<li><a href="FM3.html" class="link_page_passage">FM3</a></li>
<li><a href="ubuntuXP.html" title="ubuntuXP" class="link_page_passage">XPからubuntuに乗り換え</a></li>
<li><a href="Android.html" class="link_page_passage">Android</a></li>
<li><a href="Xen2D-hypervisor.html" class="link_page_passage">Xen-hypervisor</a></li>
<li><a href="Windows8E3-82-AB-E3-82-B9-E3-82-BF-E3-83-9E-E3-82-A4-E3-82-BA-.html" class="link_page_passage">Windows8カスタマイズ</a></li></ul>
<p>開発日記</p>
<ul class="list1 list-indent1"><li><a href="20152D-04.html" class="link_page_passage">2015-04</a></li></ul>
<hr class="full_hr" />
<p>ノウハウ</p>
<ul class="list1 list-indent1"><li><a href="AVRUSB_Tips.html" class="link_page_passage">AVRUSB_Tips</a></li>
<li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E6-83-85-E5-A0-B1-.html" class="link_page_passage">ＨＩＤａｓｐ情報</a></li>
<li><a href="E6-B1-8E-E7-94-A8-EF-BC-B5-EF-BC-B3-EF-BC-A2-2D-EF-BC-A9-EF-BC-AF-.html" class="link_page_passage">汎用ＵＳＢ-ＩＯ</a></li></ul>
<hr class="full_hr" />
<p>・<a href="AVRlink.html" title="AVRlink" class="link_page_passage">リンク</a></p>
<p>フリースペース</p>
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/cgi-bin/note/index.cgi" rel="nofollow">ゲストブック</a></li></ul>
<hr class="full_hr" />
<p><a href="EF-BC-B7-EF-BD-89-EF-BD-84-EF-BD-85-EF-BC-B4-EF-BD-85-EF-BD-98-EF-BD-94-.html" title="ＷｉｄｅＴｅｘｔ" class="link_page_passage">旧コンテンツ</a><br />
<a href="EF-BC-B7-EF-BD-89-EF-BD-8E-EF-BC-B6-EF-BD-89-EF-BD-93-EF-BD-94-EF-BD-81-.html" class="link_page_passage">ＷｉｎＶｉｓｔａ</a><br />
<a href="E3-82-A4-E3-83-B3-E3-82-BF-E3-83-BC-E3-83-95-E3-82-A7-E3-83-BC-E3-82-B9-E8-80-83-.html" class="link_page_passage">インターフェース考</a></p>
<hr class="full_hr" />
<h5>最新の20件</h5>
<div><strong>2024-06-21</strong>
<ul class="recent_list">
 <li><a href="SMRE3-81-AA-HDDE3-83-99-E3-83-B3-E3-83-81-E3-83-9E-E3-83-BC-E3-82-AF-.html" class="link_page_passage">SMRなHDDベンチマーク</a></li>
 <li><a href="20222D-08.html" class="link_page_passage">2022-08</a></li>
 <li><a href="UEFI_Basic.html" class="link_page_passage">UEFI_Basic</a></li>
</ul>
<strong>2024-06-20</strong>
<ul class="recent_list">
 <li><a href="Newest.html" class="link_page_passage">Newest</a></li>
 <li><a href="MenuBar.html" class="link_page_passage">MenuBar</a></li>
</ul>
<strong>2022-12-06</strong>
<ul class="recent_list">
 <li><a href="MSE3-82-A2-E3-82-AB-E3-82-A6-E3-83-B3-E3-83-88-E3-81-AE-WindowsE3-81-AE-CE3-83-89-E3-83-A9-E3-82-A4-E3-83-96-E3-82-92-E4-BF-AE-E5-BE-A9-E3-81-99-E3-82-8B-.html" class="link_page_passage">MSアカウントのWindowsのCドライブを修復する</a></li>
</ul>
<strong>2022-09-29</strong>
<ul class="recent_list">
 <li><a href="AndroidE3-81-AB-SSLE8-87-AA-E5-B7-B1-E7-BD-B2-E5-90-8D-E8-A8-BC-E6-98-8E-E6-9B-B8-E3-82-92-E5-85-A5-E3-82-8C-E3-82-8B-.html" class="link_page_passage">AndroidにSSL自己署名証明書を入れる</a></li>
</ul>
<strong>2022-08-31</strong>
<ul class="recent_list">
 <li><a href="E7-B0-A1-E6-98-93-E9-80-9F-E5-BA-A6-E6-B8-AC-E5-AE-9A-E3-82-B5-E3-82-A4-E3-83-88-.html" class="link_page_passage">簡易速度測定サイト</a></li>
 <li><a href="E3-83-8D-E3-83-83-E3-83-88-E3-83-AF-E3-83-BC-E3-82-AF-BOOT.html" class="link_page_passage">ネットワークBOOT</a></li>
</ul>
<strong>2022-08-26</strong>
<ul class="recent_list">
 <li><a href="E7-B0-A1-E6-98-93-E3-82-B3-E3-83-B3-E3-83-91-E3-82-A4-E3-83-AB-E3-83-99-E3-83-B3-E3-83-81-.html" class="link_page_passage">簡易コンパイルベンチ</a></li>
</ul>
<strong>2022-08-01</strong>
<ul class="recent_list">
 <li><a href="/ATMEL_AVR/html/" class="link_page_passage">FrontPage</a></li>
 <li><a href="20152D-04.html" class="link_page_passage">2015-04</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-EF-BD-98-.html" class="link_page_passage">ＨＩＤａｓｐｘ</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E6-83-85-E5-A0-B1-.html" class="link_page_passage">ＨＩＤａｓｐ情報</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-.html" class="link_page_passage">ＨＩＤａｓｐ</a></li>
 <li><a href="NEC78K.html" class="link_page_passage">NEC78K</a></li>
 <li><a href="AVRetc.html" class="link_page_passage">AVRetc</a></li>
 <li><a href="AVR_Monit.html" class="link_page_passage">AVR_Monit</a></li>
 <li><a href="20082D-08.html" class="link_page_passage">2008-08</a></li>
</ul>
<strong>2022-07-31</strong>
<ul class="recent_list">
 <li><a href="EF-BC-B7-EF-BD-89-EF-BD-84-EF-BD-85-EF-BC-B4-EF-BD-85-EF-BD-98-EF-BD-94-.html" class="link_page_passage">ＷｉｄｅＴｅｘｔ</a></li>
</ul>
</div>
</div>
 <div id="mainColumnWrapper">
  <div id="main-column">
   <div id="navigator"><ul><li class="selected" id="separate"><a href="">本文</a></li><li><a href="./?cmd=edit&amp;page=2010-07">編集</a></li><li><a href="./?cmd=diff&amp;page=2010-07">差分</a></li></ul></div>
   <div id="content">
    <h1 class="firstHeading">2010-07</h1><div id="contentSub"></div>
    <p><a href="20102D-06.html" class="link_page_passage">2010-06</a>←　→ <a href="pic18spx.html" title="pic18spx" class="link_page_passage">ＡＶＲ／ＰＩＣ両用ライター</a>　<a href="usbserial.html" title="usbserial" class="link_page_passage">usbシリアル変換 </a>　<a href="pic18hidkey.html" title="pic18hidkey" class="link_page_passage">usbキーボード </a>　<a href="pic18spx.html" title="pic18spx" class="link_page_passage">簡易ロジアナ、赤外線リモコン信号観測</a></p>
<h3 id="content_1_0">７月： 全然関係ないけど<strong><a href="http://ja.wikipedia.org/wiki/%E3%82%BB%E3%82%BF_(%E4%BC%81%E6%A5%AD)" rel="nofollow">セタ</a></strong>と<strong><a href="http://www.yumis.net/tanabata/" rel="nofollow">七夕</a></strong>って、似てるよね。似てない？<a class="anchor_super" id="s46d863e" href="#s46d863e" title="s46d863e" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>はい、全然似てません。</li>
<li>Powerトダイ、懐かしいっすね。</li></ul>
<p><br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_1">先月のまとめ<a class="anchor_super" id="r452ccbc" href="#r452ccbc" title="r452ccbc" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>JTAGケーブル(ライター)に挑戦。 --- ハードウェアは完成したが、ファームを１バイトも書いていない。</li>
<li>OpenOCDを使ってみる。 --- <strong>全く使い物にならない</strong>、ということがわかった。</li></ul>
<ul class="list2 list-indent2"><li><a href="http://hp.vector.co.jp/authors/VA000177/html/2010-06.html?1#l02c94fd" rel="nofollow">OpenOCD：全く動いていないわけではない </a></li>
<li><a href="http://hp.vector.co.jp/authors/VA000177/html/2010-06.html?1#t2a56e2e" rel="nofollow">OpenOCDダメダメ説</a></li></ul>
<p>ところが<strong>どすこい</strong>。</p>
<ul class="list1 list-indent1"><li>FT2232を使ってFTD2xxドライバーで使うOpenOCDはめちゃ快適。</li>
<li>この<strong>天国と地獄</strong>の差はいったいなんだったんだろう。</li></ul>
<p><br /></p>
<p><strong>今月の<del>暇つぶし</del>目標</strong></p>
<ul class="list1 list-indent1"><li>JTAGケーブル(ライター)に挑戦。（まだするのか？）</li></ul>
<p><br />
<br />
<br />
<br /></p>
<div class="contents">
<a id="contents_1"></a>
<ul class="list2 list-indent1"><li><a href="#s46d863e">７月： 全然関係ないけどセタと七夕って、似てるよね。似てない？</a></li></ul>
<ul class="list1 list-indent1"><li><a href="#r452ccbc">先月のまとめ</a></li>
<li><a href="#i44d8a41">先月のできごとの続き</a></li>
<li><a href="#ec6727f4">訃報: SF作家 ジェイムズ・P・ホーガン、逝去</a>
<ul class="list2 list-indent1"><li><a href="#j3b8dd14">ご冥福をお祈りいたします</a></li></ul></li>
<li><a href="#a123c25b">Atomが組み込み分野で成功しない理由</a></li>
<li><a href="#i583ade7">FT2232DでJTAG-key Cloneを作り始める。</a></li>
<li><a href="#bf2f29ed">FT2232でOpenOCD:あっさり動いた。</a></li>
<li><a href="#q944a437">寄り道：EUC/SJISが使えるjedを玄箱にインストールする.</a></li>
<li><a href="#id7e460c">Palmは復活するのか？</a></li>
<li><a href="#uf2050d0">FT2232でOpenOCD:これは良く出来ている。</a></li>
<li><a href="#k1178768">STM8S-Discovery:ST-Linkはマスストレージ？</a></li>
<li><a href="#he01c81a">ネットブック人気はもう復活しない。永久に</a></li>
<li><a href="#xc823f5f">STM8S-Discovery:ひとおもいにERASE</a></li>
<li><a href="#e41e8c13">某日産のECU納期遅れは・・・</a></li>
<li><a href="#k315a6c0">VIAの新CPU「PV530」搭載マザーが発売に</a></li>
<li><a href="#c76d31aa">シャープ、次世代XMDFソリューションで電子書籍事業に参入</a></li>
<li><a href="#u7888ffe">STM8S-Discovery:中途半端に互換性の無い奴ら</a>
<ul class="list2 list-indent1"><li><a href="#da65d700">MDとLDの違い。</a></li></ul></li>
<li><a href="#ia784eb2">とりあえず気を取り直して</a></li>
<li><a href="#qdb3ab98">STM8S-Discovery:armonが動いたので、今後の展望</a>
<ul class="list2 list-indent1"><li><a href="#j8c16728">ついでに FLASHの erase と write を仮実装してみた。</a></li>
<li><a href="#z96eb41f">ARM(Thumb)のメモリー馬鹿食いの原因が少し分かったような気がした。</a></li></ul></li>
<li><a href="#c8d8b356">MicrosoftへのARMのライセンスは何を意味するのか</a></li>
<li><a href="#bff58e32">STM8S-Discovery:このまま挫折したままかも。</a></li>
<li><a href="#pc91a99a">苺：■STM32マイコンボード 『STBee Mini』(72MHz, 128K+20K)</a></li>
<li><a href="#t2fa7d85">STM32:GPIOポート</a></li></ul>
</div>

<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_2"><a href="20102D-06.html" title="2010-06" class="link_page_passage">先月</a>のできごとの続き<a class="anchor_super" id="i44d8a41" href="#i44d8a41" title="i44d8a41" style="user-select:none;">&dagger;</a></h2>
<p>単なる推測でものを言ってみる。</p>
<ul class="list1 list-indent1"><li>OpenOCDのgitリポジトリのソースはあまり安定していないっぽい。</li>
<li>OpenOCDのaltera-usb-blasterサポートは、とても<strong>実用向けとは言えない。</strong></li></ul>
<p>なので、USB Blaster(こちらの中身はPIC18Fだが、純正品でも同じ)でARMのFlash書き換え（とかgdbデバッグ）をやろう、というのは暴挙となる可能性が高い。</p>
<ul class="list1 list-indent1"><li>ではどうするか？</li>
<li>（１）USB Blasterは諦めてFT2232Lでハードを作り直す。</li>
<li>（２）自前のPIC18Fファームを起こして、ARMのFlash Writerを作る。</li></ul>
<p>後者のほうが、より<strong>｛AVRチップでAVRライターを作るの愚｝</strong>に近いような気がする。</p>
<ul class="list1 list-indent1"><li>でも、手っ取り早くARMのFlashを書き換えるには（１）のほうがいいのかな。</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_3">訃報: SF作家 ジェイムズ・P・ホーガン、逝去<a class="anchor_super" id="ec6727f4" href="#ec6727f4" title="ec6727f4" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li><a href="http://slashdot.jp/science/10/07/13/0557232.shtml" rel="nofollow">http://slashdot.jp/science/10/07/13/0557232.shtml</a></li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_4">ご冥福をお祈りいたします<a class="anchor_super" id="j3b8dd14" href="#j3b8dd14" title="j3b8dd14" style="user-select:none;">&dagger;</a></h3>
<p><br />
<br />
<br />
<br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_5">Atomが組み込み分野で成功しない理由<a class="anchor_super" id="a123c25b" href="#a123c25b" title="a123c25b" style="user-select:none;">&dagger;</a></h2>
<p>■元麻布春男の週刊PCホットライン■</p>
<ul class="list1 list-indent1"><li><a href="http://pc.watch.impress.co.jp/docs/column/hot/20100713_380209.html" rel="nofollow">http://pc.watch.impress.co.jp/docs/column/hot/20100713_380209.html</a></li></ul>
<p>私が考える理由としては、</p>
<ul class="list1 list-indent1"><li>（１）Atomに適切なＯＳがない。
<ul class="list2 list-indent1"><li>以前WindowsXPというジャストフィットなＯＳがあったけれど今はない。</li>
<li>WindowsCE系は（超最新版でも）無論、論外。</li>
<li>ubuntu,chrome,androidいずれをとってもARMでも充分動くのでAtomを選ぶ理由がない。</li></ul></li>
<li>（２）（チップセット込みの）コストが高い。</li>
<li>（３）消費電力が大きい。</li>
<li>（４）フットプリントが大きい。</li></ul>
<p>組み込みに向かないというよりむしろ、AtomでiPadのようなものを作ろうとしたときのダメな点を列挙しただけか。</p>
<ul class="list1 list-indent1"><li>もちろんiPadよりも廉価で小型で省電力な組み込みには絶対<strong>向くはずがない</strong>よ。普通に考えて。</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_6">FT2232DでJTAG-key Cloneを作り始める。<a class="anchor_super" id="i583ade7" href="#i583ade7" title="i583ade7" style="user-select:none;">&dagger;</a></h2>
<p>秋月の1700円モジュールは手持ちがあった。</p>
<p><a href="http://akizukidenshi.com/img/goods/L/M-02990.JPG" rel="nofollow"><img src="http://akizukidenshi.com/img/goods/L/M-02990.JPG" alt="http://akizukidenshi.com/img/goods/L/M-02990.JPG" /></a></p>
<p>参考にしたＵＲＬ</p>
<ul class="list1 list-indent1"><li><a href="http://micom.hamazo.tv/e1822876.html" rel="nofollow">http://micom.hamazo.tv/e1822876.html</a></li>
<li><a href="http://www.joernonline.de/" rel="nofollow">http://www.joernonline.de/</a></li></ul>
<p>レベルコンバータがないので、手持ちの74HC573とATtiny2313（nRSTとかnSRSTは遅いのでゲート代わり）を使って作るつもり。</p>
<ul class="list1 list-indent1"><li>とりあえずレイアウトだけ作った。</li>
<li>ゲートの電圧はLEDとTrでひねり出す超いいかげんだけど内容は秘密。</li></ul>
<p>あーWin32用のOpenOCDバイナリーつくるのが超面倒くさそう・・・。</p>
<ul class="list1 list-indent1"><li>どうしてWin32はmake一発で出来ないのかねぇ。</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_7">FT2232でOpenOCD:あっさり動いた。<a class="anchor_super" id="bf2f29ed" href="#bf2f29ed" title="bf2f29ed" style="user-select:none;">&dagger;</a></h2>
<p>この基板の配線チェック面倒くせーとか思いながらとりあえず（配線チェックもろくにしないで）</p>
<p><a href="/ATMEL_AVR/jpg/ARM/ft2232d.jpg" rel="nofollow"><img src="/ATMEL_AVR/jpg/ARM/ft2232d.jpg" alt="/ATMEL_AVR/jpg/ARM/ft2232d.jpg" /></a></p>
<ul class="list1 list-indent1"><li><a href="http://www.besttechnology.co.jp/modules/knowledge/?OpenOCD" rel="nofollow">BestTechnology</a>さんが公開してくださったバイナリーをWindowsXP上でそのまま動かしてみた。</li></ul>
<p><strong>動いたっ</strong></p>
<ul class="list1 list-indent1"><li>以下はログ。</li></ul>
<pre>D:\OpenOCD&gt;openocd.exe -s ./tcl -f daemon.cfg -f jtagkey.cfg -c &quot;jtag_kz 1000&quot; -f target/stm32.cfg</pre>
<p>なんかBestTechnologyさんのバイナリーってかなり新しいですね。</p>
<pre>Open On-Chip Debugger 0.5.0-dev-00616-g0672a64 (2010-07-14-09:46)
Licensed under GNU GPL v2
For bug reports, read
        http://openocd.berlios.de/doc/doxygen/bugs.html
Info : only one transport option; autoselect 'jtag'
1000 kHz
1000 kHz
adapter_nsrst_delay: 100
jtag_ntrst_delay: 100
Info : device: 4 &quot;2232C&quot;
Info : deviceID: 67330064
Info : SerialNumber: FTTDJ3SYA
Info : Description: JTAGkey A
Info : clock speed 1000 kHz
Info : JTAG tap: stm32.cpu tap/device found: 0x3ba00477 (mfg: 0x23b, part: 0xba
0, ver: 0x3)
Info : JTAG tap: stm32.bs tap/device found: 0x16410041 (mfg: 0x020, part: 0x641
, ver: 0x1)
Info : stm32.cpu: hardware has 6 breakpoints, 4 watchpoints
Info : accepting 'telnet' connection from 4444</pre>
<pre>&gt;scan_chain
   TapName             Enabled  IdCode     Expected   IrLen IrCap IrMask
-- ------------------- -------- ---------- ---------- ----- ----- ------
 0 stm32.cpu              Y     0x3ba00477 0x3ba00477     4 0x01  0x0f
 1 stm32.bs               Y     0x16410041 0x06412041     5 0x01  0x03
                                           0x06410041
                                           0x06410041
                                           0x06410041
                                           0x06410041</pre>
<pre>&gt;halt
target state: halted
target halted due to debug-request, current mode: Handler HardFault
xPSR: 0x41000003 pc: 0x08000e58 msp: 0x20001e90</pre>
<pre>&gt;reg
===== arm v7m registers
(0) r0 (/32): 0x00000000
(1) r1 (/32): 0x00000005
(2) r2 (/32): 0x200016D6
(3) r3 (/32): 0x20000240
(4) r4 (/32): 0x20000E84
(5) r5 (/32): 0x20000E85
(6) r6 (/32): 0x20000E8C
(7) r7 (/32): 0x20000E94
(8) r8 (/32): 0xFFFEF7DD
(9) r9 (/32): 0xF7FBFFB4
(10) r10 (/32): 0xA37732C4
(11) r11 (/32): 0x96520B5D
(12) r12 (/32): 0xE000E410
(13) sp (/32): 0x20001E90
(14) lr (/32): 0xFFFFFFF1
(15) pc (/32): 0x08000E58
(16) xPSR (/32): 0x41000003
(17) msp (/32): 0x20001E90
(18) psp (/32): 0x84324460
(19) primask (/1): 0x00
(20) basepri (/8): 0x00
(21) faultmask (/1): 0x00
(22) control (/2): 0x00
===== cortex-m3 dwt registers
(23) dwt_ctrl (/32)
(24) dwt_cyccnt (/32)
(25) dwt_0_comp (/32)
(26) dwt_0_mask (/4)
(27) dwt_0_function (/32)
(28) dwt_1_comp (/32)
(29) dwt_1_mask (/4)
(30) dwt_1_function (/32)
(31) dwt_2_comp (/32)
(32) dwt_2_mask (/4)
(33) dwt_2_function (/32)
(34) dwt_3_comp (/32)
(35) dwt_3_mask (/4)
(36) dwt_3_function (/32)</pre>
<ul class="list1 list-indent1"><li>FTDIのD2XXドライバーを入れるのが面倒くさかったので、USBを挿して追加されたCOMポートをデバイスマネージャーのプロパティで選んで、WindowsUpdateに繋いでドライバー更新を行っただけ。</li></ul>
<ul class="list1 list-indent1"><li>その前に、MProg (今はFT_Progになっていた )を起動してProduct Stringを適当な文字列&quot;JTAGkey&quot; にして、VID、PIDはFTDIのデフォルトのまま。Channel AをD2XXモードにしてEEPROMに書き込んだ。</li></ul>
<ul class="list1 list-indent1"><li>EEPROMは壊れたNICから外した93C46を実装してある。</li>
<li>EEPROMを実装していない場合は、デバイス認識をどうするのか不明。</li></ul>
<p><br />
で、結論</p>
<ul class="list1 list-indent1"><li>Windows上でFT2232(D2XXドライバーベース)インターフェースのOpenOCDを使う場合は、telnetの応答がワンテンポ遅かったりとかコマンドの応答に３０秒待たされたりといったLinuxのlibftdiを使った場合の問題の症状は、<strong>全く起きなかった</strong></li>
<li>快適に操作できる。</li>
<li>というか普通これくらいが当たり前。</li></ul>
<hr class="full_hr" />
<ul class="list1 list-indent1"><li>ターゲット(STM8S-Discovery付録のST-Link基板)と接続したところ（上記ログはST_Link基板にもUSBケーブルを繋いで記録）</li></ul>
<p><a href="/ATMEL_AVR/jpg/ARM/ft2232jtag.jpg" rel="nofollow"><img src="/ATMEL_AVR/jpg/ARM/ft2232jtag.jpg" alt="/ATMEL_AVR/jpg/ARM/ft2232jtag.jpg" /></a></p>
<p>ちなみに配線状況などは <a href="stm32f103.html" title="stm32f103" class="link_page_passage">こちら</a></p>
<ul class="list1 list-indent1"><li>ターゲットVDD検出Trなどは未配線。</li>
<li>nTRSET や nSRSET 用のゲートは手持ちが無かったのでATtiny2313にファームを焼いて代用してみた。</li></ul>
<p>こんなやつ</p>
<pre>**********************************************************************
*	メイン
**********************************************************************</pre>
<pre> PD5 ----|＞---------- PB5
           |
 PD4 -----/</pre>
<pre> PD3 ----|＞---------- PB3
           ゜
 PD2 -----/</pre>
<pre> PD1 ----|＞---------- PB1
           ゜
 PD0 -----/</pre>
<pre>*/
int	main(void)
{
	uchar c;
	DDRD=0xc0;		// PORTD 0-5 入力.
	PORTD=0x3f;		// PORTD 0=5 PullUp.
	DDRA=0x00;		// PORTA 0-1 入力.
	PORTA=0x03;		// PORTA 0-1 pullup.
	
	while(1) {
		c=PIND;
		PORTB=c;
		c=c&lt;&lt;1;
		c^=0x0f;
		DDRB=c;
	}
	return 0;
}</pre>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_8">寄り道：EUC/SJISが使えるjedを玄箱にインストールする.<a class="anchor_super" id="q944a437" href="#q944a437" title="q944a437" style="user-select:none;">&dagger;</a></h2>
<p>read more: <a href="/ATMEL_AVR/cgi-bin/wifky/wifky.cgi?p=%B8%BC%C8%A2%A4%C7jed-ja" rel="nofollow">玄箱でjed-ja</a></p>
<p><strong>懐古趣味</strong>な人（＝＝UTF-8がダメな人）向けの話題です。</p>
<ul class="list1 list-indent1"><li>VineLinux-4.2に標準装備されている日本語版jed-ja(EUC/SJIS おっけー)をDebianで動かします。</li>
<li>普通にubuntuなどでもOK.</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_9">Palmは復活するのか？<a class="anchor_super" id="id7e460c" href="#id7e460c" title="id7e460c" style="user-select:none;">&dagger;</a></h2>
<p>HP、Palmを12億ドルで買収、「全力でWebOSを盛り立ていく」</p>
<ul class="list1 list-indent1"><li><a href="http://jp.techcrunch.com/archives/20100428hp-palm-deal-webos/" rel="nofollow">http://jp.techcrunch.com/archives/20100428hp-palm-deal-webos/</a></li></ul>
<p>米HP、Androidタブレットの開発計画を中止 - webOS一本化へ</p>
<ul class="list1 list-indent1"><li><a href="http://journal.mycom.co.jp/news/2010/07/16/035/" rel="nofollow">http://journal.mycom.co.jp/news/2010/07/16/035/</a></li></ul>
<ul class="list1 list-indent1"><li>なるほど、iPhoneの二匹目のドジョウを地でいくわけか。</li>
<li>しかしカーネルがLinuxでブラウザがWebkitだったら、オリジナリティってウィンドウマネージャーだけ？</li></ul>
<ul class="list1 list-indent1"><li>アプリは何で書くのかな？Java？それともNative-C？</li>
<li>過去のPalmの特許が物を言うわけか。場合によってはAppleをギャフンと・・・。</li></ul>
<ul class="list1 list-indent1"><li>これで、携帯ブラウザは全部Webkitベースになっちゃったなぁ・・・（Microsoft？そんなもん知らん）</li>
<li>日本発ブラウザー(NetFrontとか)はほんとに文字通りガラパゴス諸島。</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_10">FT2232でOpenOCD:これは良く出来ている。<a class="anchor_super" id="uf2050d0" href="#uf2050d0" title="uf2050d0" style="user-select:none;">&dagger;</a></h2>
<p>まずtelnet接続したら、</p>
<pre>&gt; reset halt 
&gt; reg                  // レジスタを見る.
&gt; mdw 0x20000100 0x40  // RAMをメモリーダンプする.
&gt; load_image main.hex  // 自作hexファイルを(RAMに)ロードする.
&gt; reg pc 0x20000250    // 自作hexのエントリーアドレスをpcに入れる.
&gt; step
&gt; step
&gt; reg 
 ・・・気がすむまで・・・</pre>
<p>gdb要らないじゃん（笑）</p>
<p>本日の結論</p>
<ul class="list1 list-indent1"><li>意地でも0x800_0000のFlashは読めないようになっている、ということが分かった。</li></ul>
<ul class="list1 list-indent1"><li>ひとおもいに<strong>ERASE</strong>してしまえばいいだけのことだが・・・。（何か悔しい）</li></ul>
<ul class="list1 list-indent1"><li>gdbを立ち上げなくても普通にhexファイルを読んで実行するとか簡単にできる</li>
<li>（おまけにブレークポイントとかステップ実行とかreg dumpとか全部出来る）ということが分かった。</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_11">STM8S-Discovery:ST-Linkはマスストレージ？<a class="anchor_super" id="k1178768" href="#k1178768" title="k1178768" style="user-select:none;">&dagger;</a></h2>
<p>H:\&gt;dir /w</p>
<pre>ドライブ H のボリューム ラベルがありません。
STM32 (CORTEX M3) - 32-bit Microcontrollers.url
STM8S - 8-bit Microcontrollers.url
STMicroelectronics - Microcontrollers - 8-bit microcontrollers, 16-bit microcontrollers and 32-bit 
ARM micro controllers.url
              3 個のファイル                 729 バイト
              0 個のディレクトリ      32,474,112 バイトの空き領域
H:\&gt;</pre>
<p>デバイスマネージャーからは</p>
<pre>ディスクドライブ
 + STM32
    USBSTOR\DISK&amp;VEN_STM32\7&amp;1BFB811A&amp;0&amp;8_N_0S59W8_C&amp;0</pre>
<p>に見える。</p>
<ul class="list1 list-indent1"><li>複合デバイスではなさそうだ。</li>
<li>普通にUSBメモリーだけのようだ。
<pre>USB\VID_0483&amp;PID_3744\6&amp;16B697D&amp;0&amp;3</pre></li>
<li>USBメモリーとしては今時珍しい、たったの32MByte(FAT16)で、書き込み禁止になっていた。（つまりダミー）</li></ul>
<ul class="list1 list-indent1"><li>ということはDeviceIoControlで通信するのだろう。おそらく。</li></ul>
<p>参考になる？</p>
<ul class="list1 list-indent1"><li><a href="http://www.moonmile.net/blog/archives/145" rel="nofollow">http://www.moonmile.net/blog/archives/145</a></li>
<li><a href="http://social.msdn.microsoft.com/Forums/ja-JP/vcgeneralja/thread/7cdda32a-c988-41ec-9de8-d6870c99deb9" rel="nofollow">http://social.msdn.microsoft.com/Forums/ja-JP/vcgeneralja/thread/7cdda32a-c988-41ec-9de8-d6870c99deb9</a></li></ul>
<ul class="list1 list-indent1"><li>もうすこし調べたいが、ファームが読めないとどうにもならないかも。</li></ul>
<p><br />
一応Beagleでログだけ取ったら、ひとおもいに<strong>ERASE</strong>する予定。</p>
<pre>Product       = STM32 STLink
Manufacturer  = &lt;not available&gt;

Vid=0x0483 Pid=0x3744 Rev=1.00 USB=2.00
Class=0x00 SubClass=0x00 Protocol=0x00
NumConfig=1 MaxPacketSize(EP0)=64

[BOS] None.

[Config 1] NumInterfaces=1 Power=bus MaxPower=100mA
 [Interface 0 (alt 0)] NumEPs=2 Class=0x08 SubClass=0x06 Prot=0x50
   [Endpoint IN  0x81] Type=Bulk MaxPacketSize=64 Interval=(FS:0ms HS:0.0ms)
   [Endpoint OUT 0x02] Type=Bulk MaxPacketSize=64 Interval=(FS:0ms HS:0.0ms)</pre>
<p>エンドポイントは１組だけ。</p>
<p>マスストレージ系は良く分からないや。</p>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_12">ネットブック人気はもう復活しない。永久に<a class="anchor_super" id="he01c81a" href="#he01c81a" title="he01c81a" style="user-select:none;">&dagger;</a></h2>
<p>■元麻布春男の週刊PCホットライン■
ネットブックの再生を目指す試作機「Canoe Lake」</p>
<ul class="list1 list-indent1"><li><a href="http://pc.watch.impress.co.jp/docs/column/hot/20100720_381849.html" rel="nofollow">http://pc.watch.impress.co.jp/docs/column/hot/20100720_381849.html</a></li>
<li>Windows7のベンチマーク、エクスペリエンス指数がいくら上回ろうとも、<strong>クロックわずか1.5GHzのN550</strong>なんてクズだ。</li>
<li>Windows7をまともに使いたいなら最低でも2GHz以上のCore2ベースに2GB以上のRAMは必須だと思う。</li>
<li>Atomクロック(等クロックだとcore2の半分しかパフォーマンスが出ない)に換算すると、4GHzのデュアルコアが必要だ。</li>
<li>何年先になるのか？</li></ul>
<p><br />
大まけにまけても2GHzオーバーのデュアルコアがWindows7を使う最低ラインだろう。</p>
<ul class="list1 list-indent1"><li>しかし2GHz駆動にすると電池が持たない、というのが現行Atomの現状。</li></ul>
<ul class="list1 list-indent1"><li>もっと軽いＯＳ（Chromiumとか、Linuxでも超軽量なTinyCoreとか）なら1.5GHzでも動くし使えると思う。</li>
<li>しかし、それだと当然ARMでも充分動くのでAtomのメリットは何もないのだ。</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_13">STM8S-Discovery:ひとおもいに<strong>ERASE</strong><a class="anchor_super" id="xc823f5f" href="#xc823f5f" title="xc823f5f" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>STM8SのST-LINK側の解析を諦め、ひとおもいに<strong>ERASE</strong>してみた。</li></ul>
<ul class="list1 list-indent1"><li>ついでにCQ-FRK-STM32用のdfuファームをOpenOCD経由で書き込んで、一応動いている(USBデバイスとして動作し、DFuSeが認識するところまでＯＫ)</li></ul>
<p>read more: <a href="stm32f103.html" class="link_page_passage">stm32f103</a></p>
<ul class="list1 list-indent1"><li>だけど、どうもDFUは馴染めない。</li>
<li>コマンドラインツールが存在しないことと、elfからdfuフォーマットへの変換にもGUIツールしか存在しないというのがユーザーを舐めているとしか思えない。</li>
<li>DFUプロトコルに何のメリットも感じないので、結局HIDブートローダーに移行する予定。</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_14">某日産のECU納期遅れは・・・<a class="anchor_super" id="e41e8c13" href="#e41e8c13" title="e41e8c13" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>STマイクロが犯人らしい。</li>
<li>るねさす使ってやれよ。ってゆーかるねさすがARM作れば良いじゃん。</li></ul>
<p>そもそもARMってARMチップ作ってないし。</p>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_15">VIAの新CPU「PV530」搭載マザーが発売に<a class="anchor_super" id="k315a6c0" href="#k315a6c0" title="k315a6c0" style="user-select:none;">&dagger;</a></h2>
<p>AKIBA Watch</p>
<ul class="list1 list-indent1"><li><a href="http://akiba-pc.watch.impress.co.jp/hotline/20100724/etc_asrock.html" rel="nofollow">http://akiba-pc.watch.impress.co.jp/hotline/20100724/etc_asrock.html</a></li>
<li>VIAまだ生きとったんかい。</li>
<li>●コアはC7系のEsther</li>
<li>nanoじゃないの？</li>
<li><strong>パラレル、シリアルポートが健在だ！</strong></li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_16">シャープ、次世代XMDFソリューションで電子書籍事業に参入<a class="anchor_super" id="c76d31aa" href="#c76d31aa" title="c76d31aa" style="user-select:none;">&dagger;</a></h2>
<p>〜年内にサービス開始。タブレット端末2製品も同時投入</p>
<ul class="list1 list-indent1"><li><a href="http://pc.watch.impress.co.jp/docs/column/hot/20100723_382678.html" rel="nofollow">http://pc.watch.impress.co.jp/docs/column/hot/20100723_382678.html</a></li>
<li>iPadの対抗製品がいまだに出てきていないのはある意味謎だ。</li>
<li>やはりコンテンツ配信も含めてサービス出来る会社が名乗りをあげないからだろう。</li></ul>
<ul class="list1 list-indent1"><li>端末自体はいずれ多くの会社が供給するようになるはずなので、</li>
<li>配信の相互乗り入れが出来るようにしてコンテンツ配信の寡占化を防ぐような仕組みが今後必要になってくるのではないだろうか。</li></ul>
<ul class="list1 list-indent1"><li>そうならない場合は、全部アメリカ勢(Apple,Amazon)に持ってかれて終了だ。</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_17">STM8S-Discovery:中途半端に互換性の無い奴ら<a class="anchor_super" id="u7888ffe" href="#u7888ffe" title="u7888ffe" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>ST-Link側を動かそうとした。
結果</li>
<li>dfuのみなんとなく動いている気がする。但し、書き込んだプログラムが動くのを確かめたわけではない。</li>
<li>HIDなモニターはHIDデバイスとしては正常に認識しているけれど、意図したエコーバックを返さない。</li>
<li>CDCなvcomもCDCデバイスとしては正しいし、COMxx:に割り当てられてCOMポートもオープンできるが、エコーバックがない。</li>
<li>割り込みベクターは一応0x0800_0000,0x0にしたつもり。</li></ul>
<ul class="list1 list-indent1"><li>一応モデルはCQ-FRK-STM32と同じMDなはずなんだけれど・・・
<pre># NOTE:
# - Low-density devices are STM32F101xx and STM32F103xx microcontrollers where
#   the Flash memory density ranges between 16 and 32 Kbytes.
# - Medium-density devices are STM32F101xx and STM32F103xx microcontrollers where
#   the Flash memory density ranges between 32 and 128 Kbytes.
# - High-density devices are STM32F101xx and STM32F103xx microcontrollers where
#   the Flash memory density ranges between 256 and 512 Kbytes.
# - Connectivity-Line devices are STM32F105xx and STM32F107xx microcontrollers.
#
# ---&gt; STM32F103VB 128KFlash=MD?

# Place -D or -U options for C here
CDEFS =  -D$(RUN_MODE) -DUSE_STDPERIPH_DRIVER -DSTM32F10X_MD </pre></li></ul>
<ul class="list1 list-indent1"><li>よくわかんないや。</li></ul>
<ul class="list1 list-indent1"><li>もしかして、これ：
<pre>#ifndef STM32F10X_CL</pre></li>
<li>CQ-FRK-STM32ではSTM32F10X_CLは定義しないけれど、こっちのほうでは必要だったとしたら、変更箇所はやばいくらい多いことになる。</li></ul>
<div class="ie5"><table class="style_table" cellspacing="1" border="0"><tbody><tr><td class="style_td">CQ-FRK-STM32</td><td class="style_td">STM32F103VBT6</td></tr>
<tr><td class="style_td">STM8S-Discovery</td><td class="style_td">STM32F103C8T6</td></tr>
</tbody></table></div>
<pre>       - under STM32F10B_EVAL directory: to select the project for STM32 Medium-density devices.
       - under STM32F10C_EVAL directory: to select the project for STM32 Connectivity-Line devices.
       - under STM32F10E_EVAL directory: to select the project for STM32 High-density devices</pre>
<ul class="list1 list-indent1"><li>C8T6のマニュアルによると、どうもMedium-densityではなくてPerformance Lineのようだ。</li>
<li>Connectivity Line (STM32F10X_CL) ではなさそうだ。
<ul class="list2 list-indent1"><li>Connectivity Line を有効にするとUSB_OTGが付いてくるので多分違う。</li></ul></li></ul>
<ul class="list1 list-indent1"><li>Flash容量で見る限りだとMedium-Densityなんだけど・・・。</li>
<li>しかし、STM32F103VBT6もPerfoemance Lineのマニュアルに含まれていたので、両方ともPerfoemance Lineなのかもしれない。</li></ul>
<p><strong>このあたり、品番とヘッダーが１対１対応しているＰＩＣのほうがはるかに分かりやすい。</strong></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_18">MDとLDの違い。<a class="anchor_super" id="da65d700" href="#da65d700" title="da65d700" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>差分を取ってみたが、有意な差はあまり無かった。
<pre>3c3
&lt;   * @file      startup_stm32f10x_ld.s
---
&gt;   * @file      startup_stm32f10x_md.s
7c7
&lt;   * @brief     STM32F10x Low Density Devices vector table for RIDE7 toolchain.
---
&gt;   * @brief     STM32F10x Medium Density Devices vector table for RIDE7 toolchain.
11c11
&lt;   *                - Set the vector table entries with the exceptions ISR address.
---
&gt;   *                - Set the vector table entries with the exceptions ISR address
16c16
&lt;   ******************************************************************************
---
&gt;   *******************************************************************************
168c168
&lt;   0
---
&gt;   .word  TIM4_IRQHandler
171,172c171,172
&lt;   0
&lt;   0
---
&gt;   .word  I2C2_EV_IRQHandler
&gt;   .word  I2C2_ER_IRQHandler
174c174
&lt;   0
---
&gt;   .word  SPI2_IRQHandler
177c177
&lt;   0
---
&gt;   .word  USART3_IRQHandler
189c189
&lt;                           STM32F10x Low Density devices.*/
---
&gt;                             STM32F10x Medium Density devices. */
315a316,318
&gt;   .weak  TIM4_IRQHandler
&gt;   .thumb_set TIM4_IRQHandler,Default_Handler
&gt; 
321a325,330
&gt;   .weak  I2C2_EV_IRQHandler
&gt;   .thumb_set I2C2_EV_IRQHandler,Default_Handler
&gt; 
&gt;   .weak  I2C2_ER_IRQHandler
&gt;   .thumb_set I2C2_ER_IRQHandler,Default_Handler
&gt; 
324a334,336
&gt;   .weak  SPI2_IRQHandler
&gt;   .thumb_set SPI2_IRQHandler,Default_Handler
&gt; 
330a343,345
&gt;   .weak  USART3_IRQHandler
&gt;   .thumb_set USART3_IRQHandler,Default_Handler
&gt; 
338a354
&gt;  </pre></li>
<li>ほぼ全てにおいて、追加されたPeripheralの定義が増えているだけで、それらを使わない限りはMDだろうがLDだろうが
関係なさそうだった。</li>
<li>割り込みベクターも、追加された要因の定義が増えているだけで、共通するものについては番号がずれていないので、どっちでコンパイルしても支障ないように見える。
<ul class="list2 list-indent1"><li>もちろん、間違えて、存在しないPeripheralを触る可能性はあるので、正しいほうを選択するに越したことは無い。</li></ul></li></ul>
<p>あれれ？</p>
<pre>     0</pre>
<p>っていうのは</p>
<pre>     .word  0</pre>
<p>であるべきだと思うけど・・・まあいいか、CMSISなんてどうせつくりかけみたいなやつだし。</p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_19">とりあえず気を取り直して<a class="anchor_super" id="ia784eb2" href="#ia784eb2" title="ia784eb2" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>STM32用の<a href="ARMCortexM3.html" title="ARMCortexM3" class="link_page_passage">armon.zip</a>をちゃんと取得し、</li>
<li>startupを*_ld.s がリンクされるように変更。</li>
<li>Makefileのdefineを *_MDから *_LDに変更。</li>
<li>main.cの割り込みベクター設定を(0x0800_0000,0x3000)から(0x0800_0000,0x0)に変更。</li>
<li>リンカースクリプトのROM領域を0x0800_3000から0x0800_0000に変更。</li></ul>
<ul class="list1 list-indent1"><li>OpenOCDで焼いたら<strong>ちゃんと動いた</strong>ので、ま、いっかー。</li></ul>
<p><strong>750円のST-LinkのUSBはちゃんと動くよっ！</strong></p>
<ul class="list1 list-indent1"><li>だけど、あとでマニュアルを読み返したら、USART3まであるしI2Cも2本あるし、</li>
<li>Performance Lineだけど、Medium Densityなのかな？全く意味不明だ。</li>
<li>型番から明快に分かるようにしてくんないかな。</li></ul>
<p><a href="/ATMEL_AVR/jpg/ARM/stmfamily.png" rel="nofollow"><img src="/ATMEL_AVR/jpg/ARM/stmfamily.png" alt="/ATMEL_AVR/jpg/ARM/stmfamily.png" /></a></p>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_20">STM8S-Discovery:armonが動いたので、今後の展望<a class="anchor_super" id="qdb3ab98" href="#qdb3ab98" title="qdb3ab98" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>armon(HIDな簡易モニタ)がFlashを12kも消費しているのは、
<ul class="list2 list-indent1"><li>ADC関係が無駄にリンクされていた（呼んでいた）こと。</li>
<li>EVAL Board周りの無駄な関数と、無駄にメモリーを食うテーブルが定義されていたこと。</li></ul></li></ul>
<p>なので、8kに収める目処は付いた。</p>
<ul class="list1 list-indent1"><li>しかし、あれほどコード効率の悪いPIC18Fでさえ、ブートローダーは2kに収まっているし、AVRでもV-USBを使いながらもほぼ全部Ｃで書いて2K強なのに、ARM(Thumb2)が<strong>8kも食うのはいかがなものか。</strong></li></ul>
<ul class="list1 list-indent1"><li>無駄に32bitのポインタやらベクターが多いからかなぁ。</li>
<li>コールバックとかやると関数ポインタをたくさん消費するし。</li></ul>
<p>まあいいか、STM32のFlashは64Kある。</p>
<ul class="list1 list-indent1"><li>とりあえず、armonのソースをまとめてみた。</li></ul>
<p>read more: <a href="stm32f103.html" class="link_page_passage">stm32f103</a></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_21">ついでに FLASHの erase と write を仮実装してみた。<a class="anchor_super" id="j8c16728" href="#j8c16728" title="j8c16728" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>消去は1Page=1kB単位で消してくれた。</li>
<li>書き込み<del>はまだうまくいってない。というか何を書こう。</del>もうまくいった。</li></ul>
<p><del>問題が一つ。FLASH_* 系の関数を呼び出すようにしたら、8kBを128byteくらいオーバーしてしまった。</del></p>
<ul class="list1 list-indent1"><li>システム側のmemcpy()が無駄に長かったので、短いヤツに差し替えたら8kに納まった。</li></ul>
<ul class="list1 list-indent1"><li>それから、最初全然FLASHの消去が出来なかったのだが、どうやら
<pre>FLASH_unlock();</pre>
の呼び出しが必要らしい。</li>
<li>dfuのソースを見ると起動時のセットアップでunlockしていて、lockには戻していないようだ。<strong>ぃぃのかい？</strong></li>
<li>普通Flash書き込み直前にunlockして、終わったらlockしといたほうが良くないか？</li>
<li>（電源がBrownOutしたときの誤書き込みを防げる）</li></ul>
<ul class="list1 list-indent1"><li>消去に限って言えば0x800_3000以前の番地も消せるようだ。<strong>問題なし</strong></li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_22">ARM(Thumb)のメモリー馬鹿食いの原因が少し分かったような気がした。<a class="anchor_super" id="z96eb41f" href="#z96eb41f" title="z96eb41f" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>こいつ(Thumbのこと)はSH2病だ。32bit即値をレジスタにロードする命令がないので、グローバルな変数とかポインタとか構造体などを参照する場合は、常にPC相対で32bit定数を取りに行くようだ。
<pre>RESULT CustomHID_SetProtocol(void)
{
 uint8_t wValue0 = pInformation-&gt;USBwValue0;
 ProtocolValue = wValue0;
80005ce:	78d2      	ldrb	r2, [r2, #3]
80005d0:	4b02      	ldr	r3, [pc, #8]	(80005dc &lt;CustomHID_NoData_Setup+0x30&gt;)
80005d2:	2000      	movs	r0, #0
80005d4:	601a      	str	r2, [r3, #0]

 else
 {
   return USB_UNSUPPORT;
 }
}
80005d6:	4770      	bx	lr
80005d8:	20000304 	.word	0x20000304  ＜＝＝＝こんなやつとか
80005dc:	200002c8 	.word	0x200002c8  ＜＝＝＝こんなやつ。</pre></li>
<li>つまり、アドレス定数列がメモリー食い（と、速度低下）の原因だ。</li>
<li>intelアーキテクチャーでは32bit即値のレジスタロードは１命令で出来るのでわざわざ関数の外側をPC相対でフェッチする必要が無い。</li>
<li>MIPSでは32bit即値は上位16bitと下位16bitをORするような形の２命令になる。</li></ul>
<ul class="list1 list-indent1"><li>さらに言えば単独のアブソリュートアドレスからのフェッチも(intelでは)１命令で出来るのに対し、RISC CPU（例えばMIPS）では２命令に分解されるし、SH2やARMでは２命令とそれ以外のPC相対に書かれた32bitアドレス定数が必要になる。</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_23">MicrosoftへのARMのライセンスは何を意味するのか<a class="anchor_super" id="c8d8b356" href="#c8d8b356" title="c8d8b356" style="user-select:none;">&dagger;</a></h2>
<p>■元麻布春男の週刊PCホットライン■</p>
<ul class="list1 list-indent1"><li><a href="http://pc.watch.impress.co.jp/docs/column/hot/20100726_383354.html" rel="nofollow">http://pc.watch.impress.co.jp/docs/column/hot/20100726_383354.html</a></li>
<li><a href="http://japanese.engadget.com/2010/07/26/msarm/" rel="nofollow">http://japanese.engadget.com/2010/07/26/msarm/</a></li>
<li>なんだろうね？</li>
<li>やっぱりWindows7Phone用の最適化？</li>
<li>Appleへの対抗上、高性能なARMチップが要るんだろうね。</li>
<li>iPadってJavaScriptがJITコンパイラじゃないんだ。</li>
<li>むしろ、そのほうが勝手アプリを増やされずに済むという魂胆なのかもしれない。</li>
<li>どうせiPadのアプリはObjective-CのARMネイティブなので、iTunesStoreに囲い込むにはJavaScriptが遅いほうが好都合だ。</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_24">STM8S-Discovery:このまま挫折したままかも。<a class="anchor_super" id="bff58e32" href="#bff58e32" title="bff58e32" style="user-select:none;">&dagger;</a></h2>
<p>現状</p>
<ul class="list1 list-indent1"><li>ファームは8kBにおさまっている。</li>
<li>HIDデバイスとして動作している。</li>
<li>HEXファイルを読み込んでFLASHの書き換えも可能になった。</li></ul>
<p>けれど、問題点として、</p>
<ul class="list1 list-indent1"><li>USBのdisconnectをサポートするハードウェア(PULLUP抵抗の開放)がないので、
アプリケーションを起動させてもUSBの再認識を行えない。（PICですら簡単に出来るのに）
<ul class="list2 list-indent1"><li>裏技としては、Windowsのデバイス一覧でデバイス切断する方法はあるが・・・。</li></ul></li>
<li>GPIOの操作が面倒そうなので、半ば諦めムード。
<ul class="list2 list-indent1"><li>もちろんGPIO_*関数を呼べば出来るのは知っている。</li></ul></li>
<li>PORTの操作には、どうもwordアクセスなメモリーの読み書きが必要そうだ。（面倒・・・）</li></ul>
<p>他にも、</p>
<ul class="list1 list-indent1"><li>配線が微細なので、線の引き出しが面倒だなーとかも。</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_25">苺：■STM32マイコンボード 『STBee Mini』(72MHz, 128K+20K)<a class="anchor_super" id="pc91a99a" href="#pc91a99a" title="pc91a99a" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li><a href="http://strawberry-linux.com/catalog/items?code=32105" rel="nofollow">http://strawberry-linux.com/catalog/items?code=32105</a></li>
<li>１９７４円</li>
<li>あーこいつも12MHzかぁ・・・</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_26">STM32:GPIOポート<a class="anchor_super" id="t2fa7d85" href="#t2fa7d85" title="t2fa7d85" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>けっこうややこしい</li></ul>
<div class="ie5"><table class="style_table" cellspacing="1" border="0"><tbody><tr><td class="style_td">GPIOA</td><td class="style_td">0x4001_0800</td></tr>
<tr><td class="style_td">GPIOB</td><td class="style_td">0x4001_0c00</td></tr>
<tr><td class="style_td">GPIOC</td><td class="style_td">0x4001_1000</td></tr>
<tr><td class="style_td">GPIOD</td><td class="style_td">0x4001_1400</td></tr>
<tr><td class="style_td">GPIOE</td><td class="style_td">0x4001_1800</td></tr>
</tbody></table></div>
<ul class="list1 list-indent1"><li>いまだにポートの読み書きさえ出来ない俺って・・・</li></ul>
<ul class="list1 list-indent1"><li>例えば、GPIOAを弄りたいとすると、まず最初の２ワード（8byte)はCRL,CRH
になっていて、たいていは 0x4444_4444 , 0x4444_4444 みたいになっている。</li>
<li>4bit x 16Portだ。</li>
<li>4bit(1 digit)の意味は0x4のとき、オープンドレインのInputモードで、
0x3のときはPush-PullのOutputモード、といった具合。
<ul class="list2 list-indent1"><li>AVRで言うところのDDR設定が(1pinあたり4bit)×16pin分あるわけ。</li></ul></li>
<li>ただし、RCCなんちゃらの初期化をやっていないと、まったく無反応っぽいぞ。</li>
<li>たぶんGPIO_IDR,GPIO_ODRというのが、16bit分のPINA,PORTA (もしくはLATCH_A)に相当するんだろうと予測。</li></ul>
<p><a href="/ATMEL_AVR/jpg/ARM/stm32gpio.png" rel="nofollow"><img src="/ATMEL_AVR/jpg/ARM/stm32gpio.png" alt="/ATMEL_AVR/jpg/ARM/stm32gpio.png" /></a></p>
<p><br />
<br />
<br /></p>
<p><br /></p>
   </div>
  </div>
 </div>
 <div style="clear:both;height:1em;"></div>
 <div id="logo"><a href="/ATMEL_AVR/html/" style="background-image: url(image/title.jpg);"></a></div>
 <div id="personal"><ul><li class="login"><a href="http://">ログインまたはアカウント作成</a></li></ul></div>
 <div id="footer">
  <div id="f-officialico">
   <a href="http://pukiwiki.sourceforge.jp/"><img src="../image/b_pukiwiki.official.png" alt="PukiWiki-official" /></a>
  </div>
  <div id="f-officialdevico">
   <a href="http://pukiwiki.sourceforge.jp/dev/"><img src="../image/b_pukiwiki.dev.png" alt="PukiWiki-dev" /></a>
  </div>
  <div id="f-list">
   <ul><li id="lastmod">Last-modified: 2010-07-28 (水) 17:22:24<span class="page_passage" data-mtime="2010-07-28T17:22:24+09:00"></span></li><li>Site admin: <a href="http://pukiwiki.example.com/">anonymous</a></li>    <li>Powered by PukiWiki</li>
    <li><a href="http://www.luntf.com/">Monobook for PukiWiki</a></li>
   </ul>
  </div>
  <div style="clear:both;"></div>
 </div>
</div>
</body>
</html>
