<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">

<head>
 <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
 <title>pic18spx - PukiWiki</title>

<!---
 <link rel="stylesheet" media="screen and (max-width:768px)" href="../skin/180wiki-sp.css" />

 --->

 <link rel="stylesheet" media="screen and (max-width:768px)" href="../skin/monobook/mobile.css" />
 <link rel="stylesheet" media="screen and (min-width:769px)" href="../skin/monobook/monobook.css" />

 <link rel="stylesheet" type="text/css" media="print" href="../skin/monobook/monobook.print.css" />
 <link rel="alternate" type="application/rss+xml" title="RSS" href="./?cmd=rss" />

 <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>
<div id="globalWrapper">
 <div id="menubar">
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/html/" title="FrontPage" class="link_page_passage">Ｔｏｐ</a></li></ul>
<hr class="full_hr" />
<p><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-EF-BD-98-.html" class="link_page_passage">ＨＩＤａｓｐｘ</a></p>
<ul class="list1 list-indent1"><li><a href="EF-BC-A4-EF-BD-8F-EF-BD-97-EF-BD-8E-EF-BC-AC-EF-BD-8F-EF-BD-81-EF-BD-84-.html" class="link_page_passage">ＤｏｗｎＬｏａｄ</a></li>
<li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E9-AB-98-E9-80-9F-E5-8C-96-.html" class="link_page_passage">ＨＩＤａｓｐ高速化</a></li>
<li><strong><a href="Newest.html" title="Newest" class="link_page_passage">開発日記</a></strong> <a href="SiteMap.html" title="SiteMap" class="link_page_passage">ログ</a></li></ul>
<p><a href="E5-88-B6-E4-BD-9C-.html" class="link_page_passage">制作</a></p>
<p><a href="AVRetc.html" title="AVRetc" class="link_page_passage">ＡＶＲ関係</a></p>
<ul class="list1 list-indent1"><li><a href="AVR_Monit.html" class="link_page_passage">AVR_Monit</a></li>
<li><a href="AVR_term.html" class="link_page_passage">AVR_term</a></li>
<li><a href="W32_term.html" class="link_page_passage">W32_term</a></li>
<li><a href="HIDmon88.html" class="link_page_passage">HIDmon88</a></li>
<li><a href="HIDtester.html" class="link_page_passage">HIDtester</a></li>
<li><a href="usbRS232.html" class="link_page_passage">usbRS232</a></li>
<li><a href="Arduino2313.html" class="link_page_passage">Arduino2313</a></li>
<li><a href="E3-83-87-E3-82-B8-E3-82-BF-E3-83-AB-E3-83-86-E3-82-B9-E3-82-BF-E3-83-BC-.html" class="link_page_passage">デジタルテスター</a></li>
<li><a href="ATmega88E7-94-9F-E6-B4-BB-.html" class="link_page_passage">ATmega88生活</a></li>
<li><a href="KeyBoardE3-83-9E-E3-83-8B-E3-82-A2-.html" class="link_page_passage">KeyBoardマニア</a></li>
<li><a href="KeyBoardE3-83-9E-E3-83-8B-E3-82-A2-II.html" class="link_page_passage">KeyBoardマニアII</a></li>
<li><a href="Arduino400.html" class="link_page_passage">Arduino400</a></li>
<li><a href="PICspx.html" title="PICspx" class="link_page_passage">PICライター</a></li>
<li><a href="hid_blaster.html" title="hid_blaster" class="link_page_passage">ARMライター</a></li>
<li><a href="E8-B5-A4-E5-A4-96-E7-B7-9A-E3-83-AA-E3-83-A2-E3-82-B3-E3-83-B3-.html" class="link_page_passage">赤外線リモコン</a></li></ul>
<p><a href="ARM.html" class="link_page_passage">ARM</a></p>
<ul class="list1 list-indent1"><li><a href="armon.html" title="armon" class="link_page_passage">STM32ブートローダー</a></li>
<li><a href="stm32f103.html" title="stm32f103" class="link_page_passage">STM8S-Discovery改造</a></li>
<li><a href="stm8s_blaster.html" title="stm8s_blaster" class="link_page_passage">STM8S-OpenOCDライター</a></li>
<li><a href="LPCXpresso.html" class="link_page_passage">LPCXpresso</a></li>
<li><a href="lpc2D-armon.html" title="lpc-armon" class="link_page_passage">LPC用ブートローダー</a></li>
<li><a href="LPCUSB.html" title="LPCUSB" class="link_page_passage">NXP用LPCUSB</a></li>
<li><a href="ARM7mon.html" title="ARM7mon" class="link_page_passage">NXP用ブートローダー</a></li>
<li><a href="LPC1114.html" title="LPC1114" class="link_page_passage">MARY基板</a></li>
<li><a href="LPC1114FN28.html" class="link_page_passage">LPC1114FN28</a></li>
<li><a href="arm_blaster.html" title="arm_blaster" class="link_page_passage">OpenOCD　JTAGアダプター</a></li>
<li><a href="openocd2D-build.html" title="openocd-build" class="link_page_passage">OpenOCDビルド方法</a></li>
<li><a href="arm2D-gcc.html" title="arm-gcc" class="link_page_passage">arm-gccビルド方法</a></li>
<li><a href="mapleIDE.html" title="mapleIDE" class="link_page_passage">mapleIDEの改造</a></li>
<li><a href="libmapleE3-81-A7-E4-BB-AE-E6-83-B3-COM.html" class="link_page_passage">libmapleで仮想COM</a></li></ul>
<p>PIC32</p>
<ul class="list1 list-indent1"><li><a href="PIC32MX.html" class="link_page_passage">PIC32MX</a></li>
<li><a href="Pinguino.html" title="Pinguino" class="link_page_passage">Pinguinoで遊ぼう</a></li>
<li><a href="HIDBootX.html" title="HIDBootX" class="link_page_passage">ブートローダーを作る</a></li>
<li><a href="uartflash32.html" title="uartflash32" class="link_page_passage">シリアルブートローダー</a></li>
<li><a href="PIC32MX_USBCDC.html" title="PIC32MX_USBCDC" class="link_page_passage">USB仮想シリアル</a></li>
<li><a href="USB_CUSTOM.html" title="USB_CUSTOM" class="link_page_passage">USBカスタムデバイス</a></li>
<li><a href="PIC32mon.html" title="PIC32mon" class="link_page_passage">USB簡易モニター</a></li>
<li><a href="USBE3-82-AA-E3-82-B7-E3-83-AD-E3-82-B9-E3-82-B3-E3-83-BC-E3-83-97-.html" class="link_page_passage">USBオシロスコープ</a></li>
<li><a href="USB_HOST.html" title="USB_HOST" class="link_page_passage">USBホスト</a>　</li>
<li><a href="Bluetooth.html" title="Bluetooth" class="link_page_passage">PIC32でBluetooth</a>　</li>
<li><a href="USBAudio.html" class="link_page_passage">USBAudio</a>　</li>
<li><a href="USBStudy.html" class="link_page_passage">USBStudy</a>　</li>
<li><a href="pic32vga.html" title="pic32vga" class="link_page_passage">VGA出力に挑戦</a></li>
<li><a href="tinyBasic2.html" title="tinyBasic2" class="link_page_passage">BASICを動かす</a></li>
<li><a href="WinUSB.html" class="link_page_passage">WinUSB</a>　</li>
<li><a href="PIC32MXcust.html" title="PIC32MXcust" class="link_page_passage">勝手に改蔵*PIC32</a></li></ul>
<p>PIC18F</p>
<ul class="list1 list-indent1"><li><a href="pic18boot.html" title="pic18boot" class="link_page_passage">HIDブートローダー</a></li>
<li><a href="" title="pic18spx" class="link_page_passage">AVR/PIC両用ライター</a></li>
<li><a href="pic18blaster.html" title="pic18blaster" class="link_page_passage">ARMライター</a></li>
<li><a href="pic18monit.html" title="pic18monit" class="link_page_passage">usb汎用クラス</a></li>
<li><a href="usbserial.html" title="usbserial" class="link_page_passage">usbシリアル変換</a></li>
<li><a href="pic18hidkey.html" title="pic18hidkey" class="link_page_passage">usbキーボード変換</a></li>
<li><a href="sdcc.html" title="sdcc" class="link_page_passage">sdccを使いこなす</a></li>
<li><a href="mcc18.html" title="mcc18" class="link_page_passage">mcc18を使いこなす</a></li>
<li><a href="HIDmon2D-2550.html" class="link_page_passage">HIDmon-2550</a></li>
<li><a href="HIDmon2D-14K50.html" class="link_page_passage">HIDmon-14K50</a></li>
<li><a href="PICmonitor.html" class="link_page_passage">PICmonitor</a></li></ul>
<p>試行錯誤の記録</p>
<ul class="list1 list-indent1"><li><a href="UBW.html" title="UBW" class="link_page_passage">UBWを試す</a></li>
<li><a href="HIDboot.html" title="HIDboot" class="link_page_passage">旧HIDboot</a></li>
<li><a href="PIC18F2550.html" title="PIC18F2550" class="link_page_passage">PIC18F2550試用記</a></li>
<li><a href="PIC18F4550.html" title="PIC18F4550" class="link_page_passage">PIC18F4550試用記</a></li></ul>
<p>その他マイコン</p>
<ul class="list1 list-indent1"><li><a href="NEC78K.html" class="link_page_passage">NEC78K</a></li>
<li><a href="RX62N.html" class="link_page_passage">RX62N</a></li>
<li><a href="SH2A.html" class="link_page_passage">SH2A</a></li>
<li><a href="EF-BC-A8-EF-BC-98-.html" class="link_page_passage">Ｈ８</a></li>
<li><a href="FM3.html" class="link_page_passage">FM3</a></li>
<li><a href="ubuntuXP.html" title="ubuntuXP" class="link_page_passage">XPからubuntuに乗り換え</a></li>
<li><a href="Android.html" class="link_page_passage">Android</a></li>
<li><a href="Xen2D-hypervisor.html" class="link_page_passage">Xen-hypervisor</a></li>
<li><a href="Windows8E3-82-AB-E3-82-B9-E3-82-BF-E3-83-9E-E3-82-A4-E3-82-BA-.html" class="link_page_passage">Windows8カスタマイズ</a></li></ul>
<p>開発日記</p>
<ul class="list1 list-indent1"><li><a href="20152D-04.html" class="link_page_passage">2015-04</a></li></ul>
<hr class="full_hr" />
<p>ノウハウ</p>
<ul class="list1 list-indent1"><li><a href="AVRUSB_Tips.html" class="link_page_passage">AVRUSB_Tips</a></li>
<li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E6-83-85-E5-A0-B1-.html" class="link_page_passage">ＨＩＤａｓｐ情報</a></li>
<li><a href="E6-B1-8E-E7-94-A8-EF-BC-B5-EF-BC-B3-EF-BC-A2-2D-EF-BC-A9-EF-BC-AF-.html" class="link_page_passage">汎用ＵＳＢ-ＩＯ</a></li></ul>
<hr class="full_hr" />
<p>・<a href="AVRlink.html" title="AVRlink" class="link_page_passage">リンク</a></p>
<p>フリースペース</p>
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/cgi-bin/note/index.cgi" rel="nofollow">ゲストブック</a></li></ul>
<hr class="full_hr" />
<p><a href="EF-BC-B7-EF-BD-89-EF-BD-84-EF-BD-85-EF-BC-B4-EF-BD-85-EF-BD-98-EF-BD-94-.html" title="ＷｉｄｅＴｅｘｔ" class="link_page_passage">旧コンテンツ</a><br />
<a href="EF-BC-B7-EF-BD-89-EF-BD-8E-EF-BC-B6-EF-BD-89-EF-BD-93-EF-BD-94-EF-BD-81-.html" class="link_page_passage">ＷｉｎＶｉｓｔａ</a><br />
<a href="E3-82-A4-E3-83-B3-E3-82-BF-E3-83-BC-E3-83-95-E3-82-A7-E3-83-BC-E3-82-B9-E8-80-83-.html" class="link_page_passage">インターフェース考</a></p>
<hr class="full_hr" />
<h5>最新の20件</h5>
<div><strong>2024-06-20</strong>
<ul class="recent_list">
 <li><a href="Newest.html" class="link_page_passage">Newest</a></li>
 <li><a href="20222D-08.html" class="link_page_passage">2022-08</a></li>
 <li><a href="MenuBar.html" class="link_page_passage">MenuBar</a></li>
</ul>
<strong>2022-12-06</strong>
<ul class="recent_list">
 <li><a href="MSE3-82-A2-E3-82-AB-E3-82-A6-E3-83-B3-E3-83-88-E3-81-AE-WindowsE3-81-AE-CE3-83-89-E3-83-A9-E3-82-A4-E3-83-96-E3-82-92-E4-BF-AE-E5-BE-A9-E3-81-99-E3-82-8B-.html" class="link_page_passage">MSアカウントのWindowsのCドライブを修復する</a></li>
</ul>
<strong>2022-09-29</strong>
<ul class="recent_list">
 <li><a href="AndroidE3-81-AB-SSLE8-87-AA-E5-B7-B1-E7-BD-B2-E5-90-8D-E8-A8-BC-E6-98-8E-E6-9B-B8-E3-82-92-E5-85-A5-E3-82-8C-E3-82-8B-.html" class="link_page_passage">AndroidにSSL自己署名証明書を入れる</a></li>
</ul>
<strong>2022-09-01</strong>
<ul class="recent_list">
 <li><a href="UEFI_Basic.html" class="link_page_passage">UEFI_Basic</a></li>
</ul>
<strong>2022-08-31</strong>
<ul class="recent_list">
 <li><a href="SMRE3-81-AA-HDDE3-83-99-E3-83-B3-E3-83-81-E3-83-9E-E3-83-BC-E3-82-AF-.html" class="link_page_passage">SMRなHDDベンチマーク</a></li>
 <li><a href="E7-B0-A1-E6-98-93-E9-80-9F-E5-BA-A6-E6-B8-AC-E5-AE-9A-E3-82-B5-E3-82-A4-E3-83-88-.html" class="link_page_passage">簡易速度測定サイト</a></li>
 <li><a href="E3-83-8D-E3-83-83-E3-83-88-E3-83-AF-E3-83-BC-E3-82-AF-BOOT.html" class="link_page_passage">ネットワークBOOT</a></li>
</ul>
<strong>2022-08-26</strong>
<ul class="recent_list">
 <li><a href="E7-B0-A1-E6-98-93-E3-82-B3-E3-83-B3-E3-83-91-E3-82-A4-E3-83-AB-E3-83-99-E3-83-B3-E3-83-81-.html" class="link_page_passage">簡易コンパイルベンチ</a></li>
</ul>
<strong>2022-08-01</strong>
<ul class="recent_list">
 <li><a href="/ATMEL_AVR/html/" class="link_page_passage">FrontPage</a></li>
 <li><a href="20152D-04.html" class="link_page_passage">2015-04</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-EF-BD-98-.html" class="link_page_passage">ＨＩＤａｓｐｘ</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E6-83-85-E5-A0-B1-.html" class="link_page_passage">ＨＩＤａｓｐ情報</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-.html" class="link_page_passage">ＨＩＤａｓｐ</a></li>
 <li><a href="NEC78K.html" class="link_page_passage">NEC78K</a></li>
 <li><a href="AVRetc.html" class="link_page_passage">AVRetc</a></li>
 <li><a href="AVR_Monit.html" class="link_page_passage">AVR_Monit</a></li>
 <li><a href="20082D-08.html" class="link_page_passage">2008-08</a></li>
</ul>
<strong>2022-07-31</strong>
<ul class="recent_list">
 <li><a href="EF-BC-B7-EF-BD-89-EF-BD-84-EF-BD-85-EF-BC-B4-EF-BD-85-EF-BD-98-EF-BD-94-.html" class="link_page_passage">ＷｉｄｅＴｅｘｔ</a></li>
</ul>
</div>
</div>
 <div id="mainColumnWrapper">
  <div id="main-column">
   <div id="navigator"><ul><li class="selected" id="separate"><a href="">本文</a></li><li><a href="./?cmd=edit&amp;page=pic18spx">編集</a></li><li><a href="./?cmd=diff&amp;page=pic18spx">差分</a></li></ul></div>
   <div id="content">
    <h1 class="firstHeading">pic18spx</h1><div id="contentSub"></div>
    <p><a href="20102D-02.html" class="link_page_passage">2010-02</a>　<a href="PICspx.html" class="link_page_passage">PICspx</a></p>
<h2 id="content_1_0">PIC18F2550/4550/14K50によるAVR/PIC両用ライター<a class="anchor_super" id="jb10237f" href="#jb10237f" title="jb10237f" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>およびＣ言語でリライトしたHIDmonが１つのファームウェアに納まっています。</li></ul>
<p><a href="/ATMEL_AVR/jpg/PIC/pic3.jpg" rel="nofollow"><img src="/ATMEL_AVR/jpg/PIC/pic3.jpg" alt="/ATMEL_AVR/jpg/PIC/pic3.jpg" /></a></p>
<p>左：PIC18F2550　中：18F14K50+PIC24FJ64　右：18F14K50+ATmega88<a id="notetext_1" href="#notefoot_1" class="note_super" title="写真に写っているPIC24FJ64やATmega88チップはライターの書き込みターゲット、もしくはシリアル通信の相手としてオンボード実装しているだけです。pic18spxそのものの動作に必要と言う訳で...">*1</a></p>
<ul class="list1 list-indent1"><li>10PinのISPコネクタは上段がファーム更新用で、下段がターゲットマイコンへの接続用です。
<br /></li>
<li>真ん中の基板は18F14K50を3.3V動作させて、オンボードのPIC24FJ64にそのまま接続されています。</li>
<li>PIC24F用の書き込みソフトも作成しました。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>右側の基板はArduino互換機兼PIC/AVR両用ライターです。
<ul class="list2 list-indent1"><li>Arduinoとして動作させるときはPIC18F14K50のファームを差し替えてUSBシリアル変換器として動作させます。</li></ul></li></ul>
<p><br /></p>
<hr class="full_hr" />
<p>ここに書かれている内容は分かりにくいと思いますので、初めて制作される方は<br />
以下のkumanさんの解説ページも合わせてお読みください。</p>
<ul class="list1 list-indent1"><li><a href="http://www.geocities.jp/kuman2600/o19pic18spx.html" rel="nofollow">http://www.geocities.jp/kuman2600/o19pic18spx.html</a></li></ul>
<ul class="list1 list-indent1"><li>分かりやすい解説を作られたkumanさんに感謝します。</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />
<p><a href="/ATMEL_AVR/jpg/PIC/14k50.jpg" rel="nofollow"><img src="/ATMEL_AVR/jpg/PIC/14k50.jpg" alt="/ATMEL_AVR/jpg/PIC/14k50.jpg" /></a>
<a href="/ATMEL_AVR/jpg/ae18f2550.jpg" rel="nofollow"><img src="/ATMEL_AVR/jpg/ae18f2550.jpg" alt="/ATMEL_AVR/jpg/ae18f2550.jpg" /></a></p>
<p>■ 概要</p>
<pre> これは、MicroChipが提供している PIC18 のUSBアプリケーションフレームワーク
 に含まれているHID-Bootloader をもとにして作成した PIC18F専用の簡易モニタ（兼PIC/AVR両用ライター）です。</pre>
<p>■ 現在のステータス</p>
<pre> （１）PIC 18F2550/4550/14K50上で動作します。
 （２）簡易モニタとして、picmon.exe が使えます。（メモリー、I/Oの参照と変更が可能です。）
 （３）HIDaspx の仮バージョンが動きます。（AVRライターとして使えます。）
 （４）picwrite.exe の仮バージョンが動きます。 (LVP書き込み専用ですがPICライターとして使えます。)
 （５）writer24.exe の仮バージョンが動きます。 (PIC24Fライタ)</pre>
<p>■ 試し方</p>
<ul class="list1 list-indent1"><li>まず、<a href="pic18boot.html" class="link_page_passage">pic18boot</a>を使用してファームウェアを書き込みます。</li></ul>
<pre> C:&gt; picboot -r firmware/picmon-18F2550.hex</pre>
<ul class="list1 list-indent1"><li>デバイスが18F2550/18F4550の場合は、picmon-18F2550.hexを、18F14K50の場合はpicmon-18F14k50.hexを書き込んでください。</li></ul>
<pre> 次に、picmon を起動します。
 C:&gt; cd host
 C:host&gt; picmon.exe </pre>
<ul class="list1 list-indent1"><li><del>現在実装されているのは HIDCMD_PEEK と POKEだけです。</del></li>
<li>以下のコマンドは有効です。
<pre>	&quot;* HID_Monit Ver 0.1\n&quot;
	&quot;Command List\n&quot;
	&quot; d  &lt;ADDRESS1&gt; &lt;ADDRESS2&gt;    Dump Memory(RAM)\n&quot;
	&quot; dr &lt;ADDRESS1&gt; &lt;ADDRESS2&gt;    Dump Memory(EEPROM)\n&quot;
	&quot; dp &lt;ADDRESS1&gt; &lt;ADDRESS2&gt;    Dump Memory(PGMEM)\n&quot;
	&quot; e  &lt;ADDRESS1&gt; &lt;DATA&gt;        Edit Memory\n&quot;
	&quot; f  &lt;ADDRESS1&gt; &lt;ADDRESS2&gt; &lt;DATA&gt; Fill Memory\n&quot;
	&quot; l  &lt;ADDRESS1&gt; &lt;ADDRESS2&gt;    List (Disassemble) PGMEM\n&quot;
	&quot; p ?                         Print PortName-List\n&quot;
	&quot; p .                         Print All Port (column format)\n&quot;
	&quot; p *                         Print All Port (dump format)\n&quot;
	&quot; p &lt;PortName&gt;                Print PortAddress and data\n&quot;
	&quot; p &lt;PortName&gt; &lt;DATA&gt;         Write Data to PortName\n&quot;
	&quot; p &lt;PortName&gt;.&lt;bit&gt; &lt;DATA&gt;   Write Data to PortName.bit\n&quot;
	&quot; sleep &lt;n&gt;                   sleep &lt;n&gt; mSec\n&quot;
	&quot; bench &lt;CNT&gt;                 HID Write Speed Test\n&quot;
	&quot; boot                        Start user program\n&quot;
	&quot; run  &lt;address&gt;              Run user program at &lt;address&gt;\n&quot;
	&quot; user &lt;arg&gt;                  Run user defined function (usercmd.c)\n&quot;
	&quot; poll &lt;portName&gt;             Continuous polling port\n&quot;
	&quot; poll &lt;portName&gt; &lt;CNT&gt;       continuous polling port\n&quot;
	&quot; poll  *  &lt;CNT&gt;              continuous polling port A,B,D\n&quot;
	&quot; graph &lt;portName&gt;            Graphic display\n&quot;
	&quot; q                           Quit to DOS\n&quot;</pre></li></ul>
<ul class="list1 list-indent1"><li>実行例
<pre>TARGET DEV_ID=25
PIC&gt; d
000000 00 00 40 00 20 78 02 00
000008 08 41 22 68 05 00 07 20
000010 bf 04 02 80 ac 40 84 41
000018 5d 44 88 83 05 03 c4 41
000020 fe 20 85 84 0c e9 24 cb
000028 36 50 8c 22 22 f8 51 21
000030 04 44 25 dc 02 c0 31 14
000038 81 09 48 d4 43 10 d6 35
PIC&gt; l 0
0000 6af7        clrf   0xf7, 0
0002 6af8        clrf   0xf8, 0
0004 d054        bra    0xae
0006 d330        bra    0x668
0008 ef04 f004   goto   0x808
000c d05d        bra    0xc8
000e d27b        bra    0x506
0010 d328        bra    0x662
0012 d32c        bra    0x66c
0014 d32f        bra    0x674
0016 d345        bra    0x6a2
0018 ef0c f004   goto   0x818
001c 0112        movlb  0x12
001e 0200        mulwf  0, 0
0020 0000        nop
0022 4000        rrncf  0, 0, 0
0024 04d8        decf   0xd8, 0, 0
0026 003c        dw     0x3c  ;unknown opcode
PIC&gt; q
Bye.

C:&gt;</pre></li></ul>
<p>■ ディレクトリ構成</p>
<pre>+- picspx/ -+-- picspx/     AVRライター    (gcc)
            |
            +-- picwriter/  PIC18Fライター (gcc)
            |
            +-- writer24/   PIC24Fライター (gcc)
            |
            +-- picmon/     簡易モニター   (gcc)
            |
            +-- firmware/   ファームウェア (mcc18)</pre>
<p>■ 回路図 (PIC 18F4550)</p>
<p><a href="circuit.txt.html" class="link_page_passage">circuit.txt</a> を参照してください</p>
<p>■ AVRライターとしての試し方</p>
<p>18F2550/18F4550の４本のSPI信号を書き込み先のAVRチップに接続します。</p>
<p>18F4550上のpin番号:信号名  = SPI端子(AVRチップ上のピン名称)</p>
<pre>			-----------------------------
 				25:RC6=TX  = Reset
				33:RB0=SDI = MISO
 				34:RB1=SCK = SCK
 				26:RC7=SDO = MOSI
			-----------------------------</pre>
<pre>C:&gt; cd picspx
C:picspx&gt; picspx-gcc.exe  -r</pre>
<p>のようにして使います。</p>
<pre>C:picspx&gt; picspx-gcc.exe </pre>
<p>だけを入力すると使い方の表示が出ます。</p>
<p>picspx-gcc.ini が同じディレクトリにない場合は、少なくとも -ph
オプションを手動で指定する必要があります。</p>
<p>■ PICライターとしての試し方</p>
<pre> 接続:</pre>
<pre>AVR用ISP 6PIN          書き込み対象 PIC18F2550/14K50</pre>
<hr class="full_hr" />
<pre>	1 MISO    ------------------&gt;   PGD
	2 Vcc     ------------------&gt;   Vcc
	3 SCK     ------------------&gt;   PGC
	4 MOSI    ------------------&gt;   PGM
	5 RESET   ------------------&gt;   MCLR
	6 GND     ------------------&gt;   GND</pre>
<pre>・picwriter/picwrite.exe -r 
　を実行して、PICのデバイスIDが表示できれば、接続はうまくいっています。
・LVP書き込みモードのないPICや、既にHVP(高電圧)書き込み済みのPICは
  このPICライターでは読み書きできません。
・LVP書き込み後のマイコン使用時は常時PGM端子を「プルダウン」して使用する</pre>
<p>　 必要があります。</p>
<hr class="full_hr" />
<p>■ hidmon-14k50 や hidmon-2550との違い</p>
<pre>・一応、Ｃ言語で書かれています。(mcc18)</pre>
<pre>・コードサイズが大きいです。(5kB程度)</pre>
<pre>・USB のPIDが違います。</pre>
<pre>・プロトコルも違います。</pre>
<pre>・HID Reportの転送方法が異なります。
  hidmonでは、全てコントロール転送(HidD_SetFeature/HidD_GetFeature)
  で行っていますが、picmonit.exeでは、EndPoint1に対するインタラプト転送
  によりデータの受け渡しを行っています。</pre>
<pre>  このため、インタラプト転送パケットがデバイスより送出されない限りは
  HID Reportを受け取ることができません。（ホストがタイムアウトになります）
  送出された場合は、必ず受け取っておかないと、次パケットの受信時に、バッファ</pre>
<p>　 にたまった古いパケットを受け取って混乱することになります。</p>
<p>■ 何に使えますか？</p>
<pre>・picmon.exe 上のコマンドと、firmware上のコマンド受け取り処理の対を
　自分で追加することにより、いろいろな機能を追加することが出来ます。</pre>
<p>graphコマンドによる、10kHzサンプリング画像</p>
<pre>PIC&gt; graph</pre>
<pre>PIC&gt; graph portc trig 1</pre>
<p><a href="/ATMEL_AVR/jpg/PIC/infrared2.png" rel="nofollow"><img src="/ATMEL_AVR/jpg/PIC/infrared2.png" alt="/ATMEL_AVR/jpg/PIC/infrared2.png" /></a></p>
<p>アナログサンプリングは仮実装</p>
<pre>PIC&gt; graph analog</pre>
<pre>PIC&gt; graph analog trig</pre>
<p>サンプリング周期の変更方法</p>
<ul class="list1 list-indent1"><li>firmware/main.c の修正によるもの</li>
<li>picmon.exe から、 p pr2 XX のようにしてPeriod2レジスタを書き換える方法</li>
<li>さらに、T2CONレジスタをいじってプリスケーラーも変更する方法、など。</li></ul>
<ul class="list1 list-indent1"><li>ただし、データ引取り周期は1mS/パケット(64bye)が限度なので、60kHzが理論上の上限です。（これより速くしたい場合はCDCデバイスなどに変更したほうが良いでしょう）</li>
<li>30kHzでもUSBのフレームが間引かれた場合データ落ちが起きる可能性があります。（一応256byteのバッファは存在します）</li>
<li>アナログの場合１サンプル2byteなので30kHz以上には出来ません。</li></ul>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_1">ダウンロード<a class="anchor_super" id="j6584c79" href="#j6584c79" title="j6584c79" style="user-select:none;">&dagger;</a></h2>
<p>PIC側ファームウェア・HEXファイル、ソースファイル、
Windows側コマンドラインツール等一式。(2014-03-18: Windows8.1でデバイス認識しない問題を改善)</p>
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/upload/PIC/pic18spx-2010-0416.zip" rel="nofollow">pic18spx-2010-0416.zip</a></li></ul>
<p><br /></p>
<p>Windows8.1対応PIC側ファームウェアのみ(ソース込み)</p>
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/upload/PIC/pic18spx-2014-0317.zip" rel="nofollow">pic18spx-2014-0317.zip</a>
<ul class="list3 list-indent2"><li>こちらは、新しいＭＬＡ(microchip-libraries-for-applications-v2013-06-15-windows-installer.exe)をベースに新規実装したものです。</li>
<li>このバージョンならば頑張れば mcc18ではない、XC8でビルドすることも不可能ではありません。（要確認）</li>
<li>今のところ、PIC18F2550でしかビルド出来ません。</li>
<li>picmon.exeで動作確認を行いましたが、AVR/PICライターの動作確認はまだです。</li></ul></li></ul>
<p><br /></p>
<p>Linux版のhidspxコマンドラインツール（<strong>AVRライターソフト</strong>）。（少しの変更でMacOSXでも動作すると思います）</p>
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/upload/PIC/pic18spx-linux.zip" rel="nofollow">pic18spx-linux.zip</a></li></ul>
<p><br />
<strong>おまけ</strong></p>
<p>HIDaspx(AVRライター)しか持っていない場合でもPIC18Fxxxxにファームを焼けます。</p>
<ul class="list1 list-indent1"><li>read more : <a href="PICspx.html" class="link_page_passage">PICspx</a></li></ul>
<p><br />
Linuxホストからpicmon,picbootを試すことも出来ます。picmon/ ディレクトリで再コンパイルを行ってください。</p>
<ul class="list1 list-indent1"><li>実行には今のところルート権限が必要です。</li></ul>
<p><br />
<br />
<strong>おまけ２</strong></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_2">赤外線リモコン信号の解析機能を実装済みです。<a class="anchor_super" id="u003335e" href="#u003335e" title="u003335e" style="user-select:none;">&dagger;</a></h2>
<p>上記<strong>ダウンロード</strong>のアーカイブ(pic18spx-XXXX.zip)を取得してください。</p>
<ul class="list1 list-indent1"><li>■ 概要</li></ul>
<pre>  PIC18F2550/4550を使用して、赤外線リモコンの受光波形を観測することが出来ます。</pre>
<p>■ 使い方</p>
<pre>  （１）firmware/picmon-18f2550.hex を焼きます。
  （２）リモコン受信器(38kHz)の出力端子をPICのPortA.bit0に繋ぎます。
  （３）PICデバイスをUSB経由で接続した後、 picmonit.exe を起動します。

C:picspx&gt; picmon\picmonit.exe</pre>
<pre>PIC&gt; プロンプトが出たら、以下のコマンドを入力します。
PIC&gt; graph porta infra</pre>
<pre>  （４）リモコン受信器に向けて、家電協規格の赤外線リモコン信号を送ります。</pre>
<pre>するとコンソールに、解析したビットを表示します。</pre>
<pre>HDR:01000000_00000100_00000001_00000000_10001000_10001001_ HEX:40 04 01 00 88 89
HDR:01000000_00000100_00000001_00000000_00001000_00001001_ HEX:40 04 01 00 08 09
HDR:01000000_00000100_00000001_00000000_00001000_00001001_ HEX:40 04 01 00 08 09
HDR:01000000_00000100_00000001_00000000_11001000_11001001_ HEX:40 04 01 00 c8 c9
HDR:01000000_00000100_00000001_00000000_00101000_00101001_ HEX:40 04 01 00 28 29</pre>
<p>■ HEXの内容について</p>
<pre>先頭２バイト＝メーカーコード
次の３バイト＝リモコンボタンに応じた固有コード
最後の１バイト＝ボタン固有コード３バイトのチェックサム（ＸＯＲ値???）</pre>
<p>■ 家電協以外のリモコンは？</p>
<pre>現在のところ対応していません。（主にソニー、ＮＥＣ方式）
対応方法としては、picmon/infra.c に追加機能的に実装することができると思います。</pre>
<hr class="note_hr" /><a id="notefoot_1" href="#notetext_1" class="note_super">*1</a>
<span class="small">写真に写っているPIC24FJ64やATmega88チップはライターの書き込みターゲット、もしくはシリアル通信の相手としてオンボード実装しているだけです。pic18spxそのものの動作に必要と言う訳ではありません。</span><br />   </div>
  </div>
 </div>
 <div style="clear:both;height:1em;"></div>
 <div id="logo"><a href="/ATMEL_AVR/html/" style="background-image: url(image/title.jpg);"></a></div>
 <div id="personal"><ul><li class="login"><a href="http://">ログインまたはアカウント作成</a></li></ul></div>
 <div id="footer">
  <div id="f-officialico">
   <a href="http://pukiwiki.sourceforge.jp/"><img src="../image/b_pukiwiki.official.png" alt="PukiWiki-official" /></a>
  </div>
  <div id="f-officialdevico">
   <a href="http://pukiwiki.sourceforge.jp/dev/"><img src="../image/b_pukiwiki.dev.png" alt="PukiWiki-dev" /></a>
  </div>
  <div id="f-list">
   <ul><li id="lastmod">Last-modified: 2014-11-17 (月) 14:44:27<span class="page_passage" data-mtime="2014-11-17T14:44:27+09:00"></span></li><li>Site admin: <a href="http://pukiwiki.example.com/">anonymous</a></li>    <li>Powered by PukiWiki</li>
    <li><a href="http://www.luntf.com/">Monobook for PukiWiki</a></li>
   </ul>
  </div>
  <div style="clear:both;"></div>
 </div>
</div>
</body>
</html>
