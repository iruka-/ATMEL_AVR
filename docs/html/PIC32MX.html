<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">

<head>
 <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
 <title>PIC32MX - PukiWiki</title>

<!---
 <link rel="stylesheet" media="screen and (max-width:768px)" href="../skin/180wiki-sp.css" />

 --->

 <link rel="stylesheet" media="screen and (max-width:768px)" href="../skin/monobook/mobile.css" />
 <link rel="stylesheet" media="screen and (min-width:769px)" href="../skin/monobook/monobook.css" />

 <link rel="stylesheet" type="text/css" media="print" href="../skin/monobook/monobook.print.css" />
 <link rel="alternate" type="application/rss+xml" title="RSS" href="./?cmd=rss" />

 <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>
<div id="globalWrapper">
 <div id="menubar">
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/html/" title="FrontPage" class="link_page_passage" data-mtime="2022-08-01T12:48:11+09:00">Ｔｏｐ</a></li></ul>
<hr class="full_hr" />
<p><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-EF-BD-98-.html" class="link_page_passage" data-mtime="2022-08-01T10:38:55+09:00">ＨＩＤａｓｐｘ</a></p>
<ul class="list1 list-indent1"><li><a href="EF-BC-A4-EF-BD-8F-EF-BD-97-EF-BD-8E-EF-BC-AC-EF-BD-8F-EF-BD-81-EF-BD-84-.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">ＤｏｗｎＬｏａｄ</a></li>
<li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E9-AB-98-E9-80-9F-E5-8C-96-.html" class="link_page_passage" data-mtime="2022-07-25T21:56:43+09:00">ＨＩＤａｓｐ高速化</a></li>
<li><strong><a href="20222D-08.html" title="2022-08" class="link_page_passage" data-mtime="2022-12-06T14:55:12+09:00">開発日記</a></strong> <a href="SiteMap.html" title="SiteMap" class="link_page_passage" data-mtime="2022-07-31T15:21:46+09:00">ログ</a></li></ul>
<p><a href="E5-88-B6-E4-BD-9C-.html" class="link_page_passage" data-mtime="2013-04-29T09:29:29+09:00">制作</a></p>
<p><a href="AVRetc.html" title="AVRetc" class="link_page_passage" data-mtime="2022-08-01T10:38:10+09:00">ＡＶＲ関係</a></p>
<ul class="list1 list-indent1"><li><a href="AVR_Monit.html" class="link_page_passage" data-mtime="2022-08-01T10:38:01+09:00">AVR_Monit</a></li>
<li><a href="AVR_term.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">AVR_term</a></li>
<li><a href="W32_term.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">W32_term</a></li>
<li><a href="HIDmon88.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">HIDmon88</a></li>
<li><a href="HIDtester.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">HIDtester</a></li>
<li><a href="usbRS232.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">usbRS232</a></li>
<li><a href="Arduino2313.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">Arduino2313</a></li>
<li><a href="E3-83-87-E3-82-B8-E3-82-BF-E3-83-AB-E3-83-86-E3-82-B9-E3-82-BF-E3-83-BC-.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">デジタルテスター</a></li>
<li><a href="ATmega88E7-94-9F-E6-B4-BB-.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">ATmega88生活</a></li>
<li><a href="KeyBoardE3-83-9E-E3-83-8B-E3-82-A2-.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">KeyBoardマニア</a></li>
<li><a href="KeyBoardE3-83-9E-E3-83-8B-E3-82-A2-II.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">KeyBoardマニアII</a></li>
<li><a href="Arduino400.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">Arduino400</a></li>
<li><a href="PICspx.html" title="PICspx" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">PICライター</a></li>
<li><a href="hid_blaster.html" title="hid_blaster" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">ARMライター</a></li>
<li><a href="E8-B5-A4-E5-A4-96-E7-B7-9A-E3-83-AA-E3-83-A2-E3-82-B3-E3-83-B3-.html" class="link_page_passage" data-mtime="2014-12-01T23:50:24+09:00">赤外線リモコン</a></li></ul>
<p><a href="ARM.html" class="link_page_passage" data-mtime="2014-06-23T17:20:51+09:00">ARM</a></p>
<ul class="list1 list-indent1"><li><a href="armon.html" title="armon" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">STM32ブートローダー</a></li>
<li><a href="stm32f103.html" title="stm32f103" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">STM8S-Discovery改造</a></li>
<li><a href="stm8s_blaster.html" title="stm8s_blaster" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">STM8S-OpenOCDライター</a></li>
<li><a href="LPCXpresso.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">LPCXpresso</a></li>
<li><a href="lpc2D-armon.html" title="lpc-armon" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">LPC用ブートローダー</a></li>
<li><a href="LPCUSB.html" title="LPCUSB" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">NXP用LPCUSB</a></li>
<li><a href="ARM7mon.html" title="ARM7mon" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">NXP用ブートローダー</a></li>
<li><a href="LPC1114.html" title="LPC1114" class="link_page_passage" data-mtime="2012-09-12T22:43:19+09:00">MARY基板</a></li>
<li><a href="LPC1114FN28.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">LPC1114FN28</a></li>
<li><a href="arm_blaster.html" title="arm_blaster" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">OpenOCD　JTAGアダプター</a></li>
<li><a href="openocd2D-build.html" title="openocd-build" class="link_page_passage" data-mtime="2011-11-25T22:47:41+09:00">OpenOCDビルド方法</a></li>
<li><a href="arm2D-gcc.html" title="arm-gcc" class="link_page_passage" data-mtime="2011-11-27T16:31:48+09:00">arm-gccビルド方法</a></li>
<li><a href="mapleIDE.html" title="mapleIDE" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">mapleIDEの改造</a></li>
<li><a href="libmapleE3-81-A7-E4-BB-AE-E6-83-B3-COM.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">libmapleで仮想COM</a></li></ul>
<p>PIC32</p>
<ul class="list1 list-indent1"><li><a href="" class="link_page_passage" data-mtime="2015-05-02T16:17:40+09:00">PIC32MX</a></li>
<li><a href="Pinguino.html" title="Pinguino" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">Pinguinoで遊ぼう</a></li>
<li><a href="HIDBootX.html" title="HIDBootX" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">ブートローダーを作る</a></li>
<li><a href="uartflash32.html" title="uartflash32" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">シリアルブートローダー</a></li>
<li><a href="PIC32MX_USBCDC.html" title="PIC32MX_USBCDC" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">USB仮想シリアル</a></li>
<li><a href="USB_CUSTOM.html" title="USB_CUSTOM" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">USBカスタムデバイス</a></li>
<li><a href="PIC32mon.html" title="PIC32mon" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">USB簡易モニター</a></li>
<li><a href="USBE3-82-AA-E3-82-B7-E3-83-AD-E3-82-B9-E3-82-B3-E3-83-BC-E3-83-97-.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">USBオシロスコープ</a></li>
<li><a href="USB_HOST.html" title="USB_HOST" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">USBホスト</a>　</li>
<li><a href="Bluetooth.html" title="Bluetooth" class="link_page_passage" data-mtime="2014-09-27T22:53:38+09:00">PIC32でBluetooth</a>　</li>
<li><a href="USBAudio.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">USBAudio</a>　</li>
<li><a href="USBStudy.html" class="link_page_passage" data-mtime="2014-11-20T22:01:19+09:00">USBStudy</a>　</li>
<li><a href="pic32vga.html" title="pic32vga" class="link_page_passage" data-mtime="2015-02-01T14:32:31+09:00">VGA出力に挑戦</a></li>
<li><a href="tinyBasic2.html" title="tinyBasic2" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">BASICを動かす</a></li>
<li><a href="WinUSB.html" class="link_page_passage" data-mtime="2013-05-10T22:28:35+09:00">WinUSB</a>　</li>
<li><a href="PIC32MXcust.html" title="PIC32MXcust" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">勝手に改蔵*PIC32</a></li></ul>
<p>PIC18F</p>
<ul class="list1 list-indent1"><li><a href="pic18boot.html" title="pic18boot" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">HIDブートローダー</a></li>
<li><a href="pic18spx.html" title="pic18spx" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">AVR/PIC両用ライター</a></li>
<li><a href="pic18blaster.html" title="pic18blaster" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">ARMライター</a></li>
<li><a href="pic18monit.html" title="pic18monit" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">usb汎用クラス</a></li>
<li><a href="usbserial.html" title="usbserial" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">usbシリアル変換</a></li>
<li><a href="pic18hidkey.html" title="pic18hidkey" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">usbキーボード変換</a></li>
<li><a href="sdcc.html" title="sdcc" class="link_page_passage" data-mtime="2009-09-25T17:26:22+09:00">sdccを使いこなす</a></li>
<li><a href="mcc18.html" title="mcc18" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">mcc18を使いこなす</a></li>
<li><a href="HIDmon2D-2550.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">HIDmon-2550</a></li>
<li><a href="HIDmon2D-14K50.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">HIDmon-14K50</a></li>
<li><a href="PICmonitor.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">PICmonitor</a></li></ul>
<p>試行錯誤の記録</p>
<ul class="list1 list-indent1"><li><a href="UBW.html" title="UBW" class="link_page_passage" data-mtime="2009-04-16T22:42:14+09:00">UBWを試す</a></li>
<li><a href="HIDboot.html" title="HIDboot" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">旧HIDboot</a></li>
<li><a href="PIC18F2550.html" title="PIC18F2550" class="link_page_passage" data-mtime="2010-02-17T16:23:41+09:00">PIC18F2550試用記</a></li>
<li><a href="PIC18F4550.html" title="PIC18F4550" class="link_page_passage" data-mtime="2009-05-06T01:05:20+09:00">PIC18F4550試用記</a></li></ul>
<p>その他マイコン</p>
<ul class="list1 list-indent1"><li><a href="NEC78K.html" class="link_page_passage" data-mtime="2022-08-01T10:38:19+09:00">NEC78K</a></li>
<li><a href="RX62N.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">RX62N</a></li>
<li><a href="SH2A.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">SH2A</a></li>
<li><a href="EF-BC-A8-EF-BC-98-.html" class="link_page_passage" data-mtime="2010-04-28T09:27:01+09:00">Ｈ８</a></li>
<li><a href="FM3.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">FM3</a></li>
<li><a href="ubuntuXP.html" title="ubuntuXP" class="link_page_passage" data-mtime="2014-06-22T14:58:37+09:00">XPからubuntuに乗り換え</a></li>
<li><a href="Android.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">Android</a></li>
<li><a href="Xen2D-hypervisor.html" class="link_page_passage" data-mtime="2015-01-22T18:20:53+09:00">Xen-hypervisor</a></li>
<li><a href="Windows8E3-82-AB-E3-82-B9-E3-82-BF-E3-83-9E-E3-82-A4-E3-82-BA-.html" class="link_page_passage" data-mtime="2012-12-06T13:25:35+09:00">Windows8カスタマイズ</a></li></ul>
<p>開発日記</p>
<ul class="list1 list-indent1"><li><a href="20152D-04.html" class="link_page_passage" data-mtime="2022-08-01T10:41:06+09:00">2015-04</a></li></ul>
<hr class="full_hr" />
<p>ノウハウ</p>
<ul class="list1 list-indent1"><li><a href="AVRUSB_Tips.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">AVRUSB_Tips</a></li>
<li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E6-83-85-E5-A0-B1-.html" class="link_page_passage" data-mtime="2022-08-01T10:38:45+09:00">ＨＩＤａｓｐ情報</a></li>
<li><a href="E6-B1-8E-E7-94-A8-EF-BC-B5-EF-BC-B3-EF-BC-A2-2D-EF-BC-A9-EF-BC-AF-.html" class="link_page_passage" data-mtime="2008-10-13T03:47:40+09:00">汎用ＵＳＢ-ＩＯ</a></li></ul>
<hr class="full_hr" />
<p>・<a href="AVRlink.html" title="AVRlink" class="link_page_passage" data-mtime="2010-11-02T22:35:53+09:00">リンク</a></p>
<p>フリースペース</p>
<ul class="list1 list-indent1"><li><a href="/ATMEL_AVR/cgi-bin/note/index.cgi" rel="nofollow">ゲストブック</a></li></ul>
<hr class="full_hr" />
<p><a href="EF-BC-B7-EF-BD-89-EF-BD-84-EF-BD-85-EF-BC-B4-EF-BD-85-EF-BD-98-EF-BD-94-.html" title="ＷｉｄｅＴｅｘｔ" class="link_page_passage" data-mtime="2022-07-31T15:28:50+09:00">旧コンテンツ</a><br />
<a href="EF-BC-B7-EF-BD-89-EF-BD-8E-EF-BC-B6-EF-BD-89-EF-BD-93-EF-BD-94-EF-BD-81-.html" class="link_page_passage" data-mtime="2008-05-17T00:51:37+09:00">ＷｉｎＶｉｓｔａ</a><br />
<a href="E3-82-A4-E3-83-B3-E3-82-BF-E3-83-BC-E3-83-95-E3-82-A7-E3-83-BC-E3-82-B9-E8-80-83-.html" class="link_page_passage" data-mtime="2007-08-28T23:52:40+09:00">インターフェース考</a></p>
<hr class="full_hr" />
<h5>最新の20件</h5>
<div><strong>2022-12-06</strong>
<ul class="recent_list">
 <li><a href="MSE3-82-A2-E3-82-AB-E3-82-A6-E3-83-B3-E3-83-88-E3-81-AE-WindowsE3-81-AE-CE3-83-89-E3-83-A9-E3-82-A4-E3-83-96-E3-82-92-E4-BF-AE-E5-BE-A9-E3-81-99-E3-82-8B-.html" class="link_page_passage" data-mtime="2022-12-06T15:05:42+09:00">MSアカウントのWindowsのCドライブを修復する</a></li>
 <li><a href="20222D-08.html" class="link_page_passage" data-mtime="2022-12-06T14:55:12+09:00">2022-08</a></li>
</ul>
<strong>2022-09-29</strong>
<ul class="recent_list">
 <li><a href="AndroidE3-81-AB-SSLE8-87-AA-E5-B7-B1-E7-BD-B2-E5-90-8D-E8-A8-BC-E6-98-8E-E6-9B-B8-E3-82-92-E5-85-A5-E3-82-8C-E3-82-8B-.html" class="link_page_passage" data-mtime="2022-09-29T22:10:56+09:00">AndroidにSSL自己署名証明書を入れる</a></li>
</ul>
<strong>2022-09-01</strong>
<ul class="recent_list">
 <li><a href="UEFI_Basic.html" class="link_page_passage" data-mtime="2022-09-01T20:22:14+09:00">UEFI_Basic</a></li>
</ul>
<strong>2022-08-31</strong>
<ul class="recent_list">
 <li><a href="SMRE3-81-AA-HDDE3-83-99-E3-83-B3-E3-83-81-E3-83-9E-E3-83-BC-E3-82-AF-.html" class="link_page_passage" data-mtime="2022-08-31T11:15:42+09:00">SMRなHDDベンチマーク</a></li>
 <li><a href="E7-B0-A1-E6-98-93-E9-80-9F-E5-BA-A6-E6-B8-AC-E5-AE-9A-E3-82-B5-E3-82-A4-E3-83-88-.html" class="link_page_passage" data-mtime="2022-08-31T11:11:11+09:00">簡易速度測定サイト</a></li>
 <li><a href="E3-83-8D-E3-83-83-E3-83-88-E3-83-AF-E3-83-BC-E3-82-AF-BOOT.html" class="link_page_passage" data-mtime="2022-08-31T11:09:22+09:00">ネットワークBOOT</a></li>
</ul>
<strong>2022-08-26</strong>
<ul class="recent_list">
 <li><a href="E7-B0-A1-E6-98-93-E3-82-B3-E3-83-B3-E3-83-91-E3-82-A4-E3-83-AB-E3-83-99-E3-83-B3-E3-83-81-.html" class="link_page_passage" data-mtime="2022-08-26T16:28:56+09:00">簡易コンパイルベンチ</a></li>
</ul>
<strong>2022-08-05</strong>
<ul class="recent_list">
 <li><a href="MenuBar.html" class="link_page_passage" data-mtime="2022-08-05T09:51:36+09:00">MenuBar</a></li>
</ul>
<strong>2022-08-01</strong>
<ul class="recent_list">
 <li><a href="/ATMEL_AVR/html/" class="link_page_passage" data-mtime="2022-08-01T12:48:11+09:00">FrontPage</a></li>
 <li><a href="20152D-04.html" class="link_page_passage" data-mtime="2022-08-01T10:41:06+09:00">2015-04</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-EF-BD-98-.html" class="link_page_passage" data-mtime="2022-08-01T10:38:55+09:00">ＨＩＤａｓｐｘ</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-E6-83-85-E5-A0-B1-.html" class="link_page_passage" data-mtime="2022-08-01T10:38:45+09:00">ＨＩＤａｓｐ情報</a></li>
 <li><a href="EF-BC-A8-EF-BC-A9-EF-BC-A4-EF-BD-81-EF-BD-93-EF-BD-90-.html" class="link_page_passage" data-mtime="2022-08-01T10:38:34+09:00">ＨＩＤａｓｐ</a></li>
 <li><a href="NEC78K.html" class="link_page_passage" data-mtime="2022-08-01T10:38:19+09:00">NEC78K</a></li>
 <li><a href="AVRetc.html" class="link_page_passage" data-mtime="2022-08-01T10:38:10+09:00">AVRetc</a></li>
 <li><a href="AVR_Monit.html" class="link_page_passage" data-mtime="2022-08-01T10:38:01+09:00">AVR_Monit</a></li>
 <li><a href="20082D-08.html" class="link_page_passage" data-mtime="2022-08-01T10:37:50+09:00">2008-08</a></li>
</ul>
<strong>2022-07-31</strong>
<ul class="recent_list">
 <li><a href="EF-BC-B7-EF-BD-89-EF-BD-84-EF-BD-85-EF-BC-B4-EF-BD-85-EF-BD-98-EF-BD-94-.html" class="link_page_passage" data-mtime="2022-07-31T15:28:50+09:00">ＷｉｄｅＴｅｘｔ</a></li>
 <li><a href="RecentDeleted.html" class="link_page_passage" data-mtime="2022-07-31T15:25:08+09:00">RecentDeleted</a></li>
</ul>
</div>
</div>
 <div id="mainColumnWrapper">
  <div id="main-column">
   <div id="navigator"><ul><li class="selected" id="separate"><a href="">本文</a></li><li><a href="./?cmd=edit&amp;page=PIC32MX">編集</a></li><li><a href="./?cmd=diff&amp;page=PIC32MX">差分</a></li></ul></div>
   <div id="content">
    <h1 class="firstHeading">PIC32MX</h1><div id="contentSub"></div>
    <p>関連リンク　<a href="Pinguino.html" title="Pinguino" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">Pinguinoで遊ぼう</a>　<a href="HIDBootX.html" title="HIDBootX" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">ブートローダーを作る</a>　<a href="uartflash32.html" title="uartflash32" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">シリアルブートローダーを作る</a>　<a href="PIC32MX_USBCDC.html" title="PIC32MX_USBCDC" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">USB仮想シリアル</a>　<a href="USB_CUSTOM.html" title="USB_CUSTOM" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">USBカスタムデバイス</a>　<a href="PIC32mon.html" title="PIC32mon" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">USB簡易モニター</a>　
<a href="USB_HOST.html" title="USB_HOST" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">USBホスト</a>　<a href="USBE3-82-AA-E3-82-B7-E3-83-AD-E3-82-B9-E3-82-B3-E3-83-BC-E3-83-97-.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">USBオシロスコープ</a>　<a href="pic32vga.html" title="pic32vga" class="link_page_passage" data-mtime="2015-02-01T14:32:31+09:00">PIC32MXでVGA出力</a>　<a href="tinyBasic2.html" title="tinyBasic2" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">PIC32MXでBASICを動かす</a>
<a href="Bluetooth.html" title="Bluetooth" class="link_page_passage" data-mtime="2014-09-27T22:53:38+09:00">PIC32でBluetooth</a>　　<a href="USBStudy.html" class="link_page_passage" data-mtime="2014-11-20T22:01:19+09:00">USBStudy</a>　　
<a href="20132D-02.html" class="link_page_passage" data-mtime="2013-02-25T00:27:48+09:00">2013-02</a>　<a href="20132D-03.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">2013-03</a></p>
<h2 id="content_1_0">PIC32MXについて（概要）<a class="anchor_super" id="e9ad2aae" href="#e9ad2aae" title="e9ad2aae" style="user-select:none;">&dagger;</a></h2>
<p><strong>PIC32MX220F032B</strong></p>
<p><a href="/ATMEL_AVR/jpg/pic32mx220.jpg" rel="nofollow"><img src="/ATMEL_AVR/jpg/pic32mx220.jpg" alt="/ATMEL_AVR/jpg/pic32mx220.jpg" /></a></p>
<ul class="list1 list-indent1"><li>MicroChip社製の32bitマイクロコントローラー(MCU)です。</li>
<li>28pin DIPの廉価パッケージが存在します。(<a href="http://akizukidenshi.com/catalog/g/gI-05852/" rel="nofollow">秋月</a>で220円)</li>
<li>命令セットは往年のMIPS32/mips16互換です。(といっても32bitMIPS命令セットとしては比較的新しいものを取り込んでいます)</li>
<li>USBデバイス/ホストのどちらにもなれます。</li>
<li>I/Oペリフェラルの仕様はPIC24F<del>の使い回しです。</del>のそれと非常に良く似ています。</li></ul>
<p><br /></p>
<hr class="full_hr" />
<p>目次</p>
<div class="contents">
<a id="contents_1"></a>
<ul class="list1 list-indent1"><li><a href="#e9ad2aae">PIC32MXについて（概要）</a></li>
<li><a href="#p29ad4a5">攻略法</a></li>
<li><a href="#heb44b47">PIC32MXにファームウェア（プログラム）を書き込む５つの方法</a>
<ul class="list2 list-indent1"><li><a href="#ea095eca">（１）PicKit3を買ってくる。</a></li>
<li><a href="#a808f993">（２）シンセ・アンプラグドさんのLPC1114FN28ライターを使う。</a></li>
<li><a href="#d0c2610c">（２.１）シンセ・アンプラグドさんのLPC1114FN28ライターをMARY基板で使う。</a></li>
<li><a href="#je957e7b">（３）FTDIのチップ FT232やFT2232D を使って書き込む。</a></li>
<li><a href="#bcfe33df">（４）PicKit2を使って書き込む。</a></li>
<li><a href="#b4da032e">（５）なんちゃってPicKit2を使って書き込む。</a></li></ul></li>
<li><a href="#ncccd0ae">PIC18F2550(pic18spx基板)を用いて、PIC32MX220に接続してみた。</a></li>
<li><a href="#lc3a9804">Pinguinoのgccコンパイラとフレームワークを使ってＬチカをやってみる。</a>
<ul class="list2 list-indent1"><li><a href="#l291294a">続編・・・</a></li></ul></li>
<li><a href="#ad9488be">pic32progで（物理アドレス指定にしていない）fuseをちゃんと焼けるように改造する。</a></li>
<li><a href="#jd266405">pic32progを使って、PinguinoX.3に付属のHIDブートローダーを焼くには？</a></li>
<li><a href="#l8343c81">Pinguinoブートローダーの使い方。</a></li>
<li><a href="#nbab8a1e">PinguinoのスケッチでprintfしたものをUSB経由のteratermで表示したい。</a></li>
<li><a href="#g883fc9d">MIPS32のHEXファイルから逆アセンブルリストを作りたい</a></li>
<li><a href="#efe2f077">HID-BOOTLOADERのソース？</a></li>
<li><a href="#l77d3424">HID-BOOTLOADERのソースを探す。</a>
<ul class="list2 list-indent1"><li><a href="#m339891d">PIC32-Pinguino_HIDBoot_MX220.hex を再構築してみるテスト</a></li></ul></li>
<li><a href="#v04cfedd">HIDBoot.XをPinguino付属のmips32-gccで動かす。</a></li>
<li><a href="#ace0d76d">HIDBoot.Xを内蔵ＲＣ発振(FRC)で動かす。</a></li>
<li><a href="#b06169e1">PIC32MX220F032B のオーバークロッキングに挑戦</a></li>
<li><a href="#k351ef79">PIC32MX220F032B のオーバークロッキングの次はアンダークロッキング</a></li>
<li><a href="#f57ec9e7">PIC32MX220F032Bの水晶を8MHz以外で使うには</a></li>
<li><a href="#a9ffebee">PIC32MXで仮想シリアルポートを実装</a></li>
<li><a href="#m0343ddf">サンプルソース移植・改造のコツ</a></li>
<li><a href="#q8e42765">PIC32MXアーキテクチャーメモ</a></li>
<li><a href="#xa81a566">参考リンク</a></li></ul>
</div>

<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_1">攻略法<a class="anchor_super" id="p29ad4a5" href="#p29ad4a5" title="p29ad4a5" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>純正環境なら、microchipが配布している統合IDEのMPLABXとXC32コンパイラ(中身はMIPS32用 gcc)となっていますが、</li>
<li>無償版のXC32コンパイラはmips16オプションが使えなかったり、最適化オプションの使用に制限があります（というか最適化出来ません）。</li>
<li>MicroChip社製の少し古い開発環境(MPLAB v8.89)に付属するpic32-gccはもう更新が止まっていて古いのですが、一応mips16オプションが使用可能です。（但し、mips16オプションと最適化オプションが使えるのは試用版の60日間のみです<a id="notetext_1" href="#notefoot_1" class="note_super" title="関数アトリビュート __attribute__（（mips16）） を使用して関数単位でmips16化するという裏技は試用期間を過ぎた試用版やフリー版でも有効のようです。">*1</a> ）</li></ul>
<p>ということなので、今回は<strong>思いきって</strong></p>
<ul class="list1 list-indent1"><li>コンパイラやフレームワークに<a href="http://wiki.pinguino.cc/index.php/Main_Page/ja" rel="nofollow">Pinguino</a>を使用します。</li>
<li><a href="http://wiki.pinguino.cc/index.php/Main_Page/ja" rel="nofollow">Pinguino</a>のmips-gccには試用期間や最適化オプション制限
などは存在せず、フルスペックを（というか普通のgccとして）安心して無料で使用できます。</li>
<li>Pinguinoには、Windows版だけでなくLinux版とMacOS版の開発環境(gcc含む)も公開されています。</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_2">PIC32MXにファームウェア（プログラム）を書き込む５つの方法<a class="anchor_super" id="heb44b47" href="#heb44b47" title="heb44b47" style="user-select:none;">&dagger;</a></h2>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_3">（１）<a href="PicKit3.html" class="link_page_passage" data-mtime="2014-12-19T21:39:39+09:00">PicKit3</a>を買ってくる。<a class="anchor_super" id="ea095eca" href="#ea095eca" title="ea095eca" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li><a href="http://akizukidenshi.com/catalog/g/gM-03608/" rel="nofollow">秋月</a>で3900円で売っています。（注：消費税増税前、2013年時点での価格です。）</li>
<li><a href="PicKit3.html" title="PicKit3" class="link_page_passage" data-mtime="2014-12-19T21:39:39+09:00">PICKit3でHEXを書き込む場合の注意点</a></li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_4">（２）<a href="http://d.hatena.ne.jp/pcm1723/20121230/1356849249" rel="nofollow">シンセ・アンプラグド</a>さんのLPC1114FN28ライターを使う。<a class="anchor_super" id="a808f993" href="#a808f993" title="a808f993" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>LPC1114FN28というDIPタイプのARMマイコンと、USB-serial変換器（もしくはリアルRS-232Cを3.3Vにレベル変換）を用意します。</li>
<li>LPC1114FN28は110円程度で売っていますし、DIPなのでブレッドボード組みでも動かせます。</li>
<li>LPC1114FN28へのファームウェア書き込みはUSB-serialからデータを流し込むだけなので、特別なライター冶具は不要です。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>まず、LPC1114FN28に書き込み用のファームウェアを焼きます。</li>
<li>続いて、Microchipのアプリケーションノート1388番のPIC32_Bootloaders_v2012_10_05.zip に含まれているPIC32UBL.exeを使用してLPC1114経由でPIC32MXにプログラムを書き込みます。</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_5">（２.１）<a href="http://d.hatena.ne.jp/pcm1723/20121230/1356849249" rel="nofollow">シンセ・アンプラグド</a>さんのLPC1114FN28ライターをMARY基板で使う。<a class="anchor_super" id="d0c2610c" href="#d0c2610c" title="d0c2610c" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>MARY基板を使う場合は、USB-serial変換器やDIP ICを配線する手間が省けます。</li>
<li>が、MARY基板はDTR信号でリセットが掛かる仕様なので、PIC32UBL.exeを(DTR制御しないように改造して)リビルドする一手間が余計に掛かります。
<ul class="list2 list-indent1"><li>ビルド済みのexeを<a href="/ATMEL_AVR/upload/PIC/PIC32UBL.zip" rel="nofollow">ここ</a>に置いておきます。</li></ul></li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_6">（３）FTDIのチップ FT232やFT2232D を使って書き込む。<a class="anchor_super" id="je957e7b" href="#je957e7b" title="je957e7b" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>pic32progを改造することでそのようなことが可能です。</li>
<li>詳細は、以下の、すzさんのＨＰを参考にしてください。
<ul class="list2 list-indent1"><li><a href="http://suz-avr.sblo.jp/article/57754140.html" rel="nofollow">すzのAVR研究：FT232Rを PIC32MXライタに</a></li></ul></li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>オリジナルpic32progにはadapter-mpsse.cというソースが含まれていてFT2232DからJTAGピン経由で書き込めるようなプログラムの痕跡があるようですが、自分が試した限りでは、JTAG経由でうまくいきませんでした。
<ul class="list2 list-indent1"><li>デバイスIDの取得まではOKですが、config fuseの読み出しやファーム書き込みは駄目なようです。</li></ul></li>
<li>OpenOCDはMIPSをサポートしているらしいので、普通にFT2232DからJTAGでデバッグ出来そうな感じではあります。が、PIC32MXのファームウェア書き込みまでサポートされているかどうかは分かりません（要確認）。</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_7">（４）PicKit2を使って書き込む。<a class="anchor_super" id="bcfe33df" href="#bcfe33df" title="bcfe33df" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>PicKit2はPIC32MXに対応していませんが、<a href="http://code.google.com/p/pic32prog/" rel="nofollow">pic32prog</a>というオープンソースのユーティリティを使用することで、PicKit2経由でもPIC32MXに書き込むことができます。</li>
<li>ファームの読み出しやベリファイも可能です。</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_8">（５）なんちゃってPicKit2を使って書き込む。<a class="anchor_super" id="b4da032e" href="#b4da032e" title="b4da032e" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li>PIC18F2550のチップを持っているならば、PicKit2互換の書き込み器を即席で作ることが出来ます。</li></ul>
<p>以下にそのやり方を記します。</p>
<p><br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_9">PIC18F2550(<a href="pic18spx.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">pic18spx</a>基板)を用いて、PIC32MX220に接続してみた。<a class="anchor_super" id="ncccd0ae" href="#ncccd0ae" title="ncccd0ae" style="user-select:none;">&dagger;</a></h2>
<p><strong>概要</strong></p>
<ul class="list1 list-indent1"><li>PIC18F2550にPickit2ファームウェアを焼いて、即席Pickit2を作り、それを使ってpic32progを動作させた。</li></ul>
<p>ハードウェア概観</p>
<p><a href="/ATMEL_AVR/jpg/PIC/pic32prog1.jpg" rel="nofollow"><img src="/ATMEL_AVR/jpg/PIC/pic32prog1.jpg" alt="/ATMEL_AVR/jpg/PIC/pic32prog1.jpg" /></a></p>
<ul class="list1 list-indent1"><li>左基板： PIC18F2550(掟破りの3.3V動作)による<a href="pic18spx.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">pic18spx</a>基板（AVR/PIC18F/PIC24F/ARM JTAG　どれでもライター）</li>
<li>右基板： 今回制作したPIC32MX220F032B 基板</li></ul>
<ul class="list1 list-indent1"><li>PIC18F2550からPIC32MX220F032Bへの配線図</li></ul>
<pre>PIC18F2550           PIC32MX220F032B
RA0(pin2)-10k-Vdd
RA1(pin3)-10k-Vdd
RA2(pin4)------------PGD(pic32)
RA3(pin5)------------PGC(pic32)
                  (C)
              |／---MCLR(pic32)
RA5(pin7)-10k-|  
           (B)|＼
     2SC1815    ↓(E)
                GND</pre>
<p>ファームウェア</p>
<ul class="list1 list-indent1"><li><a href="pic18spx.html" class="link_page_passage" data-mtime="2014-11-17T14:44:27+09:00">pic18spx</a>ブートローダーpic18bootを利用してブートする.</li>
<li>microchipのサイトから、PicKit2の最新ファームHEXを入手する.</li>
<li>それをテキストエディタで編集して、0x2000番地以前のデータ(0000-1fff)を削除しておく.(このエリアはPickit2のHIDブートローダーになっている)</li>
<li>pic18bootでそのHEXを書き込む。
<pre>D:&gt; pic18boot.exe -s2000 PK2V023200.hex</pre></li>
<li>PIC18F2550基板のBOOTスイッチ(ジャンパー)をOFFにしてUSBケーブルを再接続する。
<ul class="list2 list-indent1"><li>Windows PCからPicKit2と認識されるのを確認しておく。</li></ul></li></ul>
<ul class="list1 list-indent1"><li>pic32progのソースをコンパイルして実行する。
<pre>PICkit2: invalid status = 0046.</pre></li>
<li>本物のPickit2のアナログ系回路を全部省いてしまっているため、このエラーが出る。</li>
<li>なので、pic32progのinvalid statusが出てreturn する処理をコメントアウトして再コンパイル。</li></ul>
<pre>pic32prog ダウンロード:[[source.zip:/ATMEL_AVR/upload/PIC/source.zip]]</pre>
<p><br /></p>
<ul class="list1 list-indent1"><li>もう一度トライする。</li></ul>
<p>こんな感じ。</p>
<pre>E:\pic32prog\src&gt;pic32prog
Programmer for Microchip PIC32 microcontrollers, Version 1.75
   Copyright: (C) 2011-2012 Serge Vakulenko
     Adapter: PICkit2 Version 2.32.0
PICkit2: invalid status = 0046.
   Processor: MX220F032B (id 04A00053)
Flash memory: 32 kbytes
 Boot memory: 3 kbytes
Configuration:
   DEVCFG0 = 7fffffee
                    2 Debugger disabled
                   08 Use PGC3/PGD3
   DEVCFG1 = ff60ce5b
                    3 Primary oscillator with PLL
                  2   Primary oscillator: HS
                 0    Peripheral bus clock: SYSCLK / 1
                 4    Fail-safe clock monitor disable
                 8    Clock switching disable
                0     Watchdog postscale: 1/1
   DEVCFG2 = fff979d9
                    1 PLL divider: 1/2
                   5  PLL multiplier: 20x
                  1   USB PLL divider: 1/2
                      Enable USB PLL
                1     PLL postscaler: 1/2
   DEVCFG3 = ffffffff
                7     Assign irq priority 7 to shadow set
              1       Ethernet MII enabled
              2       Default Ethernet i/o pins
              4       Default CAN i/o pins
             4        USBID pin: controlled by USB
             8        VBuson pin: controlled by USB

E:\pic32prog\src&gt;</pre>
<ul class="list1 list-indent1"><li>一応デバイスIDとfuse bitの読み出しまで成功！</li></ul>
<p><br /></p>
<p><br /></p>
<p>追記</p>
<ul class="list1 list-indent1"><li>PIC32MX220F032B用に作られたLED点滅プログラムを書き込んで動作するのを確認しました。</li>
<li><del>Pinguino用のUSBブートローダーを動作させるには、まだ至っていません。</del> --- Pinguinoのブートローダーを書き込んで、スケッチの実行にも成功しました。</li></ul>
<p><br />
<br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_10">Pinguinoのgccコンパイラとフレームワークを使ってＬチカをやってみる。<a class="anchor_super" id="lc3a9804" href="#lc3a9804" title="lc3a9804" style="user-select:none;">&dagger;</a></h2>
<p><strong>やってみました。</strong></p>
<ul class="list1 list-indent1"><li>ダウンロード:<a href="/ATMEL_AVR/upload/PIC/pled.zip" rel="nofollow">pled.zip</a></li></ul>
<p><br />
<br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_11">続編・・・<a class="anchor_super" id="l291294a" href="#l291294a" title="l291294a" style="user-select:none;">&dagger;</a></h3>
<p><strong>CDCprintfとタイマー割り込みとＬチカの同時実行です</strong></p>
<p>ソースはかなり強引です。</p>
<ul class="list1 list-indent1"><li>ダウンロード:<a href="/ATMEL_AVR/upload/PIC/cdcint.zip" rel="nofollow">cdcint.zip</a></li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>コツ： USB<span class="noexists"><a href="./?cmd=edit&amp;page=DeviceTasks&amp;refer=PIC32MX">DeviceTasks</a></span>()相当品をポーリングで呼び出す場合は、最近のPCだと125uS間隔で呼ばないとデバイスエラーが起きやすいようです。1mSだと不明なデバイスになって接続できませんでした。</li></ul>
<p><strong>Serial Portを使用したprintfテスト</strong></p>
<p>スケッチのまんまです。</p>
<ul class="list1 list-indent1"><li>ダウンロード:<a href="/ATMEL_AVR/upload/PIC/serial.zip" rel="nofollow">serial.zip</a></li></ul>
<p><br /></p>
<p>利点</p>
<ul class="list1 list-indent1"><li>制限付きのXC32コンパイラ(Microchip)ではなく</li>
<li>Pinguinoのgccコンパイラを使用すれば、最適化オプションの自由な使用やmips16のコード出力なども可能になります。</li></ul>
<p>弱点</p>
<ul class="list1 list-indent1"><li>XC32で書かれたソースとの互換性に乏しいです。（主にMicrochipのヘッダーや#pragmaなどの使用が不可）</li>
<li>そのかわり、Pinguinoスケッチのソースとの互換性を取ることができます。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_12">pic32progで（物理アドレス指定にしていない）fuseをちゃんと焼けるように改造する。<a class="anchor_super" id="ad9488be" href="#ad9488be" title="ad9488be" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>pic32progは、1FC0_0000〜1FC0_xxxxの物理アドレス領域にあるboot flashとconfig fuseは正しく焼けますが、</li>
<li>それが論理アドレス(BFC0_xxxxとか9FC0_xxxx)になっている場合はそのHEXレコードは完全無視されます。</li></ul>
<p>この挙動を直すには、以下のように改造を施します。</p>
<ul class="list1 list-indent1"><li>pic32prog.c: 260行目あたり
<pre>	if (record_type == 4) {
	    /* Extended address. */
           if (bytes != 2) {
               fprintf (stderr, _(&quot;%s: invalid HEX linear address record length\n&quot;),
                   filename);
               exit (1);
           }
	    high = data[0] &lt;&lt; 8 | data[1];

#if	1	// これを追加.
		high &amp;= 0x1fff;		// 9fc0_xxxx -&gt; 1fc0_xxxx
#endif
	    continue;
	}</pre></li></ul>
<p>対処済みpic32prog.exeのダウンロード:<a href="/ATMEL_AVR/upload/PIC/source.zip" rel="nofollow">source.zip</a></p>
<ul class="list1 list-indent1"><li>bootエリアとconfigエリアが物理アドレスでないHEXを扱うことが可能。</li>
<li>devcfg0&lt;bit1:0&gt;が'10'のときに気を利かせて'11'にすることで、PinguinoのブートローダーHEXをそのまま書き込んで動作ＯＫ。</li>
<li>即席版PicKit2に対応。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_13">pic32progを使って、PinguinoX.3に付属のHIDブートローダーを焼くには？<a class="anchor_super" id="jd266405" href="#jd266405" title="jd266405" style="user-select:none;">&dagger;</a></h2>
<pre>C:/PinguinoX.3/extra/bootloaders/32bit/PIC32-Pinguino_HIDBoot_MX220.hex</pre>
<ul class="list1 list-indent1"><li>これをそのままpic32progで焼いても、どういうわけか、うんともすんとも言いません。</li></ul>
<p><strong>対策</strong></p>
<ul class="list1 list-indent1"><li>HEXファイルの９行目を差し替えます。</li>
<li>diff patch.hex PIC32-Pinguino_HIDBoot_MX220.hex
<pre>9c9
&lt; :040BFC00FFFFFF7F79
---
&gt; :040bfc00eeffff7f8a</pre></li>
<li>差し替えたpatch.hexをpic32progで焼くと、MX220F032B(DIPパッケージ)でHID bootloaderが使えるようになります。</li>
<li>上記の対処済み<a href="/ATMEL_AVR/upload/PIC/source.zip" rel="nofollow">pic32prog.exe</a>を使用する場合はHEXのパッチも不要です。</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_14">Pinguinoブートローダーの使い方。<a class="anchor_super" id="l8343c81" href="#l8343c81" title="l8343c81" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>RB15にLEDを、また、RB7を抵抗pullupして、GNDに落とすBOOT-SWを実装します。</li>
<li>RESET-SWも近くに実装します。</li>
<li>Pinguinoのスケッチを書き込みたいときは、BOOT-SWを押したまま、RESET-SWをぽちっと押します。</li>
<li>するとRB15のLEDが点滅を始めるので、Pinguinoのスケッチ書き込みを実行します。</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_15">PinguinoのスケッチでprintfしたものをUSB経由のteratermで表示したい。<a class="anchor_super" id="nbab8a1e" href="#nbab8a1e" title="nbab8a1e" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>01.basic にある Printf.pdeをGUIでそのまま試すとサイズオーバーでlinkエラーになるようです。</li>
<li>対処としては、printfやprintlnを適度に削ってはビルドしてサイズが16K以内になるように調整します。</li>
<li>うまくいくとCDCデバイスとしてteratermなどから会話的に文字表示が出来ます。</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_16">MIPS32のHEXファイルから逆アセンブルリストを作りたい<a class="anchor_super" id="g883fc9d" href="#g883fc9d" title="g883fc9d" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>こんな感じ。
<pre>D:&gt; mips-objdump -m mips:isa32r2 -b ihex -D 1fc0.hex &gt;1fc0.asm</pre></li>
<li>DISRというMIPS用の逆アセンブラはコメント欄に2命令で生成された絶対アドレスを表示したり、遅延スロット命令に -s- 印を付けてくれて見やすいのだが・・・R4000に対応していないのであった（爆</li></ul>
<p><br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_17">HID-BOOTLOADERのソース？<a class="anchor_super" id="efe2f077" href="#efe2f077" title="efe2f077" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>探索中</li>
<li>とりあえず、Mchipのサイトから、AN1388というUSBを含む多様なブートローダーのアプリケーションノートが入手できます。</li>
<li>しかし、MX220F032Bには直接は対応していません。</li>
<li>htmlのドキュメント内に、MX220への対応のさせ方が書かれているようです。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_18">HID-BOOTLOADERのソースを探す。<a class="anchor_super" id="l77d3424" href="#l77d3424" title="l77d3424" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>AN1388はPinguinoのブートローダーと互換性がありません。</li>
<li>一番近いのはUBW32のサイトにある、HIDBoot.X.zipのようです。</li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h3 id="content_1_19">PIC32-Pinguino_HIDBoot_MX220.hex を再構築してみるテスト<a class="anchor_super" id="m339891d" href="#m339891d" title="m339891d" style="user-select:none;">&dagger;</a></h3>
<ul class="list1 list-indent1"><li><del>とりあえず、コンパイル可能にして、HIDデバイス認識するところまで漕ぎ着けました。</del></li>
<li>完成しました。サイズは8kB(+BOOT3kB)以内に収まっています。</li>
<li>拡張機能(RAM/PORTの読み書き、任意アドレス実行)付です。</li></ul>
<p><br /></p>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_20">HIDBoot.XをPinguino付属のmips32-gccで動かす。<a class="anchor_super" id="v04cfedd" href="#v04cfedd" title="v04cfedd" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>同様のファームウェアをMicroChipのpic32-gccではなく、Pinguino付属のmips-gccでビルドします。</li>
<li>'-mips16'オプションが有効です。</li>
<li>こちらは、Mchipコンパイラを使用しないため、60日制限はありません。</li>
<li>crt0.Sを改造してありますので、さらにコンパクトです。</li></ul>
<ul class="list1 list-indent1"><li><strong>ダウンロード:</strong><a href="/ATMEL_AVR/upload/PIC/HIDBoot_Mips32gcc.X.zip" rel="nofollow">HIDBoot_Mips32gcc.X.zip</a></li></ul>

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_21">HIDBoot.Xを内蔵ＲＣ発振(FRC)で動かす。<a class="anchor_super" id="ace0d76d" href="#ace0d76d" title="ace0d76d" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>8MHz水晶を実装しない選択を用意しました。</li>
<li>但しRA4に4MHz FRC出力を指定して、それをOSC1に入力する配線が必要になります。(RA4はGPIOとしては使えなくなります)代わりにOSC2が空きます。</li></ul>
<ul class="list1 list-indent1"><li><strong>ダウンロード:</strong><a href="/ATMEL_AVR/upload/PIC/HIDBoot.X.zip" rel="nofollow">HIDBoot.X.zip</a></li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_22">PIC32MX220F032B のオーバークロッキングに挑戦<a class="anchor_super" id="b06169e1" href="#b06169e1" title="b06169e1" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>Pinguino版のビルドで試してみました。</li>
<li>config.c
<pre>#define	CONFIG_FPLLIDIV			IDIV_2	/* 8 MHz -&gt;	4 MHz */	
#define	CONFIG_FPLLMUL			MUL_20	/* 4 MHz -&gt;	80 MHz */	 
#define	CONFIG_FPLLODIV			ODIV_2	/* 80 MHz -&gt; 40	MHz	*/	  </pre></li>
<li>水晶は8MHzを使用しています。</li>
<li>8MHz以外の水晶を使用する場合は、CONFIG_FPLLIDIVの分周比を調整して、PLLの入力クロックが常に4MHz
になるようにします。</li>
<li>つまり、水晶の周波数は、4/8/12/16/20MHzのどれでも使えるように出来ます。</li></ul>
<p>参考図</p>
<p><a href="/ATMEL_AVR/upload/PIC/pic32pll.png" rel="nofollow"><img src="/ATMEL_AVR/upload/PIC/pic32pll.png" alt="/ATMEL_AVR/upload/PIC/pic32pll.png" /></a></p>
<ul class="list1 list-indent1"><li>そして、PLLの逓倍の倍率は、FPLLMULで設定します。
<pre>#define	CONFIG_FPLLMUL			MUL_20	/* 4 MHz -&gt;	80 MHz */	 </pre></li>
<li>20倍すると80MHzです。PLL出力は80MHzになります。</li></ul>
<ul class="list1 list-indent1"><li>それを２分周して、CPU Clockの40MHzを得ます。
<pre>#define	CONFIG_FPLLODIV			ODIV_2	/* 80 MHz -&gt; 40	MHz	*/	  </pre></li></ul>
<p><br />
では、クロックアップを試みます。</p>
<pre>#define	CONFIG_FPLLMUL			MUL_16	/* 4 MHz -&gt;  64 MHz */	 
#define	CONFIG_FPLLODIV			ODIV_1	/* 64 MHz -&gt; 64 MHz */	  </pre>
<ul class="list1 list-indent1"><li>これでHIDBoot_mips32gcc.X.zipをビルドして焼きます。</li></ul>
<ul class="list1 list-indent1"><li>64MHzは余裕でした。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>では、一気に80MHz
<pre>#define	CONFIG_FPLLMUL			MUL_20	/* 4 MHz -&gt;  80 MHz */	 
#define	CONFIG_FPLLODIV			ODIV_1	/* 80 MHz -&gt; 80 MHz */	  </pre></li>
<li>これでも比較的動いています。USB-HIDデバイスとして動作して、hidmon32.exeを実行すると
内部メモリーをコンソールにダンプしてくれます。</li>
<li>ＬＥＤの点滅速度は倍になっています。</li>
<li>信頼性は、まあ、無いでしょうね。<strong>定格の倍速動作</strong>なので</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>さらに84MHz
<pre>#define	CONFIG_FPLLMUL			MUL_21	/* 4 MHz -&gt;  84 MHz */	 
#define	CONFIG_FPLLODIV			ODIV_1	/* 84 MHz -&gt; 84 MHz */	  </pre></li>
<li>残念。LED点滅しませんでした。</li></ul>
<ul class="list1 list-indent1"><li>というわけで、DIPなのでたいしてクロックアップできないと思っていたら、意外と実力はあるみたいです。</li>
<li>電圧喝入れ！は、DIP内部にレギュレータを持っているので、無理でした。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_23">PIC32MX220F032B のオーバークロッキングの次はアンダークロッキング<a class="anchor_super" id="k351ef79" href="#k351ef79" title="k351ef79" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>アンダークロックはPLL出力に対して、分周比を大きく取ります。</li>
<li>ODIVは1/2/4/8/16/32/64/256の中から選びます。
<pre>#define	CONFIG_FPLLMUL			MUL_16	/* 4 MHz -&gt;  64 MHz */	 
#define	CONFIG_FPLLODIV			ODIV_4	/* 64 MHz -&gt; 16 MHz */	  </pre></li>
<li>16MHzが下限でした。</li>
<li>これより低くするとLED点滅しませんし、USBデバイス認識もしないようです。</li>
<li>USBスタックのどこかにDelayタイマーのような処理が埋まっていて、あまり遅くするとデバイス認識出来ないようになるのかもしれませんが、原因はまだ突き止めていません。</li></ul>
<p><br /></p>
<ul class="list1 list-indent1"><li>HIDBoot.Xのかわりに:<a href="/ATMEL_AVR/upload/PIC/pled.zip" rel="nofollow">pled.zip</a>で試したところ、
<pre>#define	CONFIG_FPLLMUL			MUL_16	/* 4 MHz -&gt;  64 MHz */	 
#define	CONFIG_FPLLODIV			ODIV_256	/* 64 MHz -&gt; 250 kHz */	  </pre></li>
<li>250kHzクロックでも正しくLED点滅していましたので、USB周りの速度限界が存在する可能性があります。</li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_24">PIC32MX220F032Bの水晶を8MHz以外で使うには<a class="anchor_super" id="f57ec9e7" href="#f57ec9e7" title="f57ec9e7" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>config.c の以下のdefineを同時に書き換えます。
<pre>#define	CONFIG_FPLLIDIV			IDIV_2	/* 8 MHz -&gt;	4 MHz */	
#define	CONFIG_UPLLIDIV			IDIV_2	/* 8 MHz -&gt;	4 MHz */	</pre></li>
<li>PLLの入力が常に4MHzになるように分周比を合わせます。
<div class="ie5"><table class="style_table" cellspacing="1" border="0">
<tr class="style_tr"><td class="style_td">水晶</td><td class="style_td">分周比</td><td class="style_td">FPLLIDIV</td><td class="style_td">UPLLIDIV</td></tr>

<tr class="style_tr"><td class="style_td">4MHz</td><td class="style_td">1/1</td><td class="style_td">IDIV_1</td><td class="style_td">IDIV_1</td></tr>

<tr class="style_tr"><td class="style_td">8MHz</td><td class="style_td">1/2</td><td class="style_td">IDIV_2</td><td class="style_td">IDIV_2</td></tr>

<tr class="style_tr"><td class="style_td">12MHz</td><td class="style_td">1/3</td><td class="style_td">IDIV_3</td><td class="style_td">IDIV_3</td></tr>

<tr class="style_tr"><td class="style_td">16MHz</td><td class="style_td">1/4</td><td class="style_td">IDIV_4</td><td class="style_td">IDIV_4</td></tr>

<tr class="style_tr"><td class="style_td">20MHz</td><td class="style_td">1/5</td><td class="style_td">IDIV_5</td><td class="style_td">IDIV_5</td></tr>
</table></div></li></ul>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_25">PIC32MXで仮想シリアルポートを実装<a class="anchor_super" id="a9ffebee" href="#a9ffebee" title="a9ffebee" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>お約束のUSB-CDCデバイス化です。</li></ul>
<p>もっと読む: <a href="PIC32MX_USBCDC.html" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">PIC32MX_USBCDC</a></p>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_26">サンプルソース移植・改造のコツ<a class="anchor_super" id="m0343ddf" href="#m0343ddf" title="m0343ddf" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>MicroChipのサンプルをどうやって動かすかというテーマです。</li></ul>
<p>もっと読む: <a href="PIC32MXcust.html" title="PIC32MXcust" class="link_page_passage" data-mtime="2014-11-17T14:44:26+09:00">勝手に改蔵</a></p>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_27">PIC32MXアーキテクチャーメモ<a class="anchor_super" id="q8e42765" href="#q8e42765" title="q8e42765" style="user-select:none;">&dagger;</a></h2>
<ul class="list1 list-indent1"><li>リファレンスマニュアルへのリンクなど。</li></ul>
<p>もっと読む: <a href="PIC32memo.html" title="PIC32memo" class="link_page_passage" data-mtime="2013-09-15T22:22:45+09:00">PIC32MXアーキテクチャーメモ</a></p>
<p><br />
<br />
<br /></p>
<hr class="full_hr" />

<div class="jumpmenu"><a href="#navigator">&uarr;</a></div><h2 id="content_1_28">参考リンク<a class="anchor_super" id="xa81a566" href="#xa81a566" title="xa81a566" style="user-select:none;">&dagger;</a></h2>
<p>Pinguino</p>
<ul class="list1 list-indent1"><li><a href="http://wiki.pinguino.cc/index.php/Main_Page/ja" rel="nofollow">http://wiki.pinguino.cc/index.php/Main_Page/ja</a></li></ul>
<p>マイコン風雲録 - 秋月でPIC32MX　28pin DIP版出る</p>
<ul class="list1 list-indent1"><li><a href="http://mpu.seesaa.net/article/399685689.html" rel="nofollow">http://mpu.seesaa.net/article/399685689.html</a></li></ul>
<p>すzのAVR研究: pic32progの改造</p>
<ul class="list1 list-indent1"><li><a href="http://suz-avr.sblo.jp/article/57118986.html" rel="nofollow">http://suz-avr.sblo.jp/article/57118986.html</a> - キャッシュ</li></ul>
<blockquote><p class="quotation">2012/07/18 &#8211; PIC32MX のライタは、純正の pickit3 を使うのが普通らしい。だが、pic32prog を使うと pickit2 が使えるばかりではなく、&gt;FT2232 系の Olimex ARM-USB-TINY Jtag ケーブルが使えるらしい。ソースコードも公開されているので、改造すれば ...</p></blockquote>
<p>すzのAVR研究: PIC32MX220F032B メモ</p>
<ul class="list1 list-indent1"><li><a href="http://suz-avr.sblo.jp/article/57033087.html" rel="nofollow">http://suz-avr.sblo.jp/article/57033087.html</a> - キャッシュ</li></ul>
<blockquote><p class="quotation">2012/07/13 &#8211; pic32prog: PIC32MX220をPickit2/Pickkit3で書き込む. これは ... ソースコード を GPLv2 で配布しているではないか。MPSSE(Olimex ARM-USB-Tiny JTAG adapter) 用のコードもある。 ちょっと見てみよう。FT232RL に対応できるかも知れ ...</p></blockquote>
<p>すzのAVR研究: FT232Rを PIC32MXライタに</p>
<ul class="list1 list-indent1"><li><a href="http://suz-avr.sblo.jp/article/57754140.html" rel="nofollow">http://suz-avr.sblo.jp/article/57754140.html</a> - キャッシュ</li></ul>
<p>電子ブロック工房 KM-Z80 mini</p>
<ul class="list2 list-indent2"><li><a href="http://kandk.cafe.coocan.jp/blog/mycom/index.php" rel="nofollow">http://kandk.cafe.coocan.jp/blog/mycom/index.php</a></li></ul>
<p>PIC32MX220F032B　クリスタル無し、内蔵FRCでUSB</p>
<ul class="list1 list-indent1"><li><a href="http://minkara.carview.co.jp/userid/1110950/blog/28071764/" rel="nofollow">http://minkara.carview.co.jp/userid/1110950/blog/28071764/</a></li></ul>
<hr class="note_hr" /><a id="notefoot_1" href="#notetext_1" class="note_super">*1</a>
<span class="small">関数アトリビュート __attribute__（（mips16）） を使用して関数単位でmips16化するという裏技は試用期間を過ぎた試用版やフリー版でも有効のようです。</span><br />   </div>
  </div>
 </div>
 <div style="clear:both;height:1em;"></div>
 <div id="logo"><a href="/ATMEL_AVR/html/" style="background-image: url(image/title.jpg);"></a></div>
 <div id="personal"><ul><li class="login"><a href="http://">ログインまたはアカウント作成</a></li></ul></div>
 <div id="footer">
  <div id="f-officialico">
   <a href="http://pukiwiki.sourceforge.jp/"><img src="../image/b_pukiwiki.official.png" alt="PukiWiki-official" /></a>
  </div>
  <div id="f-officialdevico">
   <a href="http://pukiwiki.sourceforge.jp/dev/"><img src="../image/b_pukiwiki.dev.png" alt="PukiWiki-dev" /></a>
  </div>
  <div id="f-list">
   <ul><li id="lastmod">Last-modified: 2015-05-02 (土) 16:17:40<span class="page_passage" data-mtime="2015-05-02T16:17:40+09:00"></span></li><li>Site admin: <a href="http://pukiwiki.example.com/">anonymous</a></li>    <li>Powered by PukiWiki</li>
    <li><a href="http://www.luntf.com/">Monobook for PukiWiki</a></li>
   </ul>
  </div>
  <div style="clear:both;"></div>
 </div>
</div>
</body>
</html>
